var xe=Object.defineProperty;var Ae=(n,t,e)=>t in n?xe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var b=(n,t,e)=>(Ae(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function U(){}function Vt(n,t){for(const e in t)n[e]=t[e];return n}function oe(n){return n()}function Wt(){return Object.create(null)}function ft(n){n.forEach(oe)}function Ct(n){return typeof n=="function"}function ht(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function Ee(n){return Object.keys(n).length===0}function ae(n,...t){if(n==null){for(const r of t)r(void 0);return U}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function At(n,t,e){n.$$.on_destroy.push(ae(t,e))}function Le(n,t,e,r){if(n){const i=le(n,t,e,r);return n[0](i)}}function le(n,t,e,r){return n[1]&&r?Vt(e.ctx.slice(),n[1](r(t))):e.ctx}function Se(n,t,e,r){if(n[2]&&r){const i=n[2](r(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(t.dirty.length,i.length);for(let s=0;s<a;s+=1)o[s]=t.dirty[s]|i[s];return o}return t.dirty|i}return t.dirty}function Te(n,t,e,r,i,o){if(i){const a=le(t,e,r,o);n.p(a,i)}}function Re(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let r=0;r<e;r++)t[r]=-1;return t}return-1}function Pe(n){return n&&Ct(n.destroy)?n.destroy:U}function v(n,t){n.appendChild(t)}function j(n,t,e){n.insertBefore(t,e||null)}function O(n){n.parentNode&&n.parentNode.removeChild(n)}function A(n){return document.createElement(n)}function yt(n){return document.createTextNode(n)}function $(){return yt(" ")}function Xt(){return yt("")}function rt(n,t,e,r){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}function u(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function z(n){return n===""?null:+n}function De(n){return Array.from(n.childNodes)}function M(n,t){n.value=t??""}function Zt(n,t,e){n.classList.toggle(t,!!e)}function ke(n,t,{bubbles:e=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:r})}function Dt(n,t){return new n(t)}let Et;function xt(n){Et=n}function It(){if(!Et)throw new Error("Function called outside component initialization");return Et}function ce(n){It().$$.on_mount.push(n)}function $e(n){It().$$.after_update.push(n)}function Fe(n){It().$$.on_destroy.push(n)}function Ce(){const n=It();return(t,e,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[t];if(i){const o=ke(t,e,{cancelable:r});return i.slice().forEach(a=>{a.call(n,o)}),!o.defaultPrevented}return!0}}function Kt(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(r=>r.call(this,t))}const bt=[],kt=[];let wt=[];const Jt=[],ue=Promise.resolve();let Nt=!1;function fe(){Nt||(Nt=!0,ue.then(he))}function Ie(){return fe(),ue}function qt(n){wt.push(n)}const Mt=new Set;let gt=0;function he(){if(gt!==0)return;const n=Et;do{try{for(;gt<bt.length;){const t=bt[gt];gt++,xt(t),Be(t.$$)}}catch(t){throw bt.length=0,gt=0,t}for(xt(null),bt.length=0,gt=0;kt.length;)kt.pop()();for(let t=0;t<wt.length;t+=1){const e=wt[t];Mt.has(e)||(Mt.add(e),e())}wt.length=0}while(bt.length);for(;Jt.length;)Jt.pop()();Nt=!1,Mt.clear(),xt(n)}function Be(n){if(n.fragment!==null){n.update(),ft(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(qt)}}function Me(n){const t=[],e=[];wt.forEach(r=>n.indexOf(r)===-1?t.push(r):e.push(r)),e.forEach(r=>r()),wt=t}const Tt=new Set;let pt;function jt(){pt={r:0,c:[],p:pt}}function Yt(){pt.r||ft(pt.c),pt=pt.p}function Q(n,t){n&&n.i&&(Tt.delete(n),n.i(t))}function et(n,t,e,r){if(n&&n.o){if(Tt.has(n))return;Tt.add(n),pt.c.push(()=>{Tt.delete(n),r&&(e&&n.d(1),r())}),n.o(t)}else r&&r()}function $t(n,t){const e={},r={},i={$$scope:1};let o=n.length;for(;o--;){const a=n[o],s=t[o];if(s){for(const l in a)l in s||(r[l]=1);for(const l in s)i[l]||(e[l]=s[l],i[l]=1);n[o]=s}else for(const l in a)i[l]=1}for(const a in r)a in e||(e[a]=void 0);return e}function Ft(n){return typeof n=="object"&&n!==null?n:{}}function lt(n){n&&n.c()}function it(n,t,e){const{fragment:r,after_update:i}=n.$$;r&&r.m(t,e),qt(()=>{const o=n.$$.on_mount.map(oe).filter(Ct);n.$$.on_destroy?n.$$.on_destroy.push(...o):ft(o),n.$$.on_mount=[]}),i.forEach(qt)}function ot(n,t){const e=n.$$;e.fragment!==null&&(Me(e.after_update),ft(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Ue(n,t){n.$$.dirty[0]===-1&&(bt.push(n),fe(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function _t(n,t,e,r,i,o,a=null,s=[-1]){const l=Et;xt(n);const c=n.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Wt(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);let h=!1;if(c.ctx=e?e(n,t.props||{},(d,f,..._)=>{const g=_.length?_[0]:f;return c.ctx&&i(c.ctx[d],c.ctx[d]=g)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](g),h&&Ue(n,d)),f}):[],c.update(),h=!0,ft(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const d=De(t.target);c.fragment&&c.fragment.l(d),d.forEach(O)}else c.fragment&&c.fragment.c();t.intro&&Q(n.$$.fragment),it(n,t.target,t.anchor),he()}xt(l)}class dt{constructor(){b(this,"$$");b(this,"$$set")}$destroy(){ot(this,1),this.$destroy=U}$on(t,e){if(!Ct(e))return U;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ee(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ge="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ge);const vt=[];function _e(n,t){return{subscribe:Bt(n,t).subscribe}}function Bt(n,t=U){let e;const r=new Set;function i(s){if(ht(n,s)&&(n=s,e)){const l=!vt.length;for(const c of r)c[1](),vt.push(c,n);if(l){for(let c=0;c<vt.length;c+=2)vt[c][0](vt[c+1]);vt.length=0}}}function o(s){i(s(n))}function a(s,l=U){const c=[s,l];return r.add(c),r.size===1&&(e=t(i,o)||U),s(n),()=>{r.delete(c),r.size===0&&e&&(e(),e=null)}}return{set:i,update:o,subscribe:a}}function de(n,t,e){const r=!Array.isArray(n),i=r?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return _e(e,(a,s)=>{let l=!1;const c=[];let h=0,d=U;const f=()=>{if(h)return;d();const g=t(r?c[0]:c,a,s);o?a(g):d=Ct(g)?g:U},_=i.map((g,x)=>ae(g,p=>{c[x]=p,h&=~(1<<x),l&&f()},()=>{h|=1<<x}));return l=!0,f(),function(){ft(_),d(),l=!1}})}function Ne(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,r,i,o,a=[],s="",l=n.split("/");for(l[0]||l.shift();i=l.shift();)e=i[0],e==="*"?(a.push("wild"),s+="/(.*)"):e===":"?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}function qe(n){let t,e,r;const i=[n[2]];var o=n[0];function a(s,l){let c={};if(l!==void 0&&l&4)c=$t(i,[Ft(s[2])]);else for(let h=0;h<i.length;h+=1)c=Vt(c,i[h]);return{props:c}}return o&&(t=Dt(o,a(n)),t.$on("routeEvent",n[7])),{c(){t&&lt(t.$$.fragment),e=Xt()},m(s,l){t&&it(t,s,l),j(s,e,l),r=!0},p(s,l){if(l&1&&o!==(o=s[0])){if(t){jt();const c=t;et(c.$$.fragment,1,0,()=>{ot(c,1)}),Yt()}o?(t=Dt(o,a(s,l)),t.$on("routeEvent",s[7]),lt(t.$$.fragment),Q(t.$$.fragment,1),it(t,e.parentNode,e)):t=null}else if(o){const c=l&4?$t(i,[Ft(s[2])]):{};t.$set(c)}},i(s){r||(t&&Q(t.$$.fragment,s),r=!0)},o(s){t&&et(t.$$.fragment,s),r=!1},d(s){s&&O(e),t&&ot(t,s)}}}function ze(n){let t,e,r;const i=[{params:n[1]},n[2]];var o=n[0];function a(s,l){let c={};if(l!==void 0&&l&6)c=$t(i,[l&2&&{params:s[1]},l&4&&Ft(s[2])]);else for(let h=0;h<i.length;h+=1)c=Vt(c,i[h]);return{props:c}}return o&&(t=Dt(o,a(n)),t.$on("routeEvent",n[6])),{c(){t&&lt(t.$$.fragment),e=Xt()},m(s,l){t&&it(t,s,l),j(s,e,l),r=!0},p(s,l){if(l&1&&o!==(o=s[0])){if(t){jt();const c=t;et(c.$$.fragment,1,0,()=>{ot(c,1)}),Yt()}o?(t=Dt(o,a(s,l)),t.$on("routeEvent",s[6]),lt(t.$$.fragment),Q(t.$$.fragment,1),it(t,e.parentNode,e)):t=null}else if(o){const c=l&6?$t(i,[l&2&&{params:s[1]},l&4&&Ft(s[2])]):{};t.$set(c)}},i(s){r||(t&&Q(t.$$.fragment,s),r=!0)},o(s){t&&et(t.$$.fragment,s),r=!1},d(s){s&&O(e),t&&ot(t,s)}}}function Oe(n){let t,e,r,i;const o=[ze,qe],a=[];function s(l,c){return l[1]?0:1}return t=s(n),e=a[t]=o[t](n),{c(){e.c(),r=Xt()},m(l,c){a[t].m(l,c),j(l,r,c),i=!0},p(l,[c]){let h=t;t=s(l),t===h?a[t].p(l,c):(jt(),et(a[h],1,1,()=>{a[h]=null}),Yt(),e=a[t],e?e.p(l,c):(e=a[t]=o[t](l),e.c()),Q(e,1),e.m(r.parentNode,r))},i(l){i||(Q(e),i=!0)},o(l){et(e),i=!1},d(l){l&&O(r),a[t].d(l)}}}function Qt(){const n=window.location.href.indexOf("#/");let t=n>-1?window.location.href.substr(n+1):"/";const e=t.indexOf("?");let r="";return e>-1&&(r=t.substr(e+1),t=t.substr(0,e)),{location:t,querystring:r}}const Ht=_e(null,function(t){t(Qt());const e=()=>{t(Qt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),Ve=de(Ht,n=>n.location);de(Ht,n=>n.querystring);const te=Bt(void 0);function Xe(n,t){if(t=ne(t),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return ee(n,t),{update(e){e=ne(e),ee(n,e)}}}function je(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function ee(n,t){let e=t.href||n.getAttribute("href");if(e&&e.charAt(0)=="/")e="#"+e;else if(!e||e.length<2||e.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+e);n.setAttribute("href",e),n.addEventListener("click",r=>{r.preventDefault(),t.disabled||Ye(r.currentTarget.getAttribute("href"))})}function ne(n){return n&&typeof n=="string"?{href:n}:n||{}}function Ye(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function He(n,t,e){let{routes:r={}}=t,{prefix:i=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(m,y){if(!y||typeof y!="function"&&(typeof y!="object"||y._sveltesparouter!==!0))throw Error("Invalid component object");if(!m||typeof m=="string"&&(m.length<1||m.charAt(0)!="/"&&m.charAt(0)!="*")||typeof m=="object"&&!(m instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:L,keys:S}=Ne(m);this.path=m,typeof y=="object"&&y._sveltesparouter===!0?(this.component=y.component,this.conditions=y.conditions||[],this.userData=y.userData,this.props=y.props||{}):(this.component=()=>Promise.resolve(y),this.conditions=[],this.props={}),this._pattern=L,this._keys=S}match(m){if(i){if(typeof i=="string")if(m.startsWith(i))m=m.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const k=m.match(i);if(k&&k[0])m=m.substr(k[0].length)||"/";else return null}}const y=this._pattern.exec(m);if(y===null)return null;if(this._keys===!1)return y;const L={};let S=0;for(;S<this._keys.length;){try{L[this._keys[S]]=decodeURIComponent(y[S+1]||"")||null}catch{L[this._keys[S]]=null}S++}return L}async checkConditions(m){for(let y=0;y<this.conditions.length;y++)if(!await this.conditions[y](m))return!1;return!0}}const s=[];r instanceof Map?r.forEach((w,m)=>{s.push(new a(m,w))}):Object.keys(r).forEach(w=>{s.push(new a(w,r[w]))});let l=null,c=null,h={};const d=Ce();async function f(w,m){await Ie(),d(w,m)}let _=null,g=null;o&&(g=w=>{w.state&&(w.state.__svelte_spa_router_scrollY||w.state.__svelte_spa_router_scrollX)?_=w.state:_=null},window.addEventListener("popstate",g),$e(()=>{je(_)}));let x=null,p=null;const D=Ht.subscribe(async w=>{x=w;let m=0;for(;m<s.length;){const y=s[m].match(w.location);if(!y){m++;continue}const L={route:s[m].path,location:w.location,querystring:w.querystring,userData:s[m].userData,params:y&&typeof y=="object"&&Object.keys(y).length?y:null};if(!await s[m].checkConditions(L)){e(0,l=null),p=null,f("conditionsFailed",L);return}f("routeLoading",Object.assign({},L));const S=s[m].component;if(p!=S){S.loading?(e(0,l=S.loading),p=S,e(1,c=S.loadingParams),e(2,h={}),f("routeLoaded",Object.assign({},L,{component:l,name:l.name,params:c}))):(e(0,l=null),p=null);const k=await S();if(w!=x)return;e(0,l=k&&k.default||k),p=S}y&&typeof y=="object"&&Object.keys(y).length?e(1,c=y):e(1,c=null),e(2,h=s[m].props),f("routeLoaded",Object.assign({},L,{component:l,name:l.name,params:c})).then(()=>{te.set(c)});return}e(0,l=null),p=null,te.set(void 0)});Fe(()=>{D(),g&&window.removeEventListener("popstate",g)});function R(w){Kt.call(this,n,w)}function I(w){Kt.call(this,n,w)}return n.$$set=w=>{"routes"in w&&e(3,r=w.routes),"prefix"in w&&e(4,i=w.prefix),"restoreScrollState"in w&&e(5,o=w.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[l,c,h,r,i,o,R,I]}class We extends dt{constructor(t){super(),_t(this,t,He,Oe,ht,{routes:3,prefix:4,restoreScrollState:5})}}function Ze(n){let t;return{c(){t=yt("Nothing to see here. Go to Engine or Shader Art.")},m(e,r){j(e,t,r)},p:U,i:U,o:U,d(e){e&&O(t)}}}class Ke extends dt{constructor(t){super(),_t(this,t,null,Ze,ht,{})}}const Je=`#version 300 es

layout(location = 0) in vec2 aPosition;
out vec2 fragCoord;

void main()
{
    fragCoord = aPosition;
    gl_Position = vec4(aPosition, 0.0, 1.0);
}
`,Qe=`#version 300 es

precision mediump float;

in vec2 fragCoord;
uniform float uTime;
uniform float uDensity;

out vec4 fragColor;

//https://iquilezles.org/articles/palettes/
vec3 palette( float t ) {
    vec3 a = vec3(0.5, 0.5, 0.5);
    vec3 b = vec3(0.5, 0.5, 0.5);
    vec3 c = vec3(1.0, 1.0, 1.0);
    vec3 d = vec3(0.263,0.416,0.557);

    return a + b*cos( 6.28318*(c*t+d) );
}

void main()
{
    vec2 uv = fragCoord;
    float d = length(uv);

    vec2 uv0 = uv;
    vec3 finalColor = vec3(0.0);

    for (float i = 0.0; i < 4.0; i++) {
        uv = fract(uv * uDensity / 10.0) - 0.5;

        float d = length(uv) * exp(-length(uv0));

        vec3 col = palette(length(uv0) + i*.4 + uTime*.4);

        d = sin(d * 8. + uTime)/8.;
        d = abs(d);

        d = pow(0.01 / d, 1.2);

        finalColor += col * d;
    }

    fragColor = vec4(finalColor, 1.0);
}
`,Rt=Bt(15),Pt=Bt(1e3);function tn(n){let t,e,r,i,o;return{c(){t=A("input"),e=$(),r=A("input"),u(t,"type","number"),u(t,"min","100"),u(t,"max","3000"),u(r,"id",n[0]),u(r,"type","range"),u(r,"min","100"),u(r,"max","3000")},m(a,s){j(a,t,s),M(t,n[1]),j(a,e,s),j(a,r,s),M(r,n[1]),i||(o=[rt(t,"input",n[2]),rt(r,"change",n[3]),rt(r,"input",n[3])],i=!0)},p(a,[s]){s&2&&z(t.value)!==a[1]&&M(t,a[1]),s&1&&u(r,"id",a[0]),s&2&&M(r,a[1])},i:U,o:U,d(a){a&&(O(t),O(e),O(r)),i=!1,ft(o)}}}function en(n,t,e){let r;At(n,Pt,s=>e(1,r=s));let{id:i="speed-slider"}=t;function o(){r=z(this.value),Pt.set(r)}function a(){r=z(this.value),Pt.set(r)}return n.$$set=s=>{"id"in s&&e(0,i=s.id)},[i,r,o,a]}class nn extends dt{constructor(t){super(),_t(this,t,en,tn,ht,{id:0})}}function rn(n){let t,e,r,i,o;return{c(){t=A("input"),e=$(),r=A("input"),u(t,"type","number"),u(t,"min","1"),u(t,"max","30"),u(r,"id",n[0]),u(r,"type","range"),u(r,"min","1"),u(r,"max","30")},m(a,s){j(a,t,s),M(t,n[1]),j(a,e,s),j(a,r,s),M(r,n[1]),i||(o=[rt(t,"input",n[2]),rt(r,"change",n[3]),rt(r,"input",n[3])],i=!0)},p(a,[s]){s&2&&z(t.value)!==a[1]&&M(t,a[1]),s&1&&u(r,"id",a[0]),s&2&&M(r,a[1])},i:U,o:U,d(a){a&&(O(t),O(e),O(r)),i=!1,ft(o)}}}function sn(n,t,e){let r;At(n,Rt,s=>e(1,r=s));let{id:i="density-slider"}=t;function o(){r=z(this.value),Rt.set(r)}function a(){r=z(this.value),Rt.set(r)}return n.$$set=s=>{"id"in s&&e(0,i=s.id)},[i,r,o,a]}class on extends dt{constructor(t){super(),_t(this,t,sn,rn,ht,{id:0})}}function an(n){let t,e,r,i,o,a,s,l,c,h,d,f,_,g;return o=new nn({props:{id:"speed-slider"}}),c=new on({props:{id:"density-slider"}}),{c(){t=A("div"),e=A("div"),r=A("label"),r.textContent="Speed",i=$(),lt(o.$$.fragment),a=$(),s=A("label"),s.textContent="Density",l=$(),lt(c.$$.fragment),h=$(),d=A("canvas"),f=$(),_=A("div"),_.innerHTML='<a href="https://www.youtube.com/watch?v=f4s1h2YETNY&amp;t=583s">Shader code by kishimisu</a>',u(r,"for","speed-slider"),u(s,"for","speed-slider"),u(e,"class","toolbar"),u(d,"class","svelte-syf6pw"),u(t,"class","shaderArt svelte-syf6pw")},m(x,p){j(x,t,p),v(t,e),v(e,r),v(e,i),it(o,e,null),v(e,a),v(e,s),v(e,l),it(c,e,null),v(t,h),v(t,d),n[1](d),v(t,f),v(t,_),g=!0},p:U,i(x){g||(Q(o.$$.fragment,x),Q(c.$$.fragment,x),g=!0)},o(x){et(o.$$.fragment,x),et(c.$$.fragment,x),g=!1},d(x){x&&O(t),ot(o),ot(c),n[1](null)}}}function ln(n,t,e){let r,i;At(n,Pt,s=>e(2,r=s)),At(n,Rt,s=>e(3,i=s));let o;ce(()=>{const s=o.getContext("webgl2");if(!s)return;const l=s.createProgram();if(!l)return;const c=s.createShader(s.VERTEX_SHADER);if(!c)return;s.shaderSource(c,Je),s.compileShader(c),s.attachShader(l,c);const h=s.createShader(s.FRAGMENT_SHADER);if(!h)return;s.shaderSource(h,Qe),s.compileShader(h),s.attachShader(l,h),s.linkProgram(l),s.getProgramParameter(l,s.LINK_STATUS)||(console.log(s.getShaderInfoLog(c)),console.log(s.getShaderInfoLog(h)));const d=new Float32Array([-1,-1,1,-1,-1,1,1,-1,-1,1,1,1]),f=s.getUniformLocation(l,"uResolution");s.uniform2f(f,1024,1024);const _=s.getUniformLocation(l,"uTime");s.uniform1f(_,0);const g=s.getUniformLocation(l,"uDensity");s.uniform1f(g,15);const x=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,x),s.bufferData(s.ARRAY_BUFFER,d,s.STATIC_DRAW);const p=0;s.enableVertexAttribArray(p),s.vertexAttribPointer(p,2,s.FLOAT,!1,2*4,0);const D=(R=0)=>{(o.width!==o.clientWidth||o.height!==o.clientHeight)&&(e(0,o.width=o.clientWidth,o),e(0,o.height=o.clientHeight,o),s.viewport(0,0,s.canvas.width,s.canvas.height)),s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.uniform1f(g,i),s.uniform1f(_,R/1e6*r),s.useProgram(l),s.drawArrays(s.TRIANGLES,0,6),requestAnimationFrame(D)};D()});function a(s){kt[s?"unshift":"push"](()=>{o=s,e(0,o)})}return[o,a]}class cn extends dt{constructor(t){super(),_t(this,t,ln,an,ht,{})}}function un(n){let t,e,r,i;const o=n[3].default,a=Le(o,n,n[2],null);return{c(){t=A("a"),a&&a.c(),u(t,"href",n[0]),u(t,"class","svelte-1dzzut9"),Zt(t,"active",n[1]===n[0])},m(s,l){j(s,t,l),a&&a.m(t,null),e=!0,r||(i=Pe(Xe.call(null,t)),r=!0)},p(s,[l]){a&&a.p&&(!e||l&4)&&Te(a,o,s,s[2],e?Se(o,s[2],l,null):Re(s[2]),null),(!e||l&1)&&u(t,"href",s[0]),(!e||l&3)&&Zt(t,"active",s[1]===s[0])},i(s){e||(Q(a,s),e=!0)},o(s){et(a,s),e=!1},d(s){s&&O(t),a&&a.d(s),r=!1,i()}}}function fn(n,t,e){let r;At(n,Ve,s=>e(1,r=s));let{$$slots:i={},$$scope:o}=t,{href:a=""}=t;return n.$$set=s=>{"href"in s&&e(0,a=s.href),"$$scope"in s&&e(2,o=s.$$scope)},[a,r,o,i]}class Ut extends dt{constructor(t){super(),_t(this,t,fn,un,ht,{href:0})}}const hn=`#version 300 es

// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;

uniform mat4 u_worldViewProjection;
uniform mat4 u_worldInverseTranspose;

out vec2 v_texcoord;
out vec3 v_normal;

void main() {
  // Multiply the position by the matrix.
  gl_Position = u_worldViewProjection * a_position;

  // Pass the texcoord to the fragment shader.
  v_texcoord = a_texcoord;

  // Pass the normal to the fragment shader
  v_normal = mat3(u_worldInverseTranspose) * a_normal;
}
`,_n=`#version 300 es

precision highp float;

// Passed in and varied from the vertex shader.
in vec2 v_texcoord;
in vec3 v_normal;

uniform sampler2D u_texture;

struct Light {
  vec4 direction;
  vec4 color;
};

layout(std140) uniform DirectionalLight {
  Light lights[10];
} directionalLights;

out vec4 outColor;

void main() {
  outColor = texture(u_texture, v_texcoord);
  vec3 normal = normalize(v_normal);

  for (int i = 0; i < 10; i++) {
    Light light = directionalLights.lights[i];
    if (!(light.color == vec4(0.0)) && !(light.direction == vec4(0.0))) {
      // TODO: This calculation is buggy. The output is not as expected.
      float strength = dot(normal, light.direction.xyz);
      outColor.rgb *= strength;
    }
  }
}
`;class dn{constructor(t){b(this,"_gl",null);b(this,"_canvas");b(this,"_width");b(this,"_height");this._width=t.width,this._height=t.height,this._canvas=t,this.updateGL(),this.updateViewPort()}set canvas(t){this._canvas=t,this.updateGL(),this.updateViewPort()}updateGL(){const t=this._canvas.getContext("webgl2");if(!t)throw`Could not get webgl2 context of canvas element: ${this._canvas}`;this._gl=t}updateViewPort(){if(!this._gl)throw"Could not update viewport.";this._gl.viewport(0,0,this._gl.canvas.width,this._gl.canvas.height)}linkProgram(t){if(!this._gl)throw"Could not link program.";this._gl.linkProgram(t.webGLProgram),this._gl.getProgramParameter(t.webGLProgram,this._gl.LINK_STATUS)||(t.vertexShader&&console.log(this._gl.getShaderInfoLog(t.vertexShader.webGLShader)),t.fragmentShader&&console.log(this._gl.getShaderInfoLog(t.fragmentShader.webGLShader)))}get width(){return this._width}get height(){return this._height}get gl(){return this._gl}}class pe{constructor({gl:t,source:e}){b(this,"_gl");b(this,"_webGLShader");b(this,"source",null);this._gl=t,this._webGLShader=this.create(),e&&(this._gl.shaderSource(this._webGLShader,e),this._gl.compileShader(this._webGLShader))}get webGLShader(){return this._webGLShader}}class me extends pe{constructor({gl:t,source:e}){super({gl:t,source:e})}create(){const t=this._gl.createShader(this._gl.VERTEX_SHADER);if(!t)throw"Could not create VertexShader";return t}updateSource(t){}}class ge extends pe{constructor({gl:t,source:e}){super({gl:t,source:e})}create(){const t=this._gl.createShader(this._gl.FRAGMENT_SHADER);if(!t)throw"Could not create FragmentShader";return t}updateSource(t){}}class pn{constructor(t){b(this,"_gl");b(this,"_webGLProgram");b(this,"_vertexShader",null);b(this,"_fragmentShader",null);this._gl=t;const e=t.createProgram();if(!e)throw"Could not create program";this._webGLProgram=e}attachShader(t){this._gl.attachShader(this._webGLProgram,t.webGLShader),t instanceof me&&(this._vertexShader=t),t instanceof ge&&(this._fragmentShader=t)}getUniformLocation(t){return this._gl.getUniformLocation(this._webGLProgram,t)}get webGLProgram(){return this._webGLProgram}get vertexShader(){return this._vertexShader}get fragmentShader(){return this._fragmentShader}}class mt{constructor(t){b(this,"_values");this._values=this.create(t)}static substract(t,e){if(t.is1D(t)&&e.is1D(e))return new mn([t._values[0]-e._values[0]]);if(t.is2D(t)&&e.is2D(e))return new gn([t._values[0]-e._values[0],t._values[1]-e._values[1]]);if(t.is3D(t)&&e.is3D(e))return new ut([t._values[0]-e._values[0],t._values[1]-e._values[1],t._values[2]-e._values[2]]);if(t.is4D(t)&&e.is4D(e))return new Lt([t._values[0]-e._values[0],t._values[1]-e._values[1],t._values[2]-e._values[2],t._values[3]-e._values[3]]);throw new Error("Vectors must have the same dimension to subtract.")}static dot(t,e){return t._values.reduce((r,i,o)=>r+i*e._values[o],0)}get values(){return this._values}set values(t){this._values=t}is1D(t){return t.values.length===1}is2D(t){return t.values.length===2}is3D(t){return t.values.length===3}is4D(t){return t.values.length===4}normalize(){const t=Math.sqrt(this._values.reduce((r,i)=>r+i*i,0)),e=this._values.map(r=>r/t);return this._values=e,this}toNormalized(){const t=Math.sqrt(this._values.reduce((i,o)=>i+o*o,0)),e=this._values.map(i=>i/t),r=this.constructor;return new r(e)}}class mn extends mt{create(t){return t||[1]}}class gn extends mt{create(t){return t||[1,1]}}class ut extends mt{create(t){return t||[1,1,1]}static cross(t,e){const r=[t._values[1]*e._values[2]-t._values[2]*e._values[1],t._values[2]*e._values[0]-t._values[0]*e._values[2],t._values[0]*e._values[1]-t._values[1]*e._values[0]];return new ut(r)}}class Lt extends mt{create(t){return t||[1,1,1,1]}}class zt{constructor(t){b(this,"_values");this._values=this.create(t)}transpose(){const t=Math.sqrt(this._values.length),e=Array.from({length:this._values.length},(r,i)=>{const o=Math.floor(i/t),a=i%t;return this._values[a*t+o]});return this._values=e,this}get values(){return this._values}set values(t){this._values=t}}const P=class P extends zt{static multiply(t,e){const[r,i,o,a,s,l,c,h,d,f,_,g,x,p,D,R]=t.values,[I,w,m,y,L,S,k,N,Y,Z,F,K,q,H,E,T]=e.values;return new P([r*I+i*L+o*Y+a*q,r*w+i*S+o*Z+a*H,r*m+i*k+o*F+a*E,r*y+i*N+o*K+a*T,s*I+l*L+c*Y+h*q,s*w+l*S+c*Z+h*H,s*m+l*k+c*F+h*E,s*y+l*N+c*K+h*T,d*I+f*L+_*Y+g*q,d*w+f*S+_*Z+g*H,d*m+f*k+_*F+g*E,d*y+f*N+_*K+g*T,x*I+p*L+D*Y+R*q,x*w+p*S+D*Z+R*H,x*m+p*k+D*F+R*E,x*y+p*N+D*K+R*T])}static translation(t,e,r){return new P([1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1])}static xRotation(t){const e=Math.cos(t),r=Math.sin(t);return new P([1,0,0,0,0,e,r,0,0,-r,e,0,0,0,0,1])}static yRotation(t){const e=Math.cos(t),r=Math.sin(t);return new P([e,0,-r,0,0,1,0,0,r,0,e,0,0,0,0,1])}static zRotation(t){const e=Math.cos(t),r=Math.sin(t);return new P([e,r,0,0,-r,e,0,0,0,0,1,0,0,0,0,1])}static scaling(t,e,r){return new P([t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1])}static perspective(t,e,r,i){const o=Math.tan(Math.PI*.5-.5*t),a=1/(r-i);return new P([o/e,0,0,0,0,o,0,0,0,0,(r+i)*a,-1,0,0,r*i*a*2,0])}static orthographic(t,e,r,i,o,a){return new P([2/(e-t),0,0,0,0,2/(i-r),0,0,0,0,2/(o-a),0,(t+e)/(t-e),(r+i)/(r-i),(o+a)/(o-a),1])}static projection(t,e,r){return new P([2/t,0,0,0,0,-2/e,0,0,0,0,2/r,0,-1,1,0,1])}static lookAt(t,e,r=new ut([0,1,0])){var i=mt.substract(t,e).normalize(),o=ut.cross(r,i).normalize(),a=ut.cross(i,o).normalize();return new P([o.values[0],o.values[1],o.values[2],0,a.values[0],a.values[1],a.values[2],0,i.values[0],i.values[1],i.values[2],0,t.values[0],t.values[1],t.values[2],1])}create(t){return t||P.identity}translate(t,e,r){return P.multiply(this,P.translation(t,e,r))}rotateX(t){return P.multiply(this,P.xRotation(t))}rotateY(t){return P.multiply(this,P.yRotation(t))}rotateZ(t){return P.multiply(this,P.zRotation(t))}scale(t,e,r){return P.multiply(this,P.scaling(t,e,r))}invert(){const[t,e,r,i,o,a,s,l,c,h,d,f,_,g,x,p]=this.values,D=d*p,R=x*f,I=s*p,w=x*l,m=s*f,y=d*l,L=r*p,S=x*i,k=r*f,N=d*i,Y=r*l,Z=s*i,F=c*g,K=_*h,q=o*g,H=_*a,E=o*h,T=c*a,tt=t*g,V=_*e,X=t*h,J=c*e,B=t*a,nt=o*e,at=D*a+w*h+m*g-(R*a+I*h+y*g),C=R*e+L*h+N*g-(D*e+S*h+k*g),W=I*e+S*a+Y*g-(w*e+L*a+Z*g),ct=y*e+k*a+Z*h-(m*e+N*a+Y*h),G=1/(t*at+o*C+c*W+_*ct);return new P([G*at,G*C,G*W,G*ct,G*(R*o+I*c+y*_-(D*o+w*c+m*_)),G*(D*t+S*c+k*_-(R*t+L*c+N*_)),G*(w*t+L*o+Z*_-(I*t+S*o+Y*_)),G*(m*t+N*o+Y*c-(y*t+k*o+Z*c)),G*(F*l+H*f+E*p-(K*l+q*f+T*p)),G*(K*i+tt*f+J*p-(F*i+V*f+X*p)),G*(q*i+V*l+B*p-(H*i+tt*l+nt*p)),G*(T*i+X*l+nt*f-(E*i+J*l+B*f)),G*(q*d+T*x+K*s-(E*x+F*s+H*d)),G*(X*x+F*r+V*d-(tt*d+J*x+K*r)),G*(tt*s+nt*x+H*r-(B*x+q*r+V*s)),G*(B*d+E*r+J*s-(X*s+nt*d+T*r))])}transformVector(t){const e=this.values,r=[];for(let i=0;i<4;++i){r[i]=0;for(let o=0;o<4;++o)r[i]+=t.values[o]*e[o*4+i]}return new Lt(r)}};b(P,"identity",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);let st=P;class re{constructor({gl:t,type:e,name:r,program:i,value:o}){b(this,"_gl");b(this,"_value",null);b(this,"_type");b(this,"_name");b(this,"_program",null);this._gl=t,this._name=r,this._type=e,i&&(this._program=i),o!==void 0&&(o instanceof zt||o instanceof mt?this.value=o.values:this.value=o)}get value(){return this._value}set value(t){t instanceof zt||t instanceof mt?this._value=t.values:this._value=t;const e=this.getLocation();if(Array.isArray(t))switch(this._type){case"2f":this._gl.uniform2f(e,t[0],t[1]);break;case"2i":this._gl.uniform2i(e,t[0],t[1]);break;case"3f":this._gl.uniform3f(e,t[0],t[1],t[2]);break;case"3i":this._gl.uniform3i(e,t[0],t[1],t[2]);break;case"4f":this._gl.uniform4f(e,t[0],t[1],t[2],t[3]);break;case"4i":this._gl.uniform4i(e,t[0],t[1],t[2],t[3]);break;case"matrix2fv":this._gl.uniformMatrix2fv(e,!1,t);break;case"matrix3fv":this._gl.uniformMatrix3fv(e,!1,t);break;case"matrix4fv":this._gl.uniformMatrix4fv(e,!1,t);break;case"2fv":this._gl.uniform2fv(e,t);break;case"3fv":this._gl.uniform3fv(e,t);break;case"4fv":this._gl.uniform4fv(e,t);break;default:throw`Invalid value ${t} for type ${this._type}`}else switch(this._type){case"1f":this._gl.uniform1f(e,t);break;case"1i":this._gl.uniform1i(e,t);break;default:throw`Invalid value ${t} for type ${this._type}`}}getLocation(){if(!this._program)throw"Could not get location of uniform. No program attached.";return this._gl.getUniformLocation(this._program.webGLProgram,this._name)}}const vn=new Float32Array([0,150,0,0,0,0,30,150,0,0,0,0,30,0,0,30,150,0,30,150,0,30,120,0,100,150,0,30,120,0,100,120,0,100,150,0,30,90,0,30,60,0,67,90,0,30,60,0,67,60,0,67,90,0,0,150,-30,30,150,-30,0,0,-30,0,0,-30,30,150,-30,30,0,-30,30,150,-30,100,150,-30,30,120,-30,30,120,-30,100,150,-30,100,120,-30,30,90,-30,67,90,-30,30,60,-30,30,60,-30,67,90,-30,67,60,-30,0,150,0,100,150,0,100,150,-30,0,150,0,100,150,-30,0,150,-30,100,150,0,100,120,0,100,120,-30,100,150,0,100,120,-30,100,150,-30,30,120,0,30,120,-30,100,120,-30,30,120,0,100,120,-30,100,120,0,30,120,0,30,90,-30,30,120,-30,30,120,0,30,90,0,30,90,-30,30,90,0,67,90,-30,30,90,-30,30,90,0,67,90,0,67,90,-30,67,90,0,67,60,-30,67,90,-30,67,90,0,67,60,0,67,60,-30,30,60,0,30,60,-30,67,60,-30,30,60,0,67,60,-30,67,60,0,30,60,0,30,0,-30,30,60,-30,30,60,0,30,0,0,30,0,-30,0,0,0,0,0,-30,30,0,-30,0,0,0,30,0,-30,30,0,0,0,150,0,0,150,-30,0,0,-30,0,150,0,0,0,-30,0,0,0]),se=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),bn=new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]);function St(n){return n*(Math.PI/180)}class Ot{constructor({gl:t,name:e,program:r,pointerProperties:i,createVao:o}){b(this,"_gl");b(this,"_buffer");b(this,"_name");b(this,"_program",null);b(this,"_vao",null);b(this,"_pointerProperties");b(this,"_createVao");this._gl=t,this._name=e,r&&(this._program=r),this._createVao=o||!1;const a=t.createBuffer();if(!a)throw"Could not create buffer";this._pointerProperties={normalize:!1,stride:0,offset:0,...i},this._buffer=a}get name(){return this._name}get buffer(){return this._buffer}get vao(){if(!this._vao)throw"Could not get vao of attribute. Was the data set already?";return this._vao}getLocation(){if(!this._program)throw"Could not get location of attribute. No program attached.";return this._gl.getAttribLocation(this._program.webGLProgram,this._name)}setBufferData(t){this._createVao&&(this._vao=this._gl.createVertexArray(),this._gl.bindVertexArray(this._vao)),this._gl.enableVertexAttribArray(this.getLocation()),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.STATIC_DRAW);const{size:e,type:r,normalize:i,stride:o,offset:a}=this._pointerProperties;this._gl.vertexAttribPointer(this.getLocation(),e,r,i,o,a)}getBufferData(){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer);const t=this._gl.getBufferParameter(this._gl.ARRAY_BUFFER,this._gl.BUFFER_SIZE),e=new Float32Array(t/Float32Array.BYTES_PER_ELEMENT);return this._gl.getBufferSubData(this._gl.ARRAY_BUFFER,0,e),e}getPointerProperties(){return this._pointerProperties}}class Gt{constructor({coordinates:t,normals:e,texture:r,gl:i,program:o}){b(this,"_gl");b(this,"_positionAttribute");b(this,"_normalsAttribute");b(this,"_texture");b(this,"_coordinates");b(this,"_normals");this._coordinates=t,this._normals=e,this._gl=i,this._positionAttribute=new Ot({gl:i,name:"a_position",program:o,createVao:!0,pointerProperties:{size:3,type:i.FLOAT}}),t&&this._positionAttribute.setBufferData(t),this._normalsAttribute=new Ot({gl:i,name:"a_normal",program:o,pointerProperties:{size:3,type:i.FLOAT}}),e&&this._normalsAttribute.setBufferData(e),r&&(this._texture=r)}get coordinates(){return this._coordinates}transform(t){if(!this._coordinates||!this._positionAttribute)return;const e=this._positionAttribute.getPointerProperties().size;for(var r=0;r<this._coordinates.length;r+=e){var i=t.transformVector(new Lt([this._coordinates[r+0],this._coordinates[r+1],this._coordinates[r+2],1]));this._coordinates[r+0]=i.values[0],this._coordinates[r+1]=i.values[1],this._coordinates[r+2]=i.values[2]}if(this._positionAttribute.setBufferData(this._coordinates),!this._normals||!this._normalsAttribute)return;const o=this._positionAttribute.getPointerProperties().size;for(var r=0;r<this._normals.length;r+=o){var i=t.transformVector(new Lt([this._normals[r+0],this._normals[r+1],this._normals[r+2],1]));this._normals[r+0]=i.values[0],this._normals[r+1]=i.values[1],this._normals[r+2]=i.values[2]}this._normalsAttribute.setBufferData(this._normals)}draw(){if(!this._positionAttribute){console.log("No position attribute");return}if(!this._coordinates){console.log("No coordinates passed");return}this._texture&&this._texture.bind(),this._gl.bindVertexArray(this._positionAttribute.vao);const t=this._gl.TRIANGLES,e=0,r=this._coordinates.length/this._positionAttribute.getPointerProperties().size;this._gl.drawArrays(t,e,r),this._texture&&this._texture.draw()}}class ie{constructor({gl:t,program:e,src:r,coordinates:i,wrapS:o,wrapT:a,minFilter:s=t.LINEAR_MIPMAP_LINEAR,magFilter:l=t.LINEAR}){b(this,"_gl");b(this,"_program");b(this,"_image");b(this,"_webGlTexture");b(this,"_coordinatesAttribute");b(this,"_coordinates");this._gl=t,this._program=e,this._coordinates=i,this._coordinatesAttribute=new Ot({gl:t,name:"a_texcoord",program:e,pointerProperties:{size:2,normalize:!0,type:t.FLOAT}}),this._webGlTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._webGlTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this._image=new Image,this._image.src=r,this._image.addEventListener("load",()=>{t.bindTexture(t.TEXTURE_2D,this._webGlTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,l),o&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),a&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.generateMipmap(t.TEXTURE_2D)})}bind(){this._gl.bindTexture(this._gl.TEXTURE_2D,this._webGlTexture)}draw(){this._coordinates&&this._coordinatesAttribute&&this._coordinatesAttribute.setBufferData(this._coordinates)}}const wn=new Float32Array([50,50,-50,50,-50,-50,-50,50,-50,50,-50,-50,-50,-50,-50,-50,50,-50,50,50,50,50,-50,-50,50,50,-50,50,50,50,50,-50,50,50,-50,-50,-50,50,50,50,-50,50,50,50,50,-50,50,50,-50,-50,50,50,-50,50,-50,50,-50,-50,-50,-50,-50,50,50,-50,-50,-50,-50,-50,50,-50,50,50,50,-50,50,-50,-50,-50,50,-50,-50,50,-50,50,-50,-50,50,-50,-50,-50,50,50,-50,-50,50,-50,-50,50,50,50,50,-50,-50,50,50,50,50,50]),yn=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]);class xn{constructor({color:t,direction:e}){b(this,"_color");b(this,"_direction");b(this,"_index",-1);this._color=t,this._direction=e}get color(){return this._color}get direction(){return this._direction}get index(){return this._index}set index(t){this._index=t}}class An{constructor({gl:t,program:e,maxLights:r=10}){b(this,"_DATA_SIZE",8);b(this,"_maxLights",10);b(this,"_directionalLights",[]);b(this,"_directionalLightBuffer");b(this,"_directionalLightArray");b(this,"_gl");b(this,"_program");this._gl=t,this._program=e,this._maxLights=r,this._directionalLightBuffer=t.createBuffer(),this._directionalLightArray=new Float32Array(this._maxLights*this._DATA_SIZE)}get gl(){return this._gl}addDirectionalLight(t){const e=this._gl,r=this._program.webGLProgram;this._directionalLights.push(t),t.index=this._directionalLights.length-1,this._directionalLightArray.set(t.direction.values,t.index*this._DATA_SIZE),this._directionalLightArray.set([0],t.index*this._DATA_SIZE+3),this._directionalLightArray.set(t.color.values,t.index*this._DATA_SIZE+4),e.bindBufferBase(e.UNIFORM_BUFFER,0,this._directionalLightBuffer),e.bufferData(e.UNIFORM_BUFFER,this._directionalLightArray,e.STATIC_DRAW);const i=e.getUniformBlockIndex(r,"DirectionalLight");e.uniformBlockBinding(r,i,0)}removeDirectionalLight(t){this._directionalLights.splice(t.index,1)}}function En(n){let t,e,r,i,o,a,s,l,c,h,d,f,_,g,x,p,D,R,I,w,m,y,L,S,k,N,Y,Z,F,K,q,H,E,T,tt,V,X,J,B,nt,at;return{c(){t=A("div"),e=A("canvas"),r=$(),i=A("div"),o=A("div"),a=A("span"),a.innerHTML='<span class=".label">Positon:</span>',s=$(),l=A("span"),c=A("span"),c.textContent="x",h=$(),d=A("input"),f=$(),_=A("span"),g=A("span"),g.textContent="y",x=$(),p=A("input"),D=$(),R=A("span"),I=A("span"),I.textContent="z",w=$(),m=A("input"),y=$(),L=A("div"),S=A("span"),S.innerHTML='<span class="label svelte-1pqx7i0">Rotation:</span>',k=$(),N=A("span"),Y=A("span"),Y.textContent="x",Z=$(),F=A("input"),K=$(),q=A("span"),H=A("span"),H.textContent="y",E=$(),T=A("input"),tt=$(),V=A("span"),X=A("span"),X.textContent="z",J=$(),B=A("input"),u(e,"class","svelte-1pqx7i0"),u(a,"class","field svelte-1pqx7i0"),u(c,"class","label svelte-1pqx7i0"),u(d,"type","number"),u(d,"class","svelte-1pqx7i0"),u(l,"class","field svelte-1pqx7i0"),u(g,"class","label svelte-1pqx7i0"),u(p,"type","number"),u(p,"min",-1e3),u(p,"max",1e3),u(p,"class","svelte-1pqx7i0"),u(_,"class","field svelte-1pqx7i0"),u(I,"class","label svelte-1pqx7i0"),u(m,"type","number"),u(m,"min",-1e3),u(m,"max",1e3),u(m,"class","svelte-1pqx7i0"),u(R,"class","field svelte-1pqx7i0"),u(o,"class","control svelte-1pqx7i0"),u(S,"class","field svelte-1pqx7i0"),u(Y,"class","label svelte-1pqx7i0"),u(F,"type","number"),u(F,"step",15),u(F,"min",-360),u(F,"max",360),u(F,"class","svelte-1pqx7i0"),u(N,"class","field svelte-1pqx7i0"),u(H,"class","label svelte-1pqx7i0"),u(T,"type","number"),u(T,"step",15),u(T,"min",-360),u(T,"max",360),u(T,"class","svelte-1pqx7i0"),u(q,"class","field svelte-1pqx7i0"),u(X,"class","label svelte-1pqx7i0"),u(B,"type","number"),u(B,"step",15),u(B,"min",-360),u(B,"max",360),u(B,"class","svelte-1pqx7i0"),u(V,"class","field svelte-1pqx7i0"),u(L,"class","control svelte-1pqx7i0"),u(i,"class","controls svelte-1pqx7i0"),u(t,"class","engine svelte-1pqx7i0")},m(C,W){j(C,t,W),v(t,e),n[7](e),v(t,r),v(t,i),v(i,o),v(o,a),v(o,s),v(o,l),v(l,c),v(l,h),v(l,d),M(d,n[1]),v(o,f),v(o,_),v(_,g),v(_,x),v(_,p),M(p,n[2]),v(o,D),v(o,R),v(R,I),v(R,w),v(R,m),M(m,n[3]),v(i,y),v(i,L),v(L,S),v(L,k),v(L,N),v(N,Y),v(N,Z),v(N,F),M(F,n[4]),v(L,K),v(L,q),v(q,H),v(q,E),v(q,T),M(T,n[5]),v(L,tt),v(L,V),v(V,X),v(V,J),v(V,B),M(B,n[6]),nt||(at=[rt(d,"input",n[8]),rt(p,"input",n[9]),rt(m,"input",n[10]),rt(F,"input",n[11]),rt(T,"input",n[12]),rt(B,"input",n[13])],nt=!0)},p(C,[W]){W&2&&z(d.value)!==C[1]&&M(d,C[1]),W&4&&z(p.value)!==C[2]&&M(p,C[2]),W&8&&z(m.value)!==C[3]&&M(m,C[3]),W&16&&z(F.value)!==C[4]&&M(F,C[4]),W&32&&z(T.value)!==C[5]&&M(T,C[5]),W&64&&z(B.value)!==C[6]&&M(B,C[6])},i:U,o:U,d(C){C&&O(t),n[7](null),nt=!1,ft(at)}}}let Ln=100;function Sn(n,t,e){let r,i=0,o=0,a=0,s=0,l=400,c=0,h=0,d=0,f,_=[],g,x,p,D=!1,R=[0,0],I="rotate",w=[0,0,0];const m=E=>{const T=E instanceof TouchEvent;D=!0,T?(I="rotate",R=[E.touches[0].clientX,E.touches[0].clientY]):(I="rotate",R=[E.clientX,E.clientY]),w=[c,h,d]},y=()=>{D=!1,I="rotate"},L=E=>{const T=E instanceof TouchEvent;if(!D)return;const tt=T?E.touches[0].clientX:E.clientX,V=T?E.touches[0].clientY:E.clientY,X=R[0]-tt,J=R[1]-V;I==="rotate"&&(e(4,c=w[0]-J),e(5,h=w[1]-X))},S=E=>{E.key==="w"?l-=10:E.key==="s"?l+=10:E.key==="a"?s-=10:E.key==="d"&&(s+=10)};ce(()=>{const E=new dn(r);if(!E.gl)throw"Could not get gl from Scene.";r.addEventListener("contextmenu",G=>G.preventDefault()),r.addEventListener("mousedown",m),r.addEventListener("touchstart",m),r.addEventListener("mouseup",y),r.addEventListener("touchend",y),r.addEventListener("mousemove",L),r.addEventListener("touchmove",L),document.addEventListener("keydown",S),f=E.gl,p=new pn(f);const T=new me({gl:f,source:hn}),tt=new ge({gl:f,source:_n});p.attachShader(T),p.attachShader(tt),E.linkProgram(p),f.useProgram(p.webGLProgram);const V=new An({gl:f,program:p});var X=st.translation(0,0,0);X=X.rotateX(0);const J=new ie({gl:f,program:p,coordinates:bn,src:"./static/f-texture.png"}),B=new Gt({gl:f,program:p,coordinates:vn,normals:se,texture:J});B.transform(X),_.push(B);var nt=st.translation(0,0,0);const at=new Gt({gl:f,program:p,coordinates:wn,texture:J,normals:yn});at.transform(nt),_.push(at);const C=new ie({gl:f,program:p,coordinates:new Float32Array([0,0,6,0,6,6,0,0,6,6,0,6]),src:"./static/floor.jpeg"}),W=new Gt({gl:f,program:p,coordinates:new Float32Array([-1e3,0,1e3,1e3,0,1e3,1e3,0,-1e3,-1e3,0,1e3,1e3,0,-1e3,-1e3,0,-1e3]),normals:se,texture:C});_.push(W),g=new re({gl:f,type:"matrix4fv",name:"u_worldInverseTranspose",program:p,value:new st().transpose().invert()}),x=new re({gl:f,type:"matrix4fv",name:"u_worldViewProjection",program:p,value:st.identity});const ct=new xn({direction:new ut([0,0,1]),color:new Lt([1,1,1,1])});V.addDirectionalLight(ct),k()});function k(E){if(!f)return;(r.width!==r.clientWidth||r.height!==r.clientHeight)&&(e(0,r.width=r.clientWidth,r),e(0,r.height=r.clientHeight,r),f.viewport(0,0,f.canvas.width,f.canvas.height));let tt=r.width,V=r.height;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.enable(f.CULL_FACE),f.enable(f.DEPTH_TEST);const X=tt/V,J=1,B=1e4,nt=St(60),at=st.perspective(nt,X,J,B),C=new ut([0,0,0]),W=new ut([s,Ln,l]);let ct=new st;ct=ct.rotateY(St(h)).rotateX(St(c)).rotateZ(St(d)).translate(i,o,a);const ve=st.lookAt(W,C).invert();let be=st.multiply(ve,at);const we=st.multiply(ct,be);g.value=ct.values,x.value=we.values,_.forEach(ye=>ye.draw()),requestAnimationFrame(k)}function N(E){kt[E?"unshift":"push"](()=>{r=E,e(0,r)})}function Y(){i=z(this.value),e(1,i)}function Z(){o=z(this.value),e(2,o)}function F(){a=z(this.value),e(3,a)}function K(){c=z(this.value),e(4,c)}function q(){h=z(this.value),e(5,h)}function H(){d=z(this.value),e(6,d)}return[r,i,o,a,c,h,d,N,Y,Z,F,K,q,H]}class Tn extends dt{constructor(t){super(),_t(this,t,Sn,En,ht,{})}}function Rn(n){let t;return{c(){t=yt("Engine")},m(e,r){j(e,t,r)},d(e){e&&O(t)}}}function Pn(n){let t;return{c(){t=yt("Home")},m(e,r){j(e,t,r)},d(e){e&&O(t)}}}function Dn(n){let t;return{c(){t=yt("Shader Art")},m(e,r){j(e,t,r)},d(e){e&&O(t)}}}function kn(n){let t,e,r,i,o,a,s,l,c,h,d,f;return i=new Ut({props:{href:"/engine",$$slots:{default:[Rn]},$$scope:{ctx:n}}}),a=new Ut({props:{href:"/home",$$slots:{default:[Pn]},$$scope:{ctx:n}}}),l=new Ut({props:{href:"/shaderart",$$slots:{default:[Dn]},$$scope:{ctx:n}}}),d=new We({props:{routes:n[0]}}),{c(){t=A("div"),e=A("header"),r=A("nav"),lt(i.$$.fragment),o=$(),lt(a.$$.fragment),s=$(),lt(l.$$.fragment),c=$(),h=A("main"),lt(d.$$.fragment),u(r,"class","svelte-ucdmxf"),u(e,"class","svelte-ucdmxf"),u(h,"class","svelte-ucdmxf"),u(t,"class","content svelte-ucdmxf")},m(_,g){j(_,t,g),v(t,e),v(e,r),it(i,r,null),v(r,o),it(a,r,null),v(r,s),it(l,r,null),v(t,c),v(t,h),it(d,h,null),f=!0},p(_,[g]){const x={};g&2&&(x.$$scope={dirty:g,ctx:_}),i.$set(x);const p={};g&2&&(p.$$scope={dirty:g,ctx:_}),a.$set(p);const D={};g&2&&(D.$$scope={dirty:g,ctx:_}),l.$set(D)},i(_){f||(Q(i.$$.fragment,_),Q(a.$$.fragment,_),Q(l.$$.fragment,_),Q(d.$$.fragment,_),f=!0)},o(_){et(i.$$.fragment,_),et(a.$$.fragment,_),et(l.$$.fragment,_),et(d.$$.fragment,_),f=!1},d(_){_&&O(t),ot(i),ot(a),ot(l),ot(d)}}}function $n(n){return[{"/":Ke,"/shaderart":cn,"/engine":Tn}]}class Fn extends dt{constructor(t){super(),_t(this,t,$n,kn,ht,{})}}new Fn({target:document.getElementById("app")});
//# sourceMappingURL=index-w80TVIqQ.js.map
