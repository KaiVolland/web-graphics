var be=Object.defineProperty;var we=(n,t,e)=>t in n?be(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var _=(n,t,e)=>(we(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function G(){}function Vt(n,t){for(const e in t)n[e]=t[e];return n}function ae(n){return n()}function Zt(){return Object.create(null)}function ht(n){n.forEach(ae)}function Ct(n){return typeof n=="function"}function _t(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function ye(n){return Object.keys(n).length===0}function le(n,...t){if(n==null){for(const s of t)s(void 0);return G}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Et(n,t,e){n.$$.on_destroy.push(le(t,e))}function Ae(n,t,e,s){if(n){const r=ue(n,t,e,s);return n[0](r)}}function ue(n,t,e,s){return n[1]&&s?Vt(e.ctx.slice(),n[1](s(t))):e.ctx}function Le(n,t,e,s){if(n[2]&&s){const r=n[2](s(e));if(t.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(t.dirty.length,r.length);for(let i=0;i<a;i+=1)o[i]=t.dirty[i]|r[i];return o}return t.dirty|r}return t.dirty}function xe(n,t,e,s,r,o){if(r){const a=ue(t,e,s,o);n.p(a,r)}}function Ee(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function Se(n){return n&&Ct(n.destroy)?n.destroy:G}function d(n,t){n.appendChild(t)}function X(n,t,e){n.insertBefore(t,e||null)}function V(n){n.parentNode&&n.parentNode.removeChild(n)}function A(n){return document.createElement(n)}function Lt(n){return document.createTextNode(n)}function R(){return Lt(" ")}function jt(){return Lt("")}function Q(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function c(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function O(n){return n===""?null:+n}function Te(n){return Array.from(n.childNodes)}function N(n,t){n.value=t??""}function Kt(n,t,e){n.classList.toggle(t,!!e)}function Re(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}function Pt(n,t){return new n(t)}let St;function xt(n){St=n}function Bt(){if(!St)throw new Error("Function called outside component initialization");return St}function ce(n){Bt().$$.on_mount.push(n)}function De(n){Bt().$$.after_update.push(n)}function Pe(n){Bt().$$.on_destroy.push(n)}function ke(){const n=Bt();return(t,e,{cancelable:s=!1}={})=>{const r=n.$$.callbacks[t];if(r){const o=Re(t,e,{cancelable:s});return r.slice().forEach(a=>{a.call(n,o)}),!o.defaultPrevented}return!0}}function Jt(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const yt=[],kt=[];let At=[];const Qt=[],fe=Promise.resolve();let Gt=!1;function he(){Gt||(Gt=!0,fe.then(_e))}function Fe(){return he(),fe}function qt(n){At.push(n)}const Ut=new Set;let bt=0;function _e(){if(bt!==0)return;const n=St;do{try{for(;bt<yt.length;){const t=yt[bt];bt++,xt(t),Ie(t.$$)}}catch(t){throw yt.length=0,bt=0,t}for(xt(null),yt.length=0,bt=0;kt.length;)kt.pop()();for(let t=0;t<At.length;t+=1){const e=At[t];Ut.has(e)||(Ut.add(e),e())}At.length=0}while(yt.length);for(;Qt.length;)Qt.pop()();Gt=!1,Ut.clear(),xt(n)}function Ie(n){if(n.fragment!==null){n.update(),ht(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(qt)}}function Me(n){const t=[],e=[];At.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),At=t}const Tt=new Set;let mt;function Xt(){mt={r:0,c:[],p:mt}}function Yt(){mt.r||ht(mt.c),mt=mt.p}function Z(n,t){n&&n.i&&(Tt.delete(n),n.i(t))}function et(n,t,e,s){if(n&&n.o){if(Tt.has(n))return;Tt.add(n),mt.c.push(()=>{Tt.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}function Ft(n,t){const e={},s={},r={$$scope:1};let o=n.length;for(;o--;){const a=n[o],i=t[o];if(i){for(const l in a)l in i||(s[l]=1);for(const l in i)r[l]||(e[l]=i[l],r[l]=1);n[o]=i}else for(const l in a)r[l]=1}for(const a in s)a in e||(e[a]=void 0);return e}function It(n){return typeof n=="object"&&n!==null?n:{}}function ut(n){n&&n.c()}function at(n,t,e){const{fragment:s,after_update:r}=n.$$;s&&s.m(t,e),qt(()=>{const o=n.$$.on_mount.map(ae).filter(Ct);n.$$.on_destroy?n.$$.on_destroy.push(...o):ht(o),n.$$.on_mount=[]}),r.forEach(qt)}function lt(n,t){const e=n.$$;e.fragment!==null&&(Me(e.after_update),ht(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Ce(n,t){n.$$.dirty[0]===-1&&(yt.push(n),he(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function dt(n,t,e,s,r,o,a=null,i=[-1]){const l=St;xt(n);const u=n.$$={fragment:null,ctx:[],props:o,update:G,not_equal:r,bound:Zt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Zt(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let g=!1;if(u.ctx=e?e(n,t.props||{},(f,L,...h)=>{const p=h.length?h[0]:L;return u.ctx&&r(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),g&&Ce(n,f)),L}):[],u.update(),g=!0,ht(u.before_update),u.fragment=s?s(u.ctx):!1,t.target){if(t.hydrate){const f=Te(t.target);u.fragment&&u.fragment.l(f),f.forEach(V)}else u.fragment&&u.fragment.c();t.intro&&Z(n.$$.fragment),at(n,t.target,t.anchor),_e()}xt(l)}class gt{constructor(){_(this,"$$");_(this,"$$set")}$destroy(){lt(this,1),this.$destroy=G}$on(t,e){if(!Ct(e))return G;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Be);const wt=[];function de(n,t){return{subscribe:$t(n,t).subscribe}}function $t(n,t=G){let e;const s=new Set;function r(i){if(_t(n,i)&&(n=i,e)){const l=!wt.length;for(const u of s)u[1](),wt.push(u,n);if(l){for(let u=0;u<wt.length;u+=2)wt[u][0](wt[u+1]);wt.length=0}}}function o(i){r(i(n))}function a(i,l=G){const u=[i,l];return s.add(u),s.size===1&&(e=t(r,o)||G),i(n),()=>{s.delete(u),s.size===0&&e&&(e(),e=null)}}return{set:r,update:o,subscribe:a}}function ge(n,t,e){const s=!Array.isArray(n),r=s?[n]:n;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return de(e,(a,i)=>{let l=!1;const u=[];let g=0,f=G;const L=()=>{if(g)return;f();const p=t(s?u[0]:u,a,i);o?a(p):f=Ct(p)?p:G},h=r.map((p,y)=>le(p,v=>{u[y]=v,g&=~(1<<y),l&&L()},()=>{g|=1<<y}));return l=!0,L(),function(){ht(h),f(),l=!1}})}function $e(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,s,r,o,a=[],i="",l=n.split("/");for(l[0]||l.shift();r=l.shift();)e=r[0],e==="*"?(a.push("wild"),i+="/(.*)"):e===":"?(s=r.indexOf("?",1),o=r.indexOf(".",1),a.push(r.substring(1,~s?s:~o?o:r.length)),i+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~s?"?":"")+"\\"+r.substring(o))):i+="/"+r;return{keys:a,pattern:new RegExp("^"+i+(t?"(?=$|/)":"/?$"),"i")}}function Ue(n){let t,e,s;const r=[n[2]];var o=n[0];function a(i,l){let u={};if(l!==void 0&&l&4)u=Ft(r,[It(i[2])]);else for(let g=0;g<r.length;g+=1)u=Vt(u,r[g]);return{props:u}}return o&&(t=Pt(o,a(n)),t.$on("routeEvent",n[7])),{c(){t&&ut(t.$$.fragment),e=jt()},m(i,l){t&&at(t,i,l),X(i,e,l),s=!0},p(i,l){if(l&1&&o!==(o=i[0])){if(t){Xt();const u=t;et(u.$$.fragment,1,0,()=>{lt(u,1)}),Yt()}o?(t=Pt(o,a(i,l)),t.$on("routeEvent",i[7]),ut(t.$$.fragment),Z(t.$$.fragment,1),at(t,e.parentNode,e)):t=null}else if(o){const u=l&4?Ft(r,[It(i[2])]):{};t.$set(u)}},i(i){s||(t&&Z(t.$$.fragment,i),s=!0)},o(i){t&&et(t.$$.fragment,i),s=!1},d(i){i&&V(e),t&&lt(t,i)}}}function Ne(n){let t,e,s;const r=[{params:n[1]},n[2]];var o=n[0];function a(i,l){let u={};if(l!==void 0&&l&6)u=Ft(r,[l&2&&{params:i[1]},l&4&&It(i[2])]);else for(let g=0;g<r.length;g+=1)u=Vt(u,r[g]);return{props:u}}return o&&(t=Pt(o,a(n)),t.$on("routeEvent",n[6])),{c(){t&&ut(t.$$.fragment),e=jt()},m(i,l){t&&at(t,i,l),X(i,e,l),s=!0},p(i,l){if(l&1&&o!==(o=i[0])){if(t){Xt();const u=t;et(u.$$.fragment,1,0,()=>{lt(u,1)}),Yt()}o?(t=Pt(o,a(i,l)),t.$on("routeEvent",i[6]),ut(t.$$.fragment),Z(t.$$.fragment,1),at(t,e.parentNode,e)):t=null}else if(o){const u=l&6?Ft(r,[l&2&&{params:i[1]},l&4&&It(i[2])]):{};t.$set(u)}},i(i){s||(t&&Z(t.$$.fragment,i),s=!0)},o(i){t&&et(t.$$.fragment,i),s=!1},d(i){i&&V(e),t&&lt(t,i)}}}function Ge(n){let t,e,s,r;const o=[Ne,Ue],a=[];function i(l,u){return l[1]?0:1}return t=i(n),e=a[t]=o[t](n),{c(){e.c(),s=jt()},m(l,u){a[t].m(l,u),X(l,s,u),r=!0},p(l,[u]){let g=t;t=i(l),t===g?a[t].p(l,u):(Xt(),et(a[g],1,1,()=>{a[g]=null}),Yt(),e=a[t],e?e.p(l,u):(e=a[t]=o[t](l),e.c()),Z(e,1),e.m(s.parentNode,s))},i(l){r||(Z(e),r=!0)},o(l){et(e),r=!1},d(l){l&&V(s),a[t].d(l)}}}function te(){const n=window.location.href.indexOf("#/");let t=n>-1?window.location.href.substr(n+1):"/";const e=t.indexOf("?");let s="";return e>-1&&(s=t.substr(e+1),t=t.substr(0,e)),{location:t,querystring:s}}const Ht=de(null,function(t){t(te());const e=()=>{t(te())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),qe=ge(Ht,n=>n.location);ge(Ht,n=>n.querystring);const ee=$t(void 0);function ze(n,t){if(t=se(t),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return ne(n,t),{update(e){e=se(e),ne(n,e)}}}function Oe(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function ne(n,t){let e=t.href||n.getAttribute("href");if(e&&e.charAt(0)=="/")e="#"+e;else if(!e||e.length<2||e.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+e);n.setAttribute("href",e),n.addEventListener("click",s=>{s.preventDefault(),t.disabled||Ve(s.currentTarget.getAttribute("href"))})}function se(n){return n&&typeof n=="string"?{href:n}:n||{}}function Ve(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function je(n,t,e){let{routes:s={}}=t,{prefix:r=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(m,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!m||typeof m=="string"&&(m.length<1||m.charAt(0)!="/"&&m.charAt(0)!="*")||typeof m=="object"&&!(m instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:E,keys:S}=$e(m);this.path=m,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=E,this._keys=S}match(m){if(r){if(typeof r=="string")if(m.startsWith(r))m=m.substr(r.length)||"/";else return null;else if(r instanceof RegExp){const I=m.match(r);if(I&&I[0])m=m.substr(I[0].length)||"/";else return null}}const w=this._pattern.exec(m);if(w===null)return null;if(this._keys===!1)return w;const E={};let S=0;for(;S<this._keys.length;){try{E[this._keys[S]]=decodeURIComponent(w[S+1]||"")||null}catch{E[this._keys[S]]=null}S++}return E}async checkConditions(m){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](m))return!1;return!0}}const i=[];s instanceof Map?s.forEach((b,m)=>{i.push(new a(m,b))}):Object.keys(s).forEach(b=>{i.push(new a(b,s[b]))});let l=null,u=null,g={};const f=ke();async function L(b,m){await Fe(),f(b,m)}let h=null,p=null;o&&(p=b=>{b.state&&(b.state.__svelte_spa_router_scrollY||b.state.__svelte_spa_router_scrollX)?h=b.state:h=null},window.addEventListener("popstate",p),De(()=>{Oe(h)}));let y=null,v=null;const k=Ht.subscribe(async b=>{y=b;let m=0;for(;m<i.length;){const w=i[m].match(b.location);if(!w){m++;continue}const E={route:i[m].path,location:b.location,querystring:b.querystring,userData:i[m].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await i[m].checkConditions(E)){e(0,l=null),v=null,L("conditionsFailed",E);return}L("routeLoading",Object.assign({},E));const S=i[m].component;if(v!=S){S.loading?(e(0,l=S.loading),v=S,e(1,u=S.loadingParams),e(2,g={}),L("routeLoaded",Object.assign({},E,{component:l,name:l.name,params:u}))):(e(0,l=null),v=null);const I=await S();if(b!=y)return;e(0,l=I&&I.default||I),v=S}w&&typeof w=="object"&&Object.keys(w).length?e(1,u=w):e(1,u=null),e(2,g=i[m].props),L("routeLoaded",Object.assign({},E,{component:l,name:l.name,params:u})).then(()=>{ee.set(u)});return}e(0,l=null),v=null,ee.set(void 0)});Pe(()=>{k(),p&&window.removeEventListener("popstate",p)});function F(b){Jt.call(this,n,b)}function B(b){Jt.call(this,n,b)}return n.$$set=b=>{"routes"in b&&e(3,s=b.routes),"prefix"in b&&e(4,r=b.prefix),"restoreScrollState"in b&&e(5,o=b.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[l,u,g,s,r,o,F,B]}class Xe extends gt{constructor(t){super(),dt(this,t,je,Ge,_t,{routes:3,prefix:4,restoreScrollState:5})}}function Ye(n){let t;return{c(){t=Lt("Nothing to see here. Go to Engine or Shader Art.")},m(e,s){X(e,t,s)},p:G,i:G,o:G,d(e){e&&V(t)}}}class He extends gt{constructor(t){super(),dt(this,t,null,Ye,_t,{})}}const We=`#version 300 es

layout(location = 0) in vec2 aPosition;
out vec2 fragCoord;

void main()
{
    fragCoord = aPosition;
    gl_Position = vec4(aPosition, 0.0, 1.0);
}
`,Ze=`#version 300 es

precision mediump float;

in vec2 fragCoord;
uniform float uTime;
uniform float uDensity;

out vec4 fragColor;

//https://iquilezles.org/articles/palettes/
vec3 palette( float t ) {
    vec3 a = vec3(0.5, 0.5, 0.5);
    vec3 b = vec3(0.5, 0.5, 0.5);
    vec3 c = vec3(1.0, 1.0, 1.0);
    vec3 d = vec3(0.263,0.416,0.557);

    return a + b*cos( 6.28318*(c*t+d) );
}

void main()
{
    vec2 uv = fragCoord;
    float d = length(uv);

    vec2 uv0 = uv;
    vec3 finalColor = vec3(0.0);

    for (float i = 0.0; i < 4.0; i++) {
        uv = fract(uv * uDensity / 10.0) - 0.5;

        float d = length(uv) * exp(-length(uv0));

        vec3 col = palette(length(uv0) + i*.4 + uTime*.4);

        d = sin(d * 8. + uTime)/8.;
        d = abs(d);

        d = pow(0.01 / d, 1.2);

        finalColor += col * d;
    }

    fragColor = vec4(finalColor, 1.0);
}
`,Rt=$t(15),Dt=$t(1e3);function Ke(n){let t,e,s,r,o;return{c(){t=A("input"),e=R(),s=A("input"),c(t,"type","number"),c(t,"min","100"),c(t,"max","3000"),c(s,"id",n[0]),c(s,"type","range"),c(s,"min","100"),c(s,"max","3000")},m(a,i){X(a,t,i),N(t,n[1]),X(a,e,i),X(a,s,i),N(s,n[1]),r||(o=[Q(t,"input",n[2]),Q(s,"change",n[3]),Q(s,"input",n[3])],r=!0)},p(a,[i]){i&2&&O(t.value)!==a[1]&&N(t,a[1]),i&1&&c(s,"id",a[0]),i&2&&N(s,a[1])},i:G,o:G,d(a){a&&(V(t),V(e),V(s)),r=!1,ht(o)}}}function Je(n,t,e){let s;Et(n,Dt,i=>e(1,s=i));let{id:r="speed-slider"}=t;function o(){s=O(this.value),Dt.set(s)}function a(){s=O(this.value),Dt.set(s)}return n.$$set=i=>{"id"in i&&e(0,r=i.id)},[r,s,o,a]}class Qe extends gt{constructor(t){super(),dt(this,t,Je,Ke,_t,{id:0})}}function tn(n){let t,e,s,r,o;return{c(){t=A("input"),e=R(),s=A("input"),c(t,"type","number"),c(t,"min","1"),c(t,"max","30"),c(s,"id",n[0]),c(s,"type","range"),c(s,"min","1"),c(s,"max","30")},m(a,i){X(a,t,i),N(t,n[1]),X(a,e,i),X(a,s,i),N(s,n[1]),r||(o=[Q(t,"input",n[2]),Q(s,"change",n[3]),Q(s,"input",n[3])],r=!0)},p(a,[i]){i&2&&O(t.value)!==a[1]&&N(t,a[1]),i&1&&c(s,"id",a[0]),i&2&&N(s,a[1])},i:G,o:G,d(a){a&&(V(t),V(e),V(s)),r=!1,ht(o)}}}function en(n,t,e){let s;Et(n,Rt,i=>e(1,s=i));let{id:r="density-slider"}=t;function o(){s=O(this.value),Rt.set(s)}function a(){s=O(this.value),Rt.set(s)}return n.$$set=i=>{"id"in i&&e(0,r=i.id)},[r,s,o,a]}class nn extends gt{constructor(t){super(),dt(this,t,en,tn,_t,{id:0})}}function sn(n){let t,e,s,r,o,a,i,l,u,g,f,L,h,p;return o=new Qe({props:{id:"speed-slider"}}),u=new nn({props:{id:"density-slider"}}),{c(){t=A("div"),e=A("div"),s=A("label"),s.textContent="Speed",r=R(),ut(o.$$.fragment),a=R(),i=A("label"),i.textContent="Density",l=R(),ut(u.$$.fragment),g=R(),f=A("canvas"),L=R(),h=A("div"),h.innerHTML='<a href="https://www.youtube.com/watch?v=f4s1h2YETNY&amp;t=583s">Shader code by kishimisu</a>',c(s,"for","speed-slider"),c(i,"for","speed-slider"),c(e,"class","toolbar"),c(f,"class","svelte-syf6pw"),c(t,"class","shaderArt svelte-syf6pw")},m(y,v){X(y,t,v),d(t,e),d(e,s),d(e,r),at(o,e,null),d(e,a),d(e,i),d(e,l),at(u,e,null),d(t,g),d(t,f),n[1](f),d(t,L),d(t,h),p=!0},p:G,i(y){p||(Z(o.$$.fragment,y),Z(u.$$.fragment,y),p=!0)},o(y){et(o.$$.fragment,y),et(u.$$.fragment,y),p=!1},d(y){y&&V(t),lt(o),lt(u),n[1](null)}}}function rn(n,t,e){let s,r;Et(n,Dt,i=>e(2,s=i)),Et(n,Rt,i=>e(3,r=i));let o;ce(()=>{const i=o.getContext("webgl2");if(!i)return;const l=i.createProgram();if(!l)return;const u=i.createShader(i.VERTEX_SHADER);if(!u)return;i.shaderSource(u,We),i.compileShader(u),i.attachShader(l,u);const g=i.createShader(i.FRAGMENT_SHADER);if(!g)return;i.shaderSource(g,Ze),i.compileShader(g),i.attachShader(l,g),i.linkProgram(l),i.getProgramParameter(l,i.LINK_STATUS)||(console.log(i.getShaderInfoLog(u)),console.log(i.getShaderInfoLog(g)));const f=new Float32Array([-1,-1,1,-1,-1,1,1,-1,-1,1,1,1]),L=i.getUniformLocation(l,"uResolution");i.uniform2f(L,1024,1024);const h=i.getUniformLocation(l,"uTime");i.uniform1f(h,0);const p=i.getUniformLocation(l,"uDensity");i.uniform1f(p,15);const y=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,y),i.bufferData(i.ARRAY_BUFFER,f,i.STATIC_DRAW);const v=0;i.enableVertexAttribArray(v),i.vertexAttribPointer(v,2,i.FLOAT,!1,2*4,0);const k=(F=0)=>{(o.width!==o.clientWidth||o.height!==o.clientHeight)&&(e(0,o.width=o.clientWidth,o),e(0,o.height=o.clientHeight,o),i.viewport(0,0,i.canvas.width,i.canvas.height)),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.uniform1f(p,r),i.uniform1f(h,F/1e6*s),i.useProgram(l),i.drawArrays(i.TRIANGLES,0,6),requestAnimationFrame(k)};k()});function a(i){kt[i?"unshift":"push"](()=>{o=i,e(0,o)})}return[o,a]}class on extends gt{constructor(t){super(),dt(this,t,rn,sn,_t,{})}}function an(n){let t,e,s,r;const o=n[3].default,a=Ae(o,n,n[2],null);return{c(){t=A("a"),a&&a.c(),c(t,"href",n[0]),c(t,"class","svelte-1dzzut9"),Kt(t,"active",n[1]===n[0])},m(i,l){X(i,t,l),a&&a.m(t,null),e=!0,s||(r=Se(ze.call(null,t)),s=!0)},p(i,[l]){a&&a.p&&(!e||l&4)&&xe(a,o,i,i[2],e?Le(o,i[2],l,null):Ee(i[2]),null),(!e||l&1)&&c(t,"href",i[0]),(!e||l&3)&&Kt(t,"active",i[1]===i[0])},i(i){e||(Z(a,i),e=!0)},o(i){et(a,i),e=!1},d(i){i&&V(t),a&&a.d(i),s=!1,r()}}}function ln(n,t,e){let s;Et(n,qe,i=>e(1,s=i));let{$$slots:r={},$$scope:o}=t,{href:a=""}=t;return n.$$set=i=>{"href"in i&&e(0,a=i.href),"$$scope"in i&&e(2,o=i.$$scope)},[a,s,o,r]}class Nt extends gt{constructor(t){super(),dt(this,t,ln,an,_t,{href:0})}}const un=`#version 300 es

// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;

uniform mat4 u_worldViewProjection;
uniform mat4 u_worldInverseTranspose;

out vec2 v_texcoord;
out vec3 v_normal;
out vec3 v_position;

void main() {
  // Multiply the position by the matrix.
  gl_Position = u_worldViewProjection * a_position;

  v_position = gl_Position.xyz;

  // Pass the texcoord to the fragment shader.
  v_texcoord = a_texcoord;

  // Pass the normal to the fragment shader
  v_normal = mat3(u_worldInverseTranspose) * a_normal;
}
`,cn=`#version 300 es
# define MIN_LIGHT_STRENGTH 0.1

precision highp float;

// Passed in and varied from the vertex shader.
in vec2 v_texcoord;
in vec3 v_normal;
in vec3 v_position;

uniform sampler2D u_texture;

struct DLight {
  vec4 direction;
  vec4 color;
};

struct PLight {
  vec4 position;
  vec4 color;
};
layout(std140) uniform DirectionalLight {
  DLight lights[10];
} directionalLights;

layout(std140) uniform PointLight {
  PLight lights[10];
} pointLights;

out vec4 outColor;

void main() {
  outColor = texture(u_texture, v_texcoord);
  vec3 normal = normalize(v_normal);

  for (int i = 0; i < 10; i++) {
    DLight light = directionalLights.lights[i];

    if (light.color != vec4(0.0)) {
      float lightIntensity = max(dot(normal, light.direction.xyz), MIN_LIGHT_STRENGTH);
      outColor.rgb *= light.color.rgb * lightIntensity;
    }
  }

  for (int i = 0; i < 10; i++) {
    PLight light = pointLights.lights[i];

    if (light.color != vec4(0.0)) {
      vec3 surfaceToLightDirection = normalize(light.position.xyz - v_position);
      float lightIntensity = max(dot(normal, surfaceToLightDirection), 0.2);
      outColor.rgb *= light.color.rgb * lightIntensity;
    }
  }
}
`;class fn{constructor(t){_(this,"_gl",null);_(this,"_canvas");_(this,"_width");_(this,"_height");this._width=t.width,this._height=t.height,this._canvas=t,this.updateGL(),this.updateViewPort()}set canvas(t){this._canvas=t,this.updateGL(),this.updateViewPort()}updateGL(){const t=this._canvas.getContext("webgl2");if(!t)throw`Could not get webgl2 context of canvas element: ${this._canvas}`;this._gl=t}updateViewPort(){if(!this._gl)throw"Could not update viewport.";this._gl.viewport(0,0,this._gl.canvas.width,this._gl.canvas.height)}linkProgram(t){if(!this._gl)throw"Could not link program.";this._gl.linkProgram(t.webGLProgram),this._gl.getProgramParameter(t.webGLProgram,this._gl.LINK_STATUS)||(t.vertexShader&&console.log(this._gl.getShaderInfoLog(t.vertexShader.webGLShader)),t.fragmentShader&&console.log(this._gl.getShaderInfoLog(t.fragmentShader.webGLShader)))}get width(){return this._width}get height(){return this._height}get gl(){return this._gl}}class pe{constructor({gl:t,source:e}){_(this,"_gl");_(this,"_webGLShader");_(this,"source",null);this._gl=t,this._webGLShader=this.create(),e&&(this._gl.shaderSource(this._webGLShader,e),this._gl.compileShader(this._webGLShader))}get webGLShader(){return this._webGLShader}}class me extends pe{constructor({gl:t,source:e}){super({gl:t,source:e})}create(){const t=this._gl.createShader(this._gl.VERTEX_SHADER);if(!t)throw"Could not create VertexShader";return t}updateSource(t){}}class ve extends pe{constructor({gl:t,source:e}){super({gl:t,source:e})}create(){const t=this._gl.createShader(this._gl.FRAGMENT_SHADER);if(!t)throw"Could not create FragmentShader";return t}updateSource(t){}}class hn{constructor(t){_(this,"_gl");_(this,"_webGLProgram");_(this,"_vertexShader",null);_(this,"_fragmentShader",null);this._gl=t;const e=t.createProgram();if(!e)throw"Could not create program";this._webGLProgram=e}attachShader(t){this._gl.attachShader(this._webGLProgram,t.webGLShader),t instanceof me&&(this._vertexShader=t),t instanceof ve&&(this._fragmentShader=t)}getUniformLocation(t){return this._gl.getUniformLocation(this._webGLProgram,t)}get webGLProgram(){return this._webGLProgram}get vertexShader(){return this._vertexShader}get fragmentShader(){return this._fragmentShader}}class vt{constructor(t){_(this,"_values");this._values=this.create(t)}static substract(t,e){if(t.is1D(t)&&e.is1D(e))return new _n([t._values[0]-e._values[0]]);if(t.is2D(t)&&e.is2D(e))return new dn([t._values[0]-e._values[0],t._values[1]-e._values[1]]);if(t.is3D(t)&&e.is3D(e))return new tt([t._values[0]-e._values[0],t._values[1]-e._values[1],t._values[2]-e._values[2]]);if(t.is4D(t)&&e.is4D(e))return new Mt([t._values[0]-e._values[0],t._values[1]-e._values[1],t._values[2]-e._values[2],t._values[3]-e._values[3]]);throw new Error("Vectors must have the same dimension to subtract.")}static dot(t,e){return t._values.reduce((s,r,o)=>s+r*e._values[o],0)}get values(){return this._values}set values(t){this._values=t}is1D(t){return t.values.length===1}is2D(t){return t.values.length===2}is3D(t){return t.values.length===3}is4D(t){return t.values.length===4}normalize(){const t=Math.sqrt(this._values.reduce((s,r)=>s+r*r,0)),e=this._values.map(s=>s/t);return this._values=e,this}toNormalized(){const t=Math.sqrt(this._values.reduce((r,o)=>r+o*o,0)),e=this._values.map(r=>r/t),s=this.constructor;return new s(e)}}class _n extends vt{create(t){return t||[1]}}class dn extends vt{create(t){return t||[1,1]}}class tt extends vt{create(t){return t||[1,1,1]}static cross(t,e){const s=[t._values[1]*e._values[2]-t._values[2]*e._values[1],t._values[2]*e._values[0]-t._values[0]*e._values[2],t._values[0]*e._values[1]-t._values[1]*e._values[0]];return new tt(s)}}class Mt extends vt{create(t){return t||[1,1,1,1]}}class zt{constructor(t){_(this,"_values");this._values=this.create(t)}transpose(){const t=Math.sqrt(this._values.length),e=Array.from({length:this._values.length},(s,r)=>{const o=Math.floor(r/t),a=r%t;return this._values[a*t+o]});return this._values=e,this}get values(){return this._values}set values(t){this._values=t}}const D=class D extends zt{static multiply(t,e){const[s,r,o,a,i,l,u,g,f,L,h,p,y,v,k,F]=t.values,[B,b,m,w,E,S,I,z,Y,W,M,x,P,$,q,T]=e.values;return new D([s*B+r*E+o*Y+a*P,s*b+r*S+o*W+a*$,s*m+r*I+o*M+a*q,s*w+r*z+o*x+a*T,i*B+l*E+u*Y+g*P,i*b+l*S+u*W+g*$,i*m+l*I+u*M+g*q,i*w+l*z+u*x+g*T,f*B+L*E+h*Y+p*P,f*b+L*S+h*W+p*$,f*m+L*I+h*M+p*q,f*w+L*z+h*x+p*T,y*B+v*E+k*Y+F*P,y*b+v*S+k*W+F*$,y*m+v*I+k*M+F*q,y*w+v*z+k*x+F*T])}static translation(t,e,s){return new D([1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1])}static xRotation(t){const e=Math.cos(t),s=Math.sin(t);return new D([1,0,0,0,0,e,s,0,0,-s,e,0,0,0,0,1])}static yRotation(t){const e=Math.cos(t),s=Math.sin(t);return new D([e,0,-s,0,0,1,0,0,s,0,e,0,0,0,0,1])}static zRotation(t){const e=Math.cos(t),s=Math.sin(t);return new D([e,s,0,0,-s,e,0,0,0,0,1,0,0,0,0,1])}static scaling(t,e,s){return new D([t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1])}static perspective(t,e,s,r){const o=Math.tan(Math.PI*.5-.5*t),a=1/(s-r);return new D([o/e,0,0,0,0,o,0,0,0,0,(s+r)*a,-1,0,0,s*r*a*2,0])}static orthographic(t,e,s,r,o,a){return new D([2/(e-t),0,0,0,0,2/(r-s),0,0,0,0,2/(o-a),0,(t+e)/(t-e),(s+r)/(s-r),(o+a)/(o-a),1])}static projection(t,e,s){return new D([2/t,0,0,0,0,-2/e,0,0,0,0,2/s,0,-1,1,0,1])}static lookAt(t,e,s=new tt([0,1,0])){var r=vt.substract(t,e).normalize(),o=tt.cross(s,r).normalize(),a=tt.cross(r,o).normalize();return new D([o.values[0],o.values[1],o.values[2],0,a.values[0],a.values[1],a.values[2],0,r.values[0],r.values[1],r.values[2],0,t.values[0],t.values[1],t.values[2],1])}create(t){return t||D.identity}translate(t,e,s){return D.multiply(this,D.translation(t,e,s))}rotateX(t){return D.multiply(this,D.xRotation(t))}rotateY(t){return D.multiply(this,D.yRotation(t))}rotateZ(t){return D.multiply(this,D.zRotation(t))}scale(t,e,s){return D.multiply(this,D.scaling(t,e,s))}invert(){const[t,e,s,r,o,a,i,l,u,g,f,L,h,p,y,v]=this.values,k=f*v,F=y*L,B=i*v,b=y*l,m=i*L,w=f*l,E=s*v,S=y*r,I=s*L,z=f*r,Y=s*l,W=i*r,M=u*p,x=h*g,P=o*p,$=h*a,q=o*g,T=u*a,K=t*p,H=h*e,J=t*g,it=u*e,U=t*a,nt=o*e,st=k*a+b*g+m*p-(F*a+B*g+w*p),ct=F*e+E*g+z*p-(k*e+S*g+I*p),pt=B*e+S*a+Y*p-(b*e+E*a+W*p),rt=w*e+I*a+W*g-(m*e+z*a+Y*g),C=1/(t*st+o*ct+u*pt+h*rt);return new D([C*st,C*ct,C*pt,C*rt,C*(F*o+B*u+w*h-(k*o+b*u+m*h)),C*(k*t+S*u+I*h-(F*t+E*u+z*h)),C*(b*t+E*o+W*h-(B*t+S*o+Y*h)),C*(m*t+z*o+Y*u-(w*t+I*o+W*u)),C*(M*l+$*L+q*v-(x*l+P*L+T*v)),C*(x*r+K*L+it*v-(M*r+H*L+J*v)),C*(P*r+H*l+U*v-($*r+K*l+nt*v)),C*(T*r+J*l+nt*L-(q*r+it*l+U*L)),C*(P*f+T*y+x*i-(q*y+M*i+$*f)),C*(J*y+M*s+H*f-(K*f+it*y+x*s)),C*(K*i+nt*y+$*s-(U*y+P*s+H*i)),C*(U*f+q*s+it*i-(J*i+nt*f+T*s))])}transformVector(t){const e=this.values,s=[];for(let r=0;r<4;++r){s[r]=0;for(let o=0;o<4;++o)s[r]+=t.values[o]*e[o*4+r]}return new Mt(s)}};_(D,"identity",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);let ot=D;class ie{constructor({gl:t,type:e,name:s,program:r,value:o}){_(this,"_gl");_(this,"_value",null);_(this,"_type");_(this,"_name");_(this,"_program",null);this._gl=t,this._name=s,this._type=e,r&&(this._program=r),o!==void 0&&(o instanceof zt||o instanceof vt?this.value=o.values:this.value=o)}get value(){return this._value}set value(t){t instanceof zt||t instanceof vt?this._value=t.values:this._value=t;const e=this.getLocation();if(Array.isArray(t))switch(this._type){case"2f":this._gl.uniform2f(e,t[0],t[1]);break;case"2i":this._gl.uniform2i(e,t[0],t[1]);break;case"3f":this._gl.uniform3f(e,t[0],t[1],t[2]);break;case"3i":this._gl.uniform3i(e,t[0],t[1],t[2]);break;case"4f":this._gl.uniform4f(e,t[0],t[1],t[2],t[3]);break;case"4i":this._gl.uniform4i(e,t[0],t[1],t[2],t[3]);break;case"matrix2fv":this._gl.uniformMatrix2fv(e,!1,t);break;case"matrix3fv":this._gl.uniformMatrix3fv(e,!1,t);break;case"matrix4fv":this._gl.uniformMatrix4fv(e,!1,t);break;case"2fv":this._gl.uniform2fv(e,t);break;case"3fv":this._gl.uniform3fv(e,t);break;case"4fv":this._gl.uniform4fv(e,t);break;default:throw`Invalid value ${t} for type ${this._type}`}else switch(this._type){case"1f":this._gl.uniform1f(e,t);break;case"1i":this._gl.uniform1i(e,t);break;default:throw`Invalid value ${t} for type ${this._type}`}}getLocation(){if(!this._program)throw"Could not get location of uniform. No program attached.";return this._gl.getUniformLocation(this._program.webGLProgram,this._name)}}const gn=new Float32Array([0,150,0,0,0,0,30,150,0,0,0,0,30,0,0,30,150,0,30,150,0,30,120,0,100,150,0,30,120,0,100,120,0,100,150,0,30,90,0,30,60,0,67,90,0,30,60,0,67,60,0,67,90,0,0,150,-30,30,150,-30,0,0,-30,0,0,-30,30,150,-30,30,0,-30,30,150,-30,100,150,-30,30,120,-30,30,120,-30,100,150,-30,100,120,-30,30,90,-30,67,90,-30,30,60,-30,30,60,-30,67,90,-30,67,60,-30,0,150,0,100,150,0,100,150,-30,0,150,0,100,150,-30,0,150,-30,100,150,0,100,120,0,100,120,-30,100,150,0,100,120,-30,100,150,-30,30,120,0,30,120,-30,100,120,-30,30,120,0,100,120,-30,100,120,0,30,120,0,30,90,-30,30,120,-30,30,120,0,30,90,0,30,90,-30,30,90,0,67,90,-30,30,90,-30,30,90,0,67,90,0,67,90,-30,67,90,0,67,60,-30,67,90,-30,67,90,0,67,60,0,67,60,-30,30,60,0,30,60,-30,67,60,-30,30,60,0,67,60,-30,67,60,0,30,60,0,30,0,-30,30,60,-30,30,60,0,30,0,0,30,0,-30,0,0,0,0,0,-30,30,0,-30,0,0,0,30,0,-30,30,0,0,0,150,0,0,150,-30,0,0,-30,0,150,0,0,0,-30,0,0,0]),pn=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),mn=new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]);function vn(n){return n*(Math.PI/180)}class Ot{constructor({gl:t,name:e,program:s,pointerProperties:r,createVao:o}){_(this,"_gl");_(this,"_buffer");_(this,"_name");_(this,"_program",null);_(this,"_vao",null);_(this,"_pointerProperties");_(this,"_createVao");this._gl=t,this._name=e,s&&(this._program=s),this._createVao=o||!1;const a=t.createBuffer();if(!a)throw"Could not create buffer";this._pointerProperties={normalize:!1,stride:0,offset:0,...r},this._buffer=a}get name(){return this._name}get buffer(){return this._buffer}get vao(){if(!this._vao)throw"Could not get vao of attribute. Was the data set already?";return this._vao}getLocation(){if(!this._program)throw"Could not get location of attribute. No program attached.";return this._gl.getAttribLocation(this._program.webGLProgram,this._name)}setBufferData(t){this._createVao&&(this._vao=this._gl.createVertexArray(),this._gl.bindVertexArray(this._vao)),this._gl.enableVertexAttribArray(this.getLocation()),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.STATIC_DRAW);const{size:e,type:s,normalize:r,stride:o,offset:a}=this._pointerProperties;this._gl.vertexAttribPointer(this.getLocation(),e,s,r,o,a)}getBufferData(){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer);const t=this._gl.getBufferParameter(this._gl.ARRAY_BUFFER,this._gl.BUFFER_SIZE),e=new Float32Array(t/Float32Array.BYTES_PER_ELEMENT);return this._gl.getBufferSubData(this._gl.ARRAY_BUFFER,0,e),e}getPointerProperties(){return this._pointerProperties}}class re{constructor({coordinates:t,normals:e,texture:s,gl:r,program:o}){_(this,"_gl");_(this,"_positionAttribute");_(this,"_normalsAttribute");_(this,"_texture");_(this,"_coordinates");_(this,"_normals");this._coordinates=t,this._normals=e,this._gl=r,this._positionAttribute=new Ot({gl:r,name:"a_position",program:o,createVao:!0,pointerProperties:{size:3,type:r.FLOAT}}),t&&this._positionAttribute.setBufferData(t),this._normalsAttribute=new Ot({gl:r,name:"a_normal",program:o,pointerProperties:{size:3,type:r.FLOAT}}),e&&this._normalsAttribute.setBufferData(e),s&&(this._texture=s)}get coordinates(){return this._coordinates}transform(t){if(!this._coordinates||!this._positionAttribute)return;const e=this._positionAttribute.getPointerProperties().size;for(var s=0;s<this._coordinates.length;s+=e){var r=t.transformVector(new Mt([this._coordinates[s+0],this._coordinates[s+1],this._coordinates[s+2],1]));this._coordinates[s+0]=r.values[0],this._coordinates[s+1]=r.values[1],this._coordinates[s+2]=r.values[2]}if(this._positionAttribute.setBufferData(this._coordinates),!this._normals||!this._normalsAttribute)return;const o=this._positionAttribute.getPointerProperties().size;for(var s=0;s<this._normals.length;s+=o){var r=t.transformVector(new Mt([this._normals[s+0],this._normals[s+1],this._normals[s+2],1]));this._normals[s+0]=r.values[0],this._normals[s+1]=r.values[1],this._normals[s+2]=r.values[2]}this._normalsAttribute.setBufferData(this._normals)}draw(){if(!this._positionAttribute){console.log("No position attribute");return}if(!this._coordinates){console.log("No coordinates passed");return}this._texture&&this._texture.bind(),this._gl.bindVertexArray(this._positionAttribute.vao);const t=this._gl.TRIANGLES,e=0,s=this._coordinates.length/this._positionAttribute.getPointerProperties().size;this._gl.drawArrays(t,e,s),this._texture&&this._texture.draw()}}class oe{constructor({gl:t,program:e,src:s,coordinates:r,wrapS:o,wrapT:a,minFilter:i=t.LINEAR_MIPMAP_LINEAR,magFilter:l=t.LINEAR}){_(this,"_gl");_(this,"_program");_(this,"_image");_(this,"_webGlTexture");_(this,"_coordinatesAttribute");_(this,"_coordinates");this._gl=t,this._program=e,this._coordinates=r,this._coordinatesAttribute=new Ot({gl:t,name:"a_texcoord",program:e,pointerProperties:{size:2,normalize:!0,type:t.FLOAT}}),this._webGlTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._webGlTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this._image=new Image,this._image.src=s,this._image.addEventListener("load",()=>{t.bindTexture(t.TEXTURE_2D,this._webGlTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,l),o&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),a&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.generateMipmap(t.TEXTURE_2D)})}bind(){this._gl.bindTexture(this._gl.TEXTURE_2D,this._webGlTexture)}draw(){this._coordinates&&this._coordinatesAttribute&&this._coordinatesAttribute.setBufferData(this._coordinates)}}class bn{constructor({color:t,direction:e}){_(this,"_color");_(this,"_direction");_(this,"_index",-1);_(this,"_lightManager");this._color=t,this._direction=e}get color(){return this._color}get direction(){return this._direction}set direction(t){if(this._direction=t,!this._lightManager){console.log("Can't set direction before adding it to LightManager");return}this._lightManager.setDirectionalLightDirection(this.index,t)}set color(t){if(this._color=t,!this._lightManager){console.log("Can't set color before adding it to LightManager");return}this._lightManager.setDirectionalLightColor(this.index,t)}get index(){return this._index}set index(t){this._index=t}set lightManager(t){this._lightManager=t}}class wn{constructor({gl:t,program:e,maxLights:s=10}){_(this,"_DATA_SIZE",8);_(this,"_maxLights",10);_(this,"_directionalLights",[]);_(this,"_directionalLightBuffer");_(this,"_directionalLightArray");_(this,"_pointLights",[]);_(this,"_pointLightBuffer");_(this,"_pointLightArray");_(this,"_gl");_(this,"_program");this._gl=t,this._program=e,this._maxLights=s,this._directionalLightBuffer=t.createBuffer(),this._directionalLightArray=new Float32Array(this._maxLights*this._DATA_SIZE),this._pointLightBuffer=t.createBuffer(),this._pointLightArray=new Float32Array(this._maxLights*this._DATA_SIZE)}get gl(){return this._gl}get directionalLights(){return this._directionalLights}addDirectionalLight(t){const e=this._gl,s=this._program.webGLProgram;this._directionalLights.push(t),t.index=this._directionalLights.length-1,t.lightManager=this,this._directionalLightArray.set(t.direction.values,t.index*this._DATA_SIZE),this._directionalLightArray.set([0],t.index*this._DATA_SIZE+3),this._directionalLightArray.set(t.color.values,t.index*this._DATA_SIZE+4),e.bindBufferBase(e.UNIFORM_BUFFER,0,this._directionalLightBuffer),e.bufferData(e.UNIFORM_BUFFER,this._directionalLightArray,e.STATIC_DRAW);const r=e.getUniformBlockIndex(s,"DirectionalLight");e.uniformBlockBinding(s,r,0)}setDirectionalLightColor(t,e){const s=this._gl;this._directionalLightArray.set(e.values,t*this._DATA_SIZE+4),s.bufferData(s.UNIFORM_BUFFER,this._directionalLightArray,s.STATIC_DRAW)}setDirectionalLightDirection(t,e){const s=this._gl;this._directionalLightArray.set(e.values,t*this._DATA_SIZE),s.bufferData(s.UNIFORM_BUFFER,this._directionalLightArray,s.STATIC_DRAW)}removeDirectionalLight(t){this._directionalLights.splice(t.index,1)}addPointLight(t){const e=this._gl,s=this._program.webGLProgram;this._pointLights.push(t),t.index=this._pointLights.length-1,t.lightManager=this,this._pointLightArray.set(t.position.values,t.index*this._DATA_SIZE),this._pointLightArray.set([1],t.index*this._DATA_SIZE+3),this._pointLightArray.set(t.color.values,t.index*this._DATA_SIZE+4),e.bindBufferBase(e.UNIFORM_BUFFER,1,this._pointLightBuffer),e.bufferData(e.UNIFORM_BUFFER,this._pointLightArray,e.STATIC_DRAW);const r=e.getUniformBlockIndex(s,"PointLight");e.uniformBlockBinding(s,r,1)}setPointLightColor(t,e){const s=this._gl;this._pointLightArray.set(e.values,t*this._DATA_SIZE+4),s.bufferData(s.UNIFORM_BUFFER,this._pointLightArray,s.STATIC_DRAW)}setPointLightPosition(t,e){const s=this._gl;this._pointLightArray.set(e.values,t*this._DATA_SIZE),s.bufferData(s.UNIFORM_BUFFER,this._pointLightArray,s.STATIC_DRAW)}removePointLight(t){this._pointLights.splice(t.index,1)}}class yn{constructor({color:t,position:e}){_(this,"_color");_(this,"_position");_(this,"_index",-1);_(this,"_lightManager");this._color=t,this._position=e}get color(){return this._color}get position(){return this._position}set position(t){if(this._position=t,!this._lightManager){console.log("Can't set position before adding it to LightManager");return}this._lightManager.setPointLightPosition(this.index,t)}set color(t){if(this._color=t,!this._lightManager){console.log("Can't set color before adding it to LightManager");return}this._lightManager.setPointLightColor(this.index,t)}get index(){return this._index}set index(t){this._index=t}set lightManager(t){this._lightManager=t}}function An(n){let t,e,s,r,o,a,i,l,u,g,f,L,h,p,y,v,k,F,B,b,m,w,E,S,I,z,Y,W,M,x,P,$,q,T,K,H,J,it,U,nt,st,ct,pt,rt,C,Wt;return{c(){t=A("div"),e=A("canvas"),s=R(),r=A("div"),o=A("div"),a=A("span"),a.innerHTML='<span class=".label">Positon:</span>',i=R(),l=A("span"),u=A("span"),u.textContent="x",g=R(),f=A("input"),L=R(),h=A("span"),p=A("span"),p.textContent="y",y=R(),v=A("input"),k=R(),F=A("span"),B=A("span"),B.textContent="z",b=R(),m=A("input"),w=R(),E=A("div"),S=A("span"),S.innerHTML='<span class="label svelte-1pqx7i0">Rotation:</span>',I=R(),z=A("span"),Y=A("span"),Y.textContent="x",W=R(),M=A("input"),x=R(),P=A("span"),$=A("span"),$.textContent="y",q=R(),T=A("input"),K=R(),H=A("span"),J=A("span"),J.textContent="z",it=R(),U=A("input"),nt=R(),st=A("span"),ct=A("span"),ct.textContent="Focus F",pt=R(),rt=A("input"),c(e,"class","svelte-1pqx7i0"),c(a,"class","field svelte-1pqx7i0"),c(u,"class","label svelte-1pqx7i0"),c(f,"type","number"),c(f,"class","svelte-1pqx7i0"),c(l,"class","field svelte-1pqx7i0"),c(p,"class","label svelte-1pqx7i0"),c(v,"type","number"),c(v,"min",-1e3),c(v,"max",1e3),c(v,"class","svelte-1pqx7i0"),c(h,"class","field svelte-1pqx7i0"),c(B,"class","label svelte-1pqx7i0"),c(m,"type","number"),c(m,"min",-1e3),c(m,"max",1e3),c(m,"class","svelte-1pqx7i0"),c(F,"class","field svelte-1pqx7i0"),c(o,"class","control svelte-1pqx7i0"),c(S,"class","field svelte-1pqx7i0"),c(Y,"class","label svelte-1pqx7i0"),c(M,"type","number"),c(M,"step",15),c(M,"min",-360),c(M,"max",360),c(M,"class","svelte-1pqx7i0"),c(z,"class","field svelte-1pqx7i0"),c($,"class","label svelte-1pqx7i0"),c(T,"type","number"),c(T,"step",15),c(T,"min",-360),c(T,"max",360),c(T,"class","svelte-1pqx7i0"),c(P,"class","field svelte-1pqx7i0"),c(J,"class","label svelte-1pqx7i0"),c(U,"type","number"),c(U,"step",15),c(U,"min",-360),c(U,"max",360),c(U,"class","svelte-1pqx7i0"),c(H,"class","field svelte-1pqx7i0"),c(ct,"class","label svelte-1pqx7i0"),c(rt,"type","checkbox"),c(st,"class","field svelte-1pqx7i0"),c(E,"class","control svelte-1pqx7i0"),c(r,"class","controls svelte-1pqx7i0"),c(t,"class","engine svelte-1pqx7i0")},m(j,ft){X(j,t,ft),d(t,e),n[4](e),d(t,s),d(t,r),d(r,o),d(o,a),d(o,i),d(o,l),d(l,u),d(l,g),d(l,f),N(f,n[2].values[0]),d(o,L),d(o,h),d(h,p),d(h,y),d(h,v),N(v,n[2].values[1]),d(o,k),d(o,F),d(F,B),d(F,b),d(F,m),N(m,n[2].values[2]),d(r,w),d(r,E),d(E,S),d(E,I),d(E,z),d(z,Y),d(z,W),d(z,M),N(M,n[3].values[0]),d(E,x),d(E,P),d(P,$),d(P,q),d(P,T),N(T,n[3].values[1]),d(E,K),d(E,H),d(H,J),d(H,it),d(H,U),N(U,n[3].values[2]),d(E,nt),d(E,st),d(st,ct),d(st,pt),d(st,rt),rt.checked=n[0],C||(Wt=[Q(f,"input",n[5]),Q(v,"input",n[6]),Q(m,"input",n[7]),Q(M,"input",n[8]),Q(T,"input",n[9]),Q(U,"input",n[10]),Q(rt,"change",n[11])],C=!0)},p(j,[ft]){ft&4&&O(f.value)!==j[2].values[0]&&N(f,j[2].values[0]),ft&4&&O(v.value)!==j[2].values[1]&&N(v,j[2].values[1]),ft&4&&O(m.value)!==j[2].values[2]&&N(m,j[2].values[2]),ft&8&&O(M.value)!==j[3].values[0]&&N(M,j[3].values[0]),ft&8&&O(T.value)!==j[3].values[1]&&N(T,j[3].values[1]),ft&8&&O(U.value)!==j[3].values[2]&&N(U,j[3].values[2]),ft&1&&(rt.checked=j[0])},i:G,o:G,d(j){j&&V(t),n[4](null),C=!1,ht(Wt)}}}function Ln(n,t,e){let s=!1,r,o=new tt([0,100,400]),a=new tt([0,0,0]),i,l=[],u,g,f,L=!1,h=[0,0],p="rotate",y=[0,0,0],v;const k=x=>{const P=x instanceof TouchEvent;L=!0,P?(p="rotate",h=[x.touches[0].clientX,x.touches[0].clientY]):(p="rotate",h=[x.clientX,x.clientY]),y=a.values,o.values},F=()=>{L=!1,p="rotate"},B=x=>{const P=x instanceof TouchEvent;if(!L)return;const $=P?x.touches[0].clientX:x.clientX,q=P?x.touches[0].clientY:x.clientY,T=h[0]-$,K=h[1]-q;p==="rotate"&&(e(3,a.values[0]=y[0]-K,a),e(3,a.values[2]=y[1]-T,a))},b=x=>{x.key==="w"?e(2,o.values[2]-=10,o):x.key==="s"?e(2,o.values[2]+=10,o):x.key==="a"?e(2,o.values[0]-=10,o):x.key==="d"&&e(2,o.values[0]+=10,o)};ce(()=>{const x=new fn(r);if(!x.gl)throw"Could not get gl from Scene.";r.addEventListener("contextmenu",nt=>nt.preventDefault()),r.addEventListener("mousedown",k),r.addEventListener("touchstart",k),r.addEventListener("mouseup",F),r.addEventListener("touchend",F),r.addEventListener("mousemove",B),r.addEventListener("touchmove",B),document.addEventListener("keydown",b),i=x.gl,f=new hn(i);const P=new me({gl:i,source:un}),$=new ve({gl:i,source:cn});f.attachShader(P),f.attachShader($),x.linkProgram(f),i.useProgram(f.webGLProgram);const q=new wn({gl:i,program:f});var T=ot.translation(0,0,0);T=T.rotateX(0);const K=new oe({gl:i,program:f,coordinates:mn,src:"./static/f-texture.png"}),H=new re({gl:i,program:f,coordinates:gn,normals:pn,texture:K});H.transform(T),l.push(H);const J=new oe({gl:i,program:f,coordinates:new Float32Array([0,0,6,0,6,6,0,0,6,6,0,6]),src:"./static/floor.jpeg"}),it=new re({gl:i,program:f,coordinates:new Float32Array([-1e3,0,1e3,1e3,0,1e3,1e3,0,-1e3,-1e3,0,1e3,1e3,0,-1e3,-1e3,0,-1e3]),normals:new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),texture:J});l.push(it),u=new ie({gl:i,type:"matrix4fv",name:"u_worldInverseTranspose",program:f,value:new ot().transpose().invert()}),g=new ie({gl:i,type:"matrix4fv",name:"u_worldViewProjection",program:f,value:ot.identity}),v=new bn({direction:new tt([0,0,1]),color:new tt([0,0,0])}),q.addDirectionalLight(v);const U=new yn({position:new tt([0,100,400]),color:new tt([1,1,1])});q.addPointLight(U),m()});function m(x){if(!i)return;(r.width!==r.clientWidth||r.height!==r.clientHeight)&&(e(1,r.width=r.clientWidth,r),e(1,r.height=r.clientHeight,r),i.viewport(0,0,i.canvas.width,i.canvas.height));let $=r.width,q=r.height;i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.CULL_FACE),i.enable(i.DEPTH_TEST);const T=$/q,K=1,H=1e4,J=vn(60),it=ot.perspective(J,T,K,H),U=new tt([0,0,0]);let nt=new ot,st=new ot([1,0,0,0,0,1,0,0,0,0,1,0,...o.values,1]);s&&(st=ot.lookAt(o,U));const ct=st.invert();let pt=ot.multiply(ct,it);const rt=ot.multiply(nt,pt);u.value=nt.values,g.value=rt.values,l.forEach(C=>C.draw()),requestAnimationFrame(m)}function w(x){kt[x?"unshift":"push"](()=>{r=x,e(1,r)})}function E(){o.values[0]=O(this.value),e(2,o)}function S(){o.values[1]=O(this.value),e(2,o)}function I(){o.values[2]=O(this.value),e(2,o)}function z(){a.values[0]=O(this.value),e(3,a)}function Y(){a.values[1]=O(this.value),e(3,a)}function W(){a.values[2]=O(this.value),e(3,a)}function M(){s=this.checked,e(0,s)}return[s,r,o,a,w,E,S,I,z,Y,W,M]}class xn extends gt{constructor(t){super(),dt(this,t,Ln,An,_t,{})}}function En(n){let t;return{c(){t=Lt("Engine")},m(e,s){X(e,t,s)},d(e){e&&V(t)}}}function Sn(n){let t;return{c(){t=Lt("Home")},m(e,s){X(e,t,s)},d(e){e&&V(t)}}}function Tn(n){let t;return{c(){t=Lt("Shader Art")},m(e,s){X(e,t,s)},d(e){e&&V(t)}}}function Rn(n){let t,e,s,r,o,a,i,l,u,g,f,L;return r=new Nt({props:{href:"/engine",$$slots:{default:[En]},$$scope:{ctx:n}}}),a=new Nt({props:{href:"/home",$$slots:{default:[Sn]},$$scope:{ctx:n}}}),l=new Nt({props:{href:"/shaderart",$$slots:{default:[Tn]},$$scope:{ctx:n}}}),f=new Xe({props:{routes:n[0]}}),{c(){t=A("div"),e=A("header"),s=A("nav"),ut(r.$$.fragment),o=R(),ut(a.$$.fragment),i=R(),ut(l.$$.fragment),u=R(),g=A("main"),ut(f.$$.fragment),c(s,"class","svelte-ucdmxf"),c(e,"class","svelte-ucdmxf"),c(g,"class","svelte-ucdmxf"),c(t,"class","content svelte-ucdmxf")},m(h,p){X(h,t,p),d(t,e),d(e,s),at(r,s,null),d(s,o),at(a,s,null),d(s,i),at(l,s,null),d(t,u),d(t,g),at(f,g,null),L=!0},p(h,[p]){const y={};p&2&&(y.$$scope={dirty:p,ctx:h}),r.$set(y);const v={};p&2&&(v.$$scope={dirty:p,ctx:h}),a.$set(v);const k={};p&2&&(k.$$scope={dirty:p,ctx:h}),l.$set(k)},i(h){L||(Z(r.$$.fragment,h),Z(a.$$.fragment,h),Z(l.$$.fragment,h),Z(f.$$.fragment,h),L=!0)},o(h){et(r.$$.fragment,h),et(a.$$.fragment,h),et(l.$$.fragment,h),et(f.$$.fragment,h),L=!1},d(h){h&&V(t),lt(r),lt(a),lt(l),lt(f)}}}function Dn(n){return[{"/":He,"/shaderart":on,"/engine":xn}]}class Pn extends gt{constructor(t){super(),dt(this,t,Dn,Rn,_t,{})}}new Pn({target:document.getElementById("app")});
//# sourceMappingURL=index-C76NYoti.js.map
