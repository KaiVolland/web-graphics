{"version":3,"file":"index-DMlwxkLr.js","sources":["../../node_modules/svelte/src/runtime/internal/utils.js","../../node_modules/svelte/src/runtime/internal/dom.js","../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../node_modules/svelte/src/runtime/internal/scheduler.js","../../node_modules/svelte/src/runtime/internal/transitions.js","../../node_modules/svelte/src/runtime/internal/spread.js","../../node_modules/svelte/src/runtime/internal/Component.js","../../node_modules/svelte/src/shared/version.js","../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../node_modules/svelte/src/runtime/store/index.js","../../node_modules/regexparam/dist/index.mjs","../../node_modules/svelte-spa-router/Router.svelte","../../src/routes/Home.svelte","../../src/shaderArt/main.vert.ts","../../src/shaderArt/main.frag.ts","../../src/store/shaderArt/density.ts","../../src/store/shaderArt/speedFactor.ts","../../src/lib/shaderArt/SpeedSlider.svelte","../../src/lib/shaderArt/DensitySlider.svelte","../../src/routes/shaderart/ShaderArt.svelte","../../src/lib/Link.svelte","../../src/engine/shader/vert.ts","../../src/engine/shader/frag.ts","../../src/engine/Scene.ts","../../src/engine/shader/BaseShader.ts","../../src/engine/shader/VertexShader.ts","../../src/engine/shader/FragmentShader.ts","../../src/engine/models/webgl/Program.ts","../../src/engine/models/math/Vector.ts","../../src/engine/models/math/Matrix.ts","../../src/engine/models/webgl/Uniform.ts","../../src/engine/shapes/3d/Chars.ts","../../src/engine/util/Math.ts","../../src/engine/models/webgl/Attribute.ts","../../src/engine/models/mesh/Mesh.ts","../../src/engine/models/webgl/Texture.ts","../../src/routes/Engine.svelte","../../src/App.svelte","../../src/main.ts"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro — restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.10';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","export function parse(str, loose) {\n\tif (str instanceof RegExp) return { keys:false, pattern:str };\n\tvar c, o, tmp, ext, keys=[], pattern='', arr = str.split('/');\n\tarr[0] || arr.shift();\n\n\twhile (tmp = arr.shift()) {\n\t\tc = tmp[0];\n\t\tif (c === '*') {\n\t\t\tkeys.push('wild');\n\t\t\tpattern += '/(.*)';\n\t\t} else if (c === ':') {\n\t\t\to = tmp.indexOf('?', 1);\n\t\t\text = tmp.indexOf('.', 1);\n\t\t\tkeys.push( tmp.substring(1, !!~o ? o : !!~ext ? ext : tmp.length) );\n\t\t\tpattern += !!~o && !~ext ? '(?:/([^/]+?))?' : '/([^/]+?)';\n\t\t\tif (!!~ext) pattern += (!!~o ? '?' : '') + '\\\\' + tmp.substring(ext);\n\t\t} else {\n\t\t\tpattern += '/' + tmp;\n\t\t}\n\t}\n\n\treturn {\n\t\tkeys: keys,\n\t\tpattern: new RegExp('^' + pattern + (loose ? '(?=$|\\/)' : '\\/?$'), 'i')\n\t};\n}\n\nvar RGX = /(\\/|^)([:*][^/]*?)(\\?)?(?=[/.]|$)/g;\n\n// error if key missing?\nexport function inject(route, values) {\n\treturn route.replace(RGX, (x, lead, key, optional) => {\n\t\tx = values[key=='*' ? 'wild' : key.substring(1)];\n\t\treturn x ? '/'+x : (optional || key=='*') ? '' : '/' + key;\n\t});\n}\n","<script context=\"module\">\nimport {readable, writable, derived} from 'svelte/store'\nimport {tick} from 'svelte'\n\n/**\n * @typedef {Object} Location\n * @property {string} location - Location (page/view), for example `/book`\n * @property {string} [querystring] - Querystring from the hash, as a string not parsed\n */\n/**\n * Returns the current location from the hash.\n *\n * @returns {Location} Location object\n * @private\n */\nfunction getLocation() {\n    const hashPosition = window.location.href.indexOf('#/')\n    let location = (hashPosition > -1) ? window.location.href.substr(hashPosition + 1) : '/'\n\n    // Check if there's a querystring\n    const qsPosition = location.indexOf('?')\n    let querystring = ''\n    if (qsPosition > -1) {\n        querystring = location.substr(qsPosition + 1)\n        location = location.substr(0, qsPosition)\n    }\n\n    return {location, querystring}\n}\n\n/**\n * Readable store that returns the current full location (incl. querystring)\n */\nexport const loc = readable(\n    null,\n    // eslint-disable-next-line prefer-arrow-callback\n    function start(set) {\n        set(getLocation())\n\n        const update = () => {\n            set(getLocation())\n        }\n        window.addEventListener('hashchange', update, false)\n\n        return function stop() {\n            window.removeEventListener('hashchange', update, false)\n        }\n    }\n)\n\n/**\n * Readable store that returns the current location\n */\nexport const location = derived(\n    loc,\n    (_loc) => _loc.location\n)\n\n/**\n * Readable store that returns the current querystring\n */\nexport const querystring = derived(\n    loc,\n    (_loc) => _loc.querystring\n)\n\n/**\n * Store that returns the currently-matched params.\n * Despite this being writable, consumers should not change the value of the store.\n * It is exported as a readable store only (in the typings file)\n */\nexport const params = writable(undefined)\n\n/**\n * Navigates to a new page programmatically.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function push(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    // Note: this will include scroll state in history even when restoreScrollState is false\n    history.replaceState({...history.state, __svelte_spa_router_scrollX: window.scrollX, __svelte_spa_router_scrollY: window.scrollY}, undefined)      \n    window.location.hash = (location.charAt(0) == '#' ? '' : '#') + location\n}\n\n/**\n * Navigates back in history (equivalent to pressing the browser's back button).\n * \n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function pop() {\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    window.history.back()\n}\n\n/**\n * Replaces the current page but without modifying the history stack.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise<void>} Promise that resolves after the page navigation has completed\n */\nexport async function replace(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    await tick()\n\n    const dest = (location.charAt(0) == '#' ? '' : '#') + location\n    try {\n        const newState = {\n            ...history.state\n        }\n        delete newState['__svelte_spa_router_scrollX']\n        delete newState['__svelte_spa_router_scrollY']\n        window.history.replaceState(newState, undefined, dest)\n    }\n    catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Caught exception while replacing the current page. If you\\'re running this in the Svelte REPL, please note that the `replace` method might not work in this environment.')\n    }\n\n    // The method above doesn't trigger the hashchange event, so let's do that manually\n    window.dispatchEvent(new Event('hashchange'))\n}\n\n/**\n * Dictionary with options for the link action.\n * @typedef {Object} LinkActionOpts\n * @property {string} href - A string to use in place of the link's href attribute. Using this allows for updating link's targets reactively.\n * @property {boolean} disabled - If true, link is disabled\n */\n\n/**\n * Svelte Action that enables a link element (`<a>`) to use our history management.\n *\n * For example:\n *\n * ````html\n * <a href=\"/books\" use:link>View books</a>\n * ````\n *\n * @param {HTMLElement} node - The target node (automatically set by Svelte). Must be an anchor tag (`<a>`) with a href attribute starting in `/`\n * @param {string|LinkActionOpts} opts - Options object. For legacy reasons, we support a string too which will be the value for opts.href\n */\nexport function link(node, opts) {\n    opts = linkOpts(opts)\n\n    // Only apply to <a> tags\n    if (!node || !node.tagName || node.tagName.toLowerCase() != 'a') {\n        throw Error('Action \"link\" can only be used with <a> tags')\n    }\n\n    updateLink(node, opts)\n\n    return {\n        update(updated) {\n            updated = linkOpts(updated)\n            updateLink(node, updated)\n        }\n    }\n}\n\n/**\n * Tries to restore the scroll state from the given history state.\n *\n * @param {{__svelte_spa_router_scrollX: number, __svelte_spa_router_scrollY: number}} [state] - The history state to restore from.\n */\nexport function restoreScroll(state) {\n    // If this exists, then this is a back navigation: restore the scroll position\n    if (state) {\n        window.scrollTo(state.__svelte_spa_router_scrollX, state.__svelte_spa_router_scrollY)\n    }\n    else {\n        // Otherwise this is a forward navigation: scroll to top\n        window.scrollTo(0, 0)\n    }\n}\n\n// Internal function used by the link function\nfunction updateLink(node, opts) {\n    let href = opts.href || node.getAttribute('href')\n\n    // Destination must start with '/' or '#/'\n    if (href && href.charAt(0) == '/') {\n        // Add # to the href attribute\n        href = '#' + href\n    }\n    else if (!href || href.length < 2 || href.slice(0, 2) != '#/') {\n        throw Error('Invalid value for \"href\" attribute: ' + href)\n    }\n\n    node.setAttribute('href', href)\n    node.addEventListener('click', (event) => {\n        // Prevent default anchor onclick behaviour\n        event.preventDefault()\n        if (!opts.disabled) {\n            scrollstateHistoryHandler(event.currentTarget.getAttribute('href'))\n        }\n    })\n}\n\n// Internal function that ensures the argument of the link action is always an object\nfunction linkOpts(val) {\n    if (val && typeof val == 'string') {\n        return {\n            href: val\n        }\n    }\n    else {\n        return val || {}\n    }\n}\n\n/**\n * The handler attached to an anchor tag responsible for updating the\n * current history state with the current scroll state\n *\n * @param {string} href - Destination\n */\nfunction scrollstateHistoryHandler(href) {\n    // Setting the url (3rd arg) to href will break clicking for reasons, so don't try to do that\n    history.replaceState({...history.state, __svelte_spa_router_scrollX: window.scrollX, __svelte_spa_router_scrollY: window.scrollY}, undefined)\n    // This will force an update as desired, but this time our scroll state will be attached\n    window.location.hash = href\n}\n</script>\n\n{#if componentParams}\n    <svelte:component\n    this={component}\n    params={componentParams}\n    on:routeEvent\n    {...props}\n    />\n{:else}\n    <svelte:component\n    this={component}\n    on:routeEvent\n    {...props}\n    />\n{/if}\n\n<script>\nimport {onDestroy, createEventDispatcher, afterUpdate} from 'svelte'\nimport {parse} from 'regexparam'\n\n/**\n * Dictionary of all routes, in the format `'/path': component`.\n *\n * For example:\n * ````js\n * import HomeRoute from './routes/HomeRoute.svelte'\n * import BooksRoute from './routes/BooksRoute.svelte'\n * import NotFoundRoute from './routes/NotFoundRoute.svelte'\n * routes = {\n *     '/': HomeRoute,\n *     '/books': BooksRoute,\n *     '*': NotFoundRoute\n * }\n * ````\n */\nexport let routes = {}\n\n/**\n * Optional prefix for the routes in this router. This is useful for example in the case of nested routers.\n */\nexport let prefix = ''\n\n/**\n * If set to true, the router will restore scroll positions on back navigation\n * and scroll to top on forward navigation.\n */\nexport let restoreScrollState = false\n\n/**\n * Container for a route: path, component\n */\nclass RouteItem {\n    /**\n     * Initializes the object and creates a regular expression from the path, using regexparam.\n     *\n     * @param {string} path - Path to the route (must start with '/' or '*')\n     * @param {SvelteComponent|WrappedComponent} component - Svelte component for the route, optionally wrapped\n     */\n    constructor(path, component) {\n        if (!component || (typeof component != 'function' && (typeof component != 'object' || component._sveltesparouter !== true))) {\n            throw Error('Invalid component object')\n        }\n\n        // Path must be a regular or expression, or a string starting with '/' or '*'\n        if (!path || \n            (typeof path == 'string' && (path.length < 1 || (path.charAt(0) != '/' && path.charAt(0) != '*'))) ||\n            (typeof path == 'object' && !(path instanceof RegExp))\n        ) {\n            throw Error('Invalid value for \"path\" argument - strings must start with / or *')\n        }\n\n        const {pattern, keys} = parse(path)\n\n        this.path = path\n\n        // Check if the component is wrapped and we have conditions\n        if (typeof component == 'object' && component._sveltesparouter === true) {\n            this.component = component.component\n            this.conditions = component.conditions || []\n            this.userData = component.userData\n            this.props = component.props || {}\n        }\n        else {\n            // Convert the component to a function that returns a Promise, to normalize it\n            this.component = () => Promise.resolve(component)\n            this.conditions = []\n            this.props = {}\n        }\n\n        this._pattern = pattern\n        this._keys = keys\n    }\n\n    /**\n     * Checks if `path` matches the current route.\n     * If there's a match, will return the list of parameters from the URL (if any).\n     * In case of no match, the method will return `null`.\n     *\n     * @param {string} path - Path to test\n     * @returns {null|Object.<string, string>} List of paramters from the URL if there's a match, or `null` otherwise.\n     */\n    match(path) {\n        // If there's a prefix, check if it matches the start of the path.\n        // If not, bail early, else remove it before we run the matching.\n        if (prefix) {\n            if (typeof prefix == 'string') {\n                if (path.startsWith(prefix)) {\n                    path = path.substr(prefix.length) || '/'\n                }\n                else {\n                    return null\n                }\n            }\n            else if (prefix instanceof RegExp) {\n                const match = path.match(prefix)\n                if (match && match[0]) {\n                    path = path.substr(match[0].length) || '/'\n                }\n                else {\n                    return null\n                }\n            }\n        }\n\n        // Check if the pattern matches\n        const matches = this._pattern.exec(path)\n        if (matches === null) {\n            return null\n        }\n\n        // If the input was a regular expression, this._keys would be false, so return matches as is\n        if (this._keys === false) {\n            return matches\n        }\n\n        const out = {}\n        let i = 0\n        while (i < this._keys.length) {\n            // In the match parameters, URL-decode all values\n            try {\n                out[this._keys[i]] = decodeURIComponent(matches[i + 1] || '') || null\n            }\n            catch (e) {\n                out[this._keys[i]] = null\n            }\n            i++\n        }\n        return out\n    }\n\n    /**\n     * Dictionary with route details passed to the pre-conditions functions, as well as the `routeLoading`, `routeLoaded` and `conditionsFailed` events\n     * @typedef {Object} RouteDetail\n     * @property {string|RegExp} route - Route matched as defined in the route definition (could be a string or a reguar expression object)\n     * @property {string} location - Location path\n     * @property {string} querystring - Querystring from the hash\n     * @property {object} [userData] - Custom data passed by the user\n     * @property {SvelteComponent} [component] - Svelte component (only in `routeLoaded` events)\n     * @property {string} [name] - Name of the Svelte component (only in `routeLoaded` events)\n     */\n\n    /**\n     * Executes all conditions (if any) to control whether the route can be shown. Conditions are executed in the order they are defined, and if a condition fails, the following ones aren't executed.\n     * \n     * @param {RouteDetail} detail - Route detail\n     * @returns {boolean} Returns true if all the conditions succeeded\n     */\n    async checkConditions(detail) {\n        for (let i = 0; i < this.conditions.length; i++) {\n            if (!(await this.conditions[i](detail))) {\n                return false\n            }\n        }\n\n        return true\n    }\n}\n\n// Set up all routes\nconst routesList = []\nif (routes instanceof Map) {\n    // If it's a map, iterate on it right away\n    routes.forEach((route, path) => {\n        routesList.push(new RouteItem(path, route))\n    })\n}\nelse {\n    // We have an object, so iterate on its own properties\n    Object.keys(routes).forEach((path) => {\n        routesList.push(new RouteItem(path, routes[path]))\n    })\n}\n\n// Props for the component to render\nlet component = null\nlet componentParams = null\nlet props = {}\n\n// Event dispatcher from Svelte\nconst dispatch = createEventDispatcher()\n\n// Just like dispatch, but executes on the next iteration of the event loop\nasync function dispatchNextTick(name, detail) {\n    // Execute this code when the current call stack is complete\n    await tick()\n    dispatch(name, detail)\n}\n\n// If this is set, then that means we have popped into this var the state of our last scroll position\nlet previousScrollState = null\n\n// Update history.scrollRestoration depending on restoreScrollState\n$: history.scrollRestoration = restoreScrollState ? 'manual' : 'auto'\nlet popStateChanged = null\nif (restoreScrollState) {\n    popStateChanged = (event) => {\n        // If this event was from our history.replaceState, event.state will contain\n        // our scroll history. Otherwise, event.state will be null (like on forward\n        // navigation)\n        if (event.state && (event.state.__svelte_spa_router_scrollY || event.state.__svelte_spa_router_scrollX)) {\n            previousScrollState = event.state\n        }\n        else {\n            previousScrollState = null\n        }\n    }\n    // This is removed in the destroy() invocation below\n    window.addEventListener('popstate', popStateChanged)\n\n    afterUpdate(() => {\n        restoreScroll(previousScrollState)\n    })\n}\n\n// Always have the latest value of loc\nlet lastLoc = null\n\n// Current object of the component loaded\nlet componentObj = null\n\n// Handle hash change events\n// Listen to changes in the $loc store and update the page\n// Do not use the $: syntax because it gets triggered by too many things\nconst unsubscribeLoc = loc.subscribe(async (newLoc) => {\n    lastLoc = newLoc\n\n    // Find a route matching the location\n    let i = 0\n    while (i < routesList.length) {\n        const match = routesList[i].match(newLoc.location)\n        if (!match) {\n            i++\n            continue\n        }\n\n        const detail = {\n            route: routesList[i].path,\n            location: newLoc.location,\n            querystring: newLoc.querystring,\n            userData: routesList[i].userData,\n            params: (match && typeof match == 'object' && Object.keys(match).length) ? match : null\n        }\n\n        // Check if the route can be loaded - if all conditions succeed\n        if (!(await routesList[i].checkConditions(detail))) {\n            // Don't display anything\n            component = null\n            componentObj = null\n            // Trigger an event to notify the user, then exit\n            dispatchNextTick('conditionsFailed', detail)\n            return\n        }\n\n        // Trigger an event to alert that we're loading the route\n        // We need to clone the object on every event invocation so we don't risk the object to be modified in the next tick\n        dispatchNextTick('routeLoading', Object.assign({}, detail))\n\n        // If there's a component to show while we're loading the route, display it\n        const obj = routesList[i].component\n        // Do not replace the component if we're loading the same one as before, to avoid the route being unmounted and re-mounted\n        if (componentObj != obj) {\n            if (obj.loading) {\n                component = obj.loading\n                componentObj = obj\n                componentParams = obj.loadingParams\n                props = {}\n\n                // Trigger the routeLoaded event for the loading component\n                // Create a copy of detail so we don't modify the object for the dynamic route (and the dynamic route doesn't modify our object too)\n                dispatchNextTick('routeLoaded', Object.assign({}, detail, {\n                    component: component,\n                    name: component.name,\n                    params: componentParams\n                }))\n            }\n            else {\n                component = null\n                componentObj = null\n            }\n\n            // Invoke the Promise\n            const loaded = await obj()\n\n            // Now that we're here, after the promise resolved, check if we still want this component, as the user might have navigated to another page in the meanwhile\n            if (newLoc != lastLoc) {\n                // Don't update the component, just exit\n                return\n            }\n\n            // If there is a \"default\" property, which is used by async routes, then pick that\n            component = (loaded && loaded.default) || loaded\n            componentObj = obj\n        }\n\n        // Set componentParams only if we have a match, to avoid a warning similar to `<Component> was created with unknown prop 'params'`\n        // Of course, this assumes that developers always add a \"params\" prop when they are expecting parameters\n        if (match && typeof match == 'object' && Object.keys(match).length) {\n            componentParams = match\n        }\n        else {\n            componentParams = null\n        }\n\n        // Set static props, if any\n        props = routesList[i].props\n\n        // Dispatch the routeLoaded event then exit\n        // We need to clone the object on every event invocation so we don't risk the object to be modified in the next tick\n        dispatchNextTick('routeLoaded', Object.assign({}, detail, {\n            component: component,\n            name: component.name,\n            params: componentParams\n        })).then(() => {\n            params.set(componentParams)\n        })\n        return\n    }\n\n    // If we're still here, there was no match, so show the empty component\n    component = null\n    componentObj = null\n    params.set(undefined)\n})\n\nonDestroy(() => {\n    unsubscribeLoc()\n    popStateChanged && window.removeEventListener('popstate', popStateChanged)\n})\n</script>\n","Nothing to see here. Go to Engine or Shader Art.\n","export default /* wgsl */`#version 300 es\r\n\r\nlayout(location = 0) in vec2 aPosition;\r\nout vec2 fragCoord;\r\n\r\nvoid main()\r\n{\r\n    fragCoord = aPosition;\r\n    gl_Position = vec4(aPosition, 0.0, 1.0);\r\n}\r\n`;\r\n","export default /* wgsl */`#version 300 es\r\n\r\nprecision mediump float;\r\n\r\nin vec2 fragCoord;\r\nuniform float uTime;\r\nuniform float uDensity;\r\n\r\nout vec4 fragColor;\r\n\r\n//https://iquilezles.org/articles/palettes/\r\nvec3 palette( float t ) {\r\n    vec3 a = vec3(0.5, 0.5, 0.5);\r\n    vec3 b = vec3(0.5, 0.5, 0.5);\r\n    vec3 c = vec3(1.0, 1.0, 1.0);\r\n    vec3 d = vec3(0.263,0.416,0.557);\r\n\r\n    return a + b*cos( 6.28318*(c*t+d) );\r\n}\r\n\r\nvoid main()\r\n{\r\n    vec2 uv = fragCoord;\r\n    float d = length(uv);\r\n\r\n    vec2 uv0 = uv;\r\n    vec3 finalColor = vec3(0.0);\r\n\r\n    for (float i = 0.0; i < 4.0; i++) {\r\n        uv = fract(uv * uDensity / 10.0) - 0.5;\r\n\r\n        float d = length(uv) * exp(-length(uv0));\r\n\r\n        vec3 col = palette(length(uv0) + i*.4 + uTime*.4);\r\n\r\n        d = sin(d * 8. + uTime)/8.;\r\n        d = abs(d);\r\n\r\n        d = pow(0.01 / d, 1.2);\r\n\r\n        finalColor += col * d;\r\n    }\r\n\r\n    fragColor = vec4(finalColor, 1.0);\r\n}\r\n`;\r\n","import { writable } from 'svelte/store';\r\n\r\nexport const density = writable(15);\r\n","import { writable } from 'svelte/store';\r\n\r\nexport const speedFactor = writable(1000);","<script lang=\"ts\">\r\n  import { speedFactor } from \"../../store/shaderArt/speedFactor.js\";\r\n  export let id = \"speed-slider\";\r\n</script>\r\n\r\n<input\r\n  type=\"number\"\r\n  min=\"100\"\r\n  max=\"3000\"\r\n  bind:value={$speedFactor}\r\n>\r\n<input\r\n  id={id}\r\n  type=\"range\"\r\n  min=\"100\"\r\n  max=\"3000\"\r\n  bind:value={$speedFactor}\r\n>","<script lang=\"ts\">\r\n  import { density } from \"../../store/shaderArt/density.js\";\r\n  export let id = \"density-slider\";\r\n</script>\r\n\r\n<input\r\n  type=\"number\"\r\n  min=\"1\"\r\n  max=\"30\"\r\n  bind:value={$density}\r\n>\r\n<input\r\n  id={id}\r\n  type=\"range\"\r\n  min=\"1\"\r\n  max=\"30\"\r\n  bind:value={$density}\r\n>\r\n","<script lang=\"ts\">\r\n  import vertexShaderSource from '../../shaderArt/main.vert.js';\r\n  import fragmentShaderSource from '../../shaderArt/main.frag.js';\r\n  import { density } from '../../store/shaderArt/density.js';\r\n  import { speedFactor } from '../../store/shaderArt/speedFactor.js';\r\n  import { onMount } from 'svelte';\r\n  import SpeedSlider from '../../lib/shaderArt/SpeedSlider.svelte';\r\n  import DensitySlider from '../../lib/shaderArt/DensitySlider.svelte';\r\n\r\n  let canvas: HTMLCanvasElement;\r\n\r\n  onMount(() => {\r\n    const gl = canvas.getContext('webgl2');\r\n\r\n    if (!gl) {\r\n      return;\r\n    }\r\n\r\n    const program = gl.createProgram();\r\n    if (!program) {\r\n      return;\r\n    }\r\n\r\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n    if (!vertexShader) {\r\n      return;\r\n    }\r\n    gl.shaderSource(vertexShader, vertexShaderSource);\r\n    gl.compileShader(vertexShader);\r\n    gl.attachShader(program!, vertexShader);\r\n\r\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    if (!fragmentShader) {\r\n      return;\r\n    }\r\n    gl.shaderSource(fragmentShader, fragmentShaderSource);\r\n    gl.compileShader(fragmentShader);\r\n    gl.attachShader(program, fragmentShader!);\r\n\r\n    gl.linkProgram(program);\r\n\r\n    if (!gl.getProgramParameter(program!, gl.LINK_STATUS)) {\r\n      console.log(gl.getShaderInfoLog(vertexShader!));\r\n      console.log(gl.getShaderInfoLog(fragmentShader!));\r\n    }\r\n\r\n    const bufferData = new Float32Array([\r\n      -1, -1, 1, -1, -1, 1, 1, -1, -1, 1, 1, 1,\r\n    ]);\r\n\r\n    const uPositionLoc = gl.getUniformLocation(program!, 'uResolution');\r\n    gl.uniform2f(uPositionLoc, 1024, 1024);\r\n\r\n    const uTimeLoc = gl.getUniformLocation(program!, 'uTime');\r\n    gl.uniform1f(uTimeLoc, 0);\r\n\r\n    const uDensityLoc = gl.getUniformLocation(program!, 'uDensity');\r\n    gl.uniform1f(uDensityLoc, 15.0);\r\n\r\n    const buffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, bufferData, gl.STATIC_DRAW);\r\n\r\n    const aPositionLoc = 0;\r\n    gl.enableVertexAttribArray(aPositionLoc);\r\n    gl.vertexAttribPointer(aPositionLoc, 2, gl.FLOAT, false, 2 * 4, 0);\r\n\r\n    const draw = (time = 0) => {\r\n      // Check if the canvas is not the same size.\r\n      const needResize =\r\n        canvas.width !== canvas.clientWidth ||\r\n        canvas.height !== canvas.clientHeight;\r\n      if (needResize) {\r\n        // Make the canvas the same size\r\n        canvas.width = canvas.clientWidth;\r\n        canvas.height = canvas.clientHeight;\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n      }\r\n\r\n      gl.clearColor(0, 0, 0, 1.0);\r\n      gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n      gl.uniform1f(uDensityLoc, $density);\r\n      gl.uniform1f(uTimeLoc, (time / 1000000) * $speedFactor);\r\n\r\n      gl.useProgram(program);\r\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n\r\n      requestAnimationFrame(draw);\r\n    };\r\n\r\n    draw();\r\n  });\r\n</script>\r\n\r\n<div class=\"shaderArt\">\r\n  <div class=\"toolbar\">\r\n    <label for=\"speed-slider\">Speed</label>\r\n    <SpeedSlider id=\"speed-slider\" />\r\n    <label for=\"speed-slider\">Density</label>\r\n    <DensitySlider id=\"density-slider\" />\r\n  </div>\r\n  <canvas bind:this={canvas} ></canvas>\r\n  <div>\r\n    <a href=\"https://www.youtube.com/watch?v=f4s1h2YETNY&t=583s\"\r\n      >Shader code by kishimisu</a\r\n    >\r\n  </div>\r\n</div>\r\n\r\n<style lang=\"less\">\r\n  .shaderArt {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    canvas {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      border: 1px solid const(--accent);\r\n      background-color: #f7f5ed;\r\n    }\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n  import { link, location } from 'svelte-spa-router'\r\n  export let href = \"\";\r\n</script>\r\n\r\n<a href={href} use:link class:active={$location === href}>\r\n  <slot />\r\n</a>\r\n\r\n<style lang=\"less\">\r\n  a {\r\n    color: var(--text-color-light);\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      color: var(--text-color-dark);\r\n    }\r\n\r\n    &.active {\r\n      font-weight: bold;\r\n    }\r\n  }\r\n</style>\r\n","export default /* wgsl */`#version 300 es\r\n\r\n// an attribute is an input (in) to a vertex shader.\r\n// It will receive data from a buffer\r\nin vec4 a_position;\r\nin vec3 a_normal;\r\nin vec2 a_texcoord;\r\n\r\nuniform vec3 u_lightWorldPosition;\r\nuniform vec3 u_viewWorldPosition;\r\n\r\nuniform mat4 u_world;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\n\r\n// // a varying the color to the fragment shader\r\n\r\n// a varying to pass the texture coordinates to the fragment shader\r\nout vec2 v_texcoord;\r\n\r\n// varying to pass the normal to the fragment shader\r\nout vec3 v_normal;\r\nout vec3 v_surfaceToLight;\r\nout vec3 v_surfaceToView;\r\n\r\nvoid main() {\r\n  // Multiply the position by the matrix.\r\n  gl_Position = u_worldViewProjection * a_position;\r\n\r\n  // Pass the texcoord to the fragment shader.\r\n  v_texcoord = a_texcoord;\r\n\r\n  // Pass the normal to the fragment shader\r\n  v_normal = mat3(u_worldInverseTranspose) * a_normal;\r\n\r\n  // compute the world position of the surface\r\n  vec3 surfaceWorldPosition = (u_world * a_position).xyz;\r\n\r\n  // compute the vector of the surface to the light\r\n  // and pass it to the fragment shader\r\n  v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;\r\n\r\n  // compute the vector of the surface to the view/camera\r\n  // and pass it to the fragment shader\r\n  v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;\r\n}\r\n`;\r\n","export default /* wgsl */`#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Passed in and varied from the vertex shader.\r\nin vec2 v_texcoord;\r\nin vec3 v_normal;\r\nin vec3 v_surfaceToLight;\r\nin vec3 v_surfaceToView;\r\n\r\nuniform sampler2D u_texture;\r\n\r\n// we need to declare an output for the fragment shader\r\nout vec4 outColor;\r\n\r\nuniform float u_shininess;\r\nuniform vec3 u_lightColor;\r\nuniform vec3 u_specularColor;\r\n\r\nvoid main() {\r\n  outColor = texture(u_texture, v_texcoord);;\r\n\r\n  // because v_normal is a varying it's interpolated\r\n  // so it will not be a unit vector. Normalizing it\r\n  // will make it a unit vector again\r\n  vec3 normal = normalize(v_normal);\r\n\r\n  vec3 surfaceToLightDirection = normalize(v_surfaceToLight);\r\n  vec3 surfaceToViewDirection = normalize(v_surfaceToView);\r\n  vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);\r\n\r\n  // compute the light by taking the dot product\r\n  // of the normal to the light's reverse direction\r\n  float light = dot(normal, surfaceToLightDirection);\r\n  float specular = 0.0;\r\n  if (light > 0.0) {\r\n    specular = pow(dot(normal, halfVector), u_shininess);\r\n  }\r\n\r\n  // Lets multiply just the color portion (not the alpha)\r\n  // by the light\r\n  outColor.rgb *= light * u_lightColor;\r\n\r\n  // Just add in the specular\r\n  outColor.rgb += specular * u_specularColor;\r\n}\r\n`;\r\n","import type { Program } from \"./models/webgl/Program\";\n\nexport type PeterConstructorParams = HTMLCanvasElement;\n\nexport class Scene {\n\n  private _gl: WebGL2RenderingContext | null = null;\n\n  private _canvas: HTMLCanvasElement;\n\n  /**\n   * The width of the passed canvas;\n   */\n  private _width: number;\n\n  /**\n   * The height of the passed canvas;\n   */\n  private _height: number;\n\n  constructor(canvas: PeterConstructorParams) {\n    this._width = canvas.width;\n    this._height = canvas.height;\n    this._canvas = canvas;\n    this.updateGL();\n    this.updateViewPort();\n  }\n\n  set canvas(canvas: HTMLCanvasElement) {\n    this._canvas = canvas;\n    this.updateGL();\n    this.updateViewPort();\n  }\n\n  private updateGL() {\n    const gl = this._canvas.getContext(\"webgl2\");\n    if (!gl) {\n      throw `Could not get webgl2 context of canvas element: ${this._canvas}`;\n    }\n    this._gl = gl;\n  }\n\n  updateViewPort() {\n    if (!this._gl) {\n      throw `Could not update viewport.`;\n    }\n\n    // Tell WebGL how to convert from clip space to pixels\n    this._gl.viewport(0, 0, this._gl.canvas.width, this._gl.canvas.height);\n  }\n\n  public linkProgram(program: Program) {\n    if (!this._gl) {\n      throw `Could not link program.`;\n    }\n    this._gl.linkProgram(program.webGLProgram);\n\n    if (!this._gl.getProgramParameter(program.webGLProgram, this._gl.LINK_STATUS)) {\n      if (program.vertexShader) {\n        console.log(this._gl.getShaderInfoLog(program.vertexShader.webGLShader));\n      }\n      if (program.fragmentShader) {\n        console.log(this._gl.getShaderInfoLog(program.fragmentShader.webGLShader));\n      }\n    }\n  }\n\n  public get width() {\n    return this._width;\n  }\n\n  public get height() {\n    return this._height;\n  }\n\n  public get gl() {\n    return this._gl;\n  }\n}\n","export type BaseShaderParams = {\n  gl: WebGL2RenderingContext;\n  source?: string;\n};\n\nexport abstract class BaseShader {\n\n  protected _gl: WebGL2RenderingContext;\n\n  protected _webGLShader: WebGLShader;\n\n  protected source: string | null = null;\n\n  constructor({ gl, source }: BaseShaderParams) {\n    this._gl = gl;\n    this._webGLShader = this.create();\n    if (source) {\n      this._gl.shaderSource(this._webGLShader, source);\n      this._gl.compileShader(this._webGLShader);\n    }\n  }\n\n  abstract create(): WebGLShader;\n\n  abstract updateSource(source: string): void;\n\n  public get webGLShader () {\n    return this._webGLShader;\n  }\n}\n","import { BaseShader, type BaseShaderParams } from \"./BaseShader\";\n\nexport interface VertexShaderParams extends BaseShaderParams {\n}\n\nexport class VertexShader extends BaseShader {\n\n  constructor({ gl, source }: VertexShaderParams) {\n    super({ gl, source });\n  }\n\n  create() {\n    const shader = this._gl.createShader(this._gl.VERTEX_SHADER);\n    if (!shader) {\n      throw 'Could not create VertexShader';\n    }\n    return shader;\n  };\n\n  updateSource(source: string): void {\n\n  }\n}\n","import { BaseShader, type BaseShaderParams } from \"./BaseShader\";\n\nexport interface FragmentShaderParams extends BaseShaderParams {\n}\n\nexport class FragmentShader extends BaseShader {\n\n  constructor({ gl, source }: FragmentShaderParams) {\n    super({ gl, source });\n  }\n\n  create() {\n    const shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n    if (!shader) {\n      throw 'Could not create FragmentShader';\n    }\n    return shader;\n  };\n\n  updateSource(source: string): void {\n\n  }\n}\n","import type { BaseShader } from \"../../shader/BaseShader\";\nimport { FragmentShader } from \"../../shader/FragmentShader\";\nimport { VertexShader } from \"../../shader/VertexShader\";\n\nexport type BaseProgramParams = WebGL2RenderingContext;\n\nexport class Program {\n\n  private _gl: WebGL2RenderingContext;\n\n  private _webGLProgram: WebGLProgram;\n\n  private _vertexShader: VertexShader | null = null;\n\n  private _fragmentShader: FragmentShader | null = null;\n\n  constructor(gl: BaseProgramParams) {\n    this._gl = gl;\n    const program = gl.createProgram();\n\n    if (!program) {\n      throw \"Could not create program\";\n    }\n    this._webGLProgram = program;\n  }\n\n  attachShader(shader: BaseShader) {\n    this._gl.attachShader(this._webGLProgram, shader.webGLShader);\n    if (shader instanceof VertexShader) {\n      this._vertexShader = shader;\n    }\n    if (shader instanceof FragmentShader) {\n      this._fragmentShader = shader;\n    }\n  }\n\n  getUniformLocation(uniform: string) {\n    return this._gl.getUniformLocation(this._webGLProgram, uniform);\n  }\n\n  get webGLProgram() {\n    return this._webGLProgram;\n  }\n\n  get vertexShader() {\n    return this._vertexShader;\n  }\n\n  get fragmentShader() {\n    return this._fragmentShader;\n  }\n\n}\n","export type Vector1D = [number];\nexport type Vector2D = [number, number];\nexport type Vector3D = [number, number, number];\nexport type Vector4D = [number, number, number, number];\nexport type VectorValues = Vector1D | Vector2D | Vector3D | Vector4D;\n\nexport abstract class Vector<T extends VectorValues> {\n\n    constructor(values: T) {\n        this._values = this.create(values);\n    }\n\n    protected _values: T;\n\n    // TODO: the typing is ok but the code could be smarter\n    static substract<T extends VectorValues>(v1: Vector<T>, v2: Vector<T>): Vector<T> {\n        if (v1.is1D(v1) && v2.is1D(v2)) {\n            return new Vector1([v1._values[0] - v2._values[0]]) as unknown as Vector<T>;\n        }\n        if (v1.is2D(v1) && v2.is2D(v2)) {\n            return new Vector2([v1._values[0] - v2._values[0], v1._values[1] - v2._values[1]]) as unknown as Vector<T>;\n        }\n        if (v1.is3D(v1) && v2.is3D(v2)) {\n            return new Vector3([v1._values[0] - v2._values[0], v1._values[1] - v2._values[1], v1._values[2] - v2._values[2]]) as unknown as Vector<T>;\n        }\n        if (v1.is4D(v1) && v2.is4D(v2)) {\n            return new Vector4([v1._values[0] - v2._values[0], v1._values[1] - v2._values[1], v1._values[2] - v2._values[2], v1._values[3] - v2._values[3]]) as unknown as Vector<T>;\n        }\n        throw new Error(\"Vectors must have the same dimension to subtract.\");\n    }\n\n    static dot<T extends VectorValues>(v1: Vector<T>, v2: Vector<T>): number {\n        return v1._values.reduce((sum, val, i) => sum + val * v2._values[i], 0);\n    }\n\n    get values(): T {\n        return this._values;\n    }\n\n    set values(values: T) {\n        this._values = values;\n    }\n\n    protected abstract create(values?: T): T;\n\n    is1D(vector: Vector<VectorValues>): vector is Vector1 {\n        return vector.values.length === 1;\n    }\n\n    is2D(vector: Vector<VectorValues>): vector is Vector2 {\n        return vector.values.length === 2;\n    }\n\n    is3D(vector: Vector<VectorValues>): vector is Vector3 {\n        return vector.values.length === 3;\n    }\n\n    is4D(vector: Vector<VectorValues>): vector is Vector4 {\n        return vector.values.length === 4;\n    }\n\n    normalize(): Vector<T> {\n        const magnitude = Math.sqrt(this._values.reduce((sum, val) => sum + val * val, 0));\n        const resultValues: T = this._values.map(val => val / magnitude) as T;\n        this._values = resultValues;\n        return this;\n    }\n\n    toNormalized(): Vector<T> {\n        const magnitude = Math.sqrt(this._values.reduce((sum, val) => sum + val * val, 0));\n        const resultValues: T = this._values.map(val => val / magnitude) as T;\n        const VectorConstructor = this.constructor as unknown as new (values: T) => Vector<T>;\n        return new VectorConstructor(resultValues);\n    }\n}\n\n\nexport class Vector1 extends Vector<Vector1D> {\n    protected create(values?: Vector1D | undefined): Vector1D {\n        return values ? values : [1];\n    }\n}\n\nexport class Vector2 extends Vector<Vector2D> {\n    protected create(values?: Vector2D | undefined): Vector2D {\n        return values ? values : [1, 1];\n    }\n}\n\nexport class Vector3 extends Vector<Vector3D> {\n\n    protected create(values?: Vector3D | undefined): Vector3D {\n        return values ? values : [1, 1, 1];\n    }\n\n    static cross(v1: Vector3, v2: Vector3): Vector3 {\n        const resultValues: Vector3D = [\n            v1._values[1] * v2._values[2] - v1._values[2] * v2._values[1],\n            v1._values[2] * v2._values[0] - v1._values[0] * v2._values[2],\n            v1._values[0] * v2._values[1] - v1._values[1] * v2._values[0]\n        ];\n        return new Vector3(resultValues);\n    }\n\n}\n\nexport class Vector4 extends Vector<Vector4D> {\n\n    protected create(values?: Vector4D | undefined): Vector4D {\n        return values ? values : [1, 1, 1, 1];\n    }\n\n}\n","import { Vector, Vector3, Vector4 } from \"./Vector\";\n\nexport type Array4 = [number, number, number, number];\nexport type Array9 = [number, number, number, number, number, number, number, number, number];\nexport type Array16 = [number, number, number, number, number, number, number, number, number, number, number, number, number, number, number, number];\nexport type MatrixValues = Array4 | Array9 | Array16;\n\nexport abstract class Matrix<T extends MatrixValues> {\n\n  constructor(values?: T) {\n    this._values = this.create(values);\n  }\n\n  protected _values: T;\n\n  protected abstract create(values?: T): T;\n\n  public abstract translate(...args: any): Matrix<T>;\n\n  public abstract scale(...args: any): Matrix<T>;\n\n  public abstract invert(): Matrix<T>;\n\n  transpose(): Matrix<T> {\n    const dimension = Math.sqrt(this._values.length);\n    const transposedValues: T = Array.from({ length: this._values.length }, (_, i) => {\n      const row = Math.floor(i / dimension);\n      const col = i % dimension;\n      return this._values[col * dimension + row];\n    }) as T;\n    this._values = transposedValues;\n    return this;\n  }\n\n  get values(): T {\n    return this._values;\n  }\n\n  set values(values: T) {\n    this._values = values;\n  }\n\n}\n\nexport class Matrix2 extends Matrix<Array4> {\n  static identity: Array4 = [\n    1, 0,\n    0, 1\n  ];\n\n  static multiply(a: Matrix2, b: Matrix2): Matrix2 {\n    const [a0, a1, a2, a3] = a.values;\n    const [b0, b1, b2, b3] = b.values;\n    return new Matrix2([\n      a0 * b0 + a1 * b2,\n      a0 * b1 + a1 * b3,\n      a2 * b0 + a3 * b2,\n      a2 * b1 + a3 * b3\n    ]);\n  }\n\n  static translation(tx: number, ty: number): Matrix2 {\n    return new Matrix2([\n      1, 0,\n      tx, ty\n    ]);\n  }\n\n  static rotation(angleInRadians: number): Matrix2 {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    return new Matrix2([\n      c, -s,\n      s, c\n    ]);\n  }\n\n  static scaling(sx: number, sy: number): Matrix2 {\n    return new Matrix2([\n      sx, 0,\n      0, sy\n    ]);\n  }\n\n  protected create(values: Array4): Array4 {\n    return values ? values : Matrix2.identity;\n  }\n\n  public translate(x: number, y: number): Matrix<Array4> {\n    return Matrix2.multiply(this, Matrix2.translation(x, y));\n  }\n\n  public rotate(angleInRadians: number): Matrix2 {\n    return Matrix2.multiply(this, Matrix2.rotation(angleInRadians));\n  }\n\n  public scale(sx: number, sy: number): Matrix2 {\n    return Matrix2.multiply(this, Matrix2.scaling(sx, sy));\n  }\n\n  public invert(): Matrix2 {\n    const [a, b, c, d] = this.values;\n    const det = a * d - b * c;\n    return new Matrix2([d / det, -b / det, -c / det, a / det]);\n  }\n\n}\n\nexport class Matrix3 extends Matrix<Array9> {\n  static identity: Array9 = [\n    1, 0, 0,\n    0, 1, 0,\n    0, 0, 1\n  ];\n\n  static multiply(a: Matrix3, b: Matrix3): Matrix3 {\n    const [a0, a1, a2, a3, a4, a5, a6, a7, a8] = a.values;\n    const [b0, b1, b2, b3, b4, b5, b6, b7, b8] = b.values;\n    return new Matrix3([\n      a0 * b0 + a1 * b3 + a2 * b6,\n      a0 * b1 + a1 * b4 + a2 * b7,\n      a0 * b2 + a1 * b5 + a2 * b8,\n      a3 * b0 + a4 * b3 + a5 * b6,\n      a3 * b1 + a4 * b4 + a5 * b7,\n      a3 * b2 + a4 * b5 + a5 * b8,\n      a6 * b0 + a7 * b3 + a8 * b6,\n      a6 * b1 + a7 * b4 + a8 * b7,\n      a6 * b2 + a7 * b5 + a8 * b8\n    ]);\n  }\n\n  static translation(tx: number, ty: number): Matrix3 {\n    return new Matrix3([\n      1, 0, 0,\n      0, 1, 0,\n      tx, ty, 1,\n    ]);\n  };\n\n  static rotation(angleInRadians: number): Matrix3 {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    return new Matrix3([\n      c, -s, 0,\n      s, c, 0,\n      0, 0, 1,\n    ]);\n  }\n\n  static scaling(sx: number, sy: number): Matrix3 {\n    return new Matrix3([\n      sx, 0, 0,\n      0, sy, 0,\n      0, 0, 1,\n    ]);\n  }\n\n  static projection(width: number, height: number): Matrix3 {\n    // Note: This matrix flips the Y axis so that 0 is at the top.\n    return new Matrix3([\n      2 / width, 0, 0,\n      0, -2 / height, 0,\n      -1, 1, 1,\n    ]);\n  };\n\n  protected create(values?: Array9): Array9 {\n    return values ? values : Matrix3.identity;\n  }\n\n  public translate(x: number, y: number): Matrix3 {\n    return Matrix3.multiply(this, Matrix3.translation(x, y));\n  }\n\n  public rotate(angleInRadians: number): Matrix3 {\n    return Matrix3.multiply(this, Matrix3.rotation(angleInRadians));\n  }\n\n  public scale(sx: number, sy: number): Matrix3 {\n    return Matrix3.multiply(this, Matrix3.scaling(sx, sy));\n  }\n\n  public invert(): Matrix3 {\n    const [\n      m00, m01, m02,\n      m10, m11, m12,\n      m20, m21, m22\n    ] = this.values;\n    const det = m00 * (m11 * m22 - m12 * m21) - m01 * (m10 * m22 - m12 * m20) + m02 * (m10 * m21 - m11 * m20);\n    const invDet = 1 / det;\n    const inv00 = (m11 * m22 - m12 * m21) * invDet;\n    const inv01 = -(m01 * m22 - m02 * m21) * invDet;\n    const inv02 = (m01 * m12 - m02 * m11) * invDet;\n    const inv10 = -(m10 * m22 - m12 * m20) * invDet;\n    const inv11 = (m00 * m22 - m02 * m20) * invDet;\n    const inv12 = -(m00 * m12 - m02 * m10) * invDet;\n    const inv20 = (m10 * m21 - m11 * m20) * invDet;\n    const inv21 = -(m00 * m21 - m01 * m20) * invDet;\n    const inv22 = (m00 * m11 - m01 * m10) * invDet;\n    return new Matrix3([\n      inv00, inv01, inv02,\n      inv10, inv11, inv12,\n      inv20, inv21, inv22\n    ]);\n  }\n\n}\n\nexport class Matrix4 extends Matrix<Array16> {\n  static identity: Array16 = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ];\n\n  static multiply(a: Matrix4, b: Matrix4): Matrix4 {\n    const [a0, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15] = a.values;\n    const [b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, b13, b14, b15] = b.values;\n\n    return new Matrix4([\n      a0 * b0 + a1 * b4 + a2 * b8 + a3 * b12,\n      a0 * b1 + a1 * b5 + a2 * b9 + a3 * b13,\n      a0 * b2 + a1 * b6 + a2 * b10 + a3 * b14,\n      a0 * b3 + a1 * b7 + a2 * b11 + a3 * b15,\n      a4 * b0 + a5 * b4 + a6 * b8 + a7 * b12,\n      a4 * b1 + a5 * b5 + a6 * b9 + a7 * b13,\n      a4 * b2 + a5 * b6 + a6 * b10 + a7 * b14,\n      a4 * b3 + a5 * b7 + a6 * b11 + a7 * b15,\n      a8 * b0 + a9 * b4 + a10 * b8 + a11 * b12,\n      a8 * b1 + a9 * b5 + a10 * b9 + a11 * b13,\n      a8 * b2 + a9 * b6 + a10 * b10 + a11 * b14,\n      a8 * b3 + a9 * b7 + a10 * b11 + a11 * b15,\n      a12 * b0 + a13 * b4 + a14 * b8 + a15 * b12,\n      a12 * b1 + a13 * b5 + a14 * b9 + a15 * b13,\n      a12 * b2 + a13 * b6 + a14 * b10 + a15 * b14,\n      a12 * b3 + a13 * b7 + a14 * b11 + a15 * b15\n    ]);\n  }\n\n  static translation(tx: number, ty: number, tz: number): Matrix4 {\n    return new Matrix4([\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0, 1, 0,\n      tx, ty, tz, 1,\n    ]);\n  };\n\n  static xRotation(angleInRadians: number): Matrix4 {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    return new Matrix4([\n      1, 0, 0, 0,\n      0, c, s, 0,\n      0, -s, c, 0,\n      0, 0, 0, 1,\n    ]);\n  }\n\n  static yRotation(angleInRadians: number): Matrix4 {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    return new Matrix4([\n      c, 0, -s, 0,\n      0, 1, 0, 0,\n      s, 0, c, 0,\n      0, 0, 0, 1,\n    ]);\n  }\n\n  static zRotation(angleInRadians: number): Matrix4 {\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    return new Matrix4([\n      c, s, 0, 0,\n      -s, c, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1,\n    ]);\n  }\n\n  static scaling(sx: number, sy: number, sz: number): Matrix4 {\n    return new Matrix4([\n      sx, 0, 0, 0,\n      0, sy, 0, 0,\n      0, 0, sz, 0,\n      0, 0, 0, 1,\n    ]);\n  }\n\n  static perspective(fieldOfViewInRadians: number, aspect: number, near: number, far: number): Matrix4 {\n    const f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\n    const rangeInv = 1.0 / (near - far);\n    return new Matrix4([\n      f / aspect, 0, 0, 0,\n      0, f, 0, 0,\n      0, 0, (near + far) * rangeInv, -1,\n      0, 0, near * far * rangeInv * 2, 0\n    ]);\n  };\n\n  static orthographic(\n    left: number,\n    right: number,\n    bottom: number,\n    top: number,\n    near: number,\n    far: number\n  ): Matrix4 {\n    return new Matrix4([\n      2 / (right - left), 0, 0, 0,\n      0, 2 / (top - bottom), 0, 0,\n      0, 0, 2 / (near - far), 0,\n\n      (left + right) / (left - right),\n      (bottom + top) / (bottom - top),\n      (near + far) / (near - far),\n      1,\n    ]);\n  };\n\n  static projection(width: number, height: number, depth: number): Matrix4 {\n    // Note: This matrix flips the Y axis so 0 is at the top.\n    return new Matrix4([\n      2 / width, 0, 0, 0,\n      0, -2 / height, 0, 0,\n      0, 0, 2 / depth, 0,\n      -1, 1, 0, 1,\n    ]);\n  };\n\n  static lookAt(cameraPosition: Vector3, targetVector: Vector3, upVector = new Vector3([0, 1, 0])): Matrix4 {\n\n    // TODO: check why \"as Vector3\" is needed\n    var zAxis = Vector.substract(cameraPosition, targetVector).normalize() as Vector3;\n    var xAxis = Vector3.cross(upVector, zAxis).normalize() as Vector3;\n    var yAxis = Vector3.cross(zAxis, xAxis).normalize();\n\n    return new Matrix4([\n      xAxis.values[0], xAxis.values[1], xAxis.values[2], 0,\n      yAxis.values[0], yAxis.values[1], yAxis.values[2], 0,\n      zAxis.values[0], zAxis.values[1], zAxis.values[2], 0,\n      cameraPosition.values[0],\n      cameraPosition.values[1],\n      cameraPosition.values[2],\n      1,\n    ]);\n  }\n\n  protected create(values?: Array16): Array16 {\n    return values ? values : Matrix4.identity;\n  };\n\n  public translate(x: number, y: number, z: number): Matrix4 {\n    return Matrix4.multiply(this, Matrix4.translation(x, y, z));\n  }\n\n  public rotateX(angleInRadians: number): Matrix4 {\n    return Matrix4.multiply(this, Matrix4.xRotation(angleInRadians));\n  }\n\n  public rotateY(angleInRadians: number): Matrix4 {\n    return Matrix4.multiply(this, Matrix4.yRotation(angleInRadians));\n  }\n\n  public rotateZ(angleInRadians: number): Matrix4 {\n    return Matrix4.multiply(this, Matrix4.zRotation(angleInRadians));\n  }\n\n  public scale(sx: number, sy: number, sz: number): Matrix4 {\n    return Matrix4.multiply(this, Matrix4.scaling(sx, sy, sz));\n  }\n\n  public invert(): Matrix4 {\n    const [\n      m00, m01, m02, m03,\n      m10, m11, m12, m13,\n      m20, m21, m22, m23,\n      m30, m31, m32, m33\n    ] = this.values;\n\n    const tmp_0 = m22 * m33;\n    const tmp_1 = m32 * m23;\n    const tmp_2 = m12 * m33;\n    const tmp_3 = m32 * m13;\n    const tmp_4 = m12 * m23;\n    const tmp_5 = m22 * m13;\n    const tmp_6 = m02 * m33;\n    const tmp_7 = m32 * m03;\n    const tmp_8 = m02 * m23;\n    const tmp_9 = m22 * m03;\n    const tmp_10 = m02 * m13;\n    const tmp_11 = m12 * m03;\n    const tmp_12 = m20 * m31;\n    const tmp_13 = m30 * m21;\n    const tmp_14 = m10 * m31;\n    const tmp_15 = m30 * m11;\n    const tmp_16 = m10 * m21;\n    const tmp_17 = m20 * m11;\n    const tmp_18 = m00 * m31;\n    const tmp_19 = m30 * m01;\n    const tmp_20 = m00 * m21;\n    const tmp_21 = m20 * m01;\n    const tmp_22 = m00 * m11;\n    const tmp_23 = m10 * m01;\n\n    const t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n      (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n    const t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n      (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n    const t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n      (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n    const t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n      (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n    const d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n    return new Matrix4([\n      d * t0,\n      d * t1,\n      d * t2,\n      d * t3,\n      d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30)),\n      d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30)),\n      d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30)),\n      d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20)),\n      d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33)),\n      d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33)),\n      d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33)),\n      d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23)),\n      d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22)),\n      d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02)),\n      d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12)),\n      d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02)),\n    ]);\n  }\n\n  public transformVector(vector: Vector4): Vector4 {\n    const m = this.values;\n    const dst = [];\n    for (let i = 0; i < 4; ++i) {\n      dst[i] = 0.0;\n      for (let j = 0; j < 4; ++j) {\n        dst[i] += vector.values[j] * m[j * 4 + i];\n      }\n    }\n    return new Vector4(dst as Array4);\n  }\n}\n","import { Matrix, type MatrixValues } from \"../math/Matrix\";\nimport { Vector, type VectorValues } from \"../math/Vector\";\nimport type { Program } from \"./Program\";\n\ntype Dimensions = '1' | '2' | '3' | '4';\ntype Datatype = 'f' | 'i';\ntype Sequence = 'v' | '';\ntype WebGLType = `${Dimensions}${Datatype}${Sequence}` | 'matrix2fv' | 'matrix3fv' | 'matrix4fv';\n\nexport type UniformParams = {\n  gl: WebGL2RenderingContext;\n  name: string;\n  program?: Program;\n  type: WebGLType;\n  value?: Vector<VectorValues> | Matrix<MatrixValues> | number | number[];\n};\n\nexport class Uniform {\n  private _gl: WebGL2RenderingContext;\n\n  private _value: number | number[] | null = null;\n\n  private _type: any;\n\n  private _name: string\n\n  private _program: Program | null = null;\n\n  constructor({ gl, type, name, program, value }: UniformParams) {\n    this._gl = gl;\n    this._name = name;\n    this._type = type;\n    if (program) {\n      this._program = program;\n    }\n    // TODO: This console.log delays the code so it runs properly\n    // TODO: Find out why this is happening\n    console.log(`Creating uniform ${name} with type ${type} and value ${value}`);\n    if (value !== undefined) {\n      if (value instanceof Matrix || value instanceof Vector) {\n        this.value = value.values;\n      } else {\n        this.value = value;\n      }\n    }\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(value: Vector<VectorValues> | Matrix<MatrixValues> | number | number[] | null) {\n    if (value instanceof Matrix || value instanceof Vector) {\n      this._value = value.values;\n    } else {\n      this._value = value;\n    }\n    const location = this.getLocation();\n\n    if (!Array.isArray(value)) {\n      switch (this._type) {\n        case '1f':\n          this._gl.uniform1f(location, value as number);\n          break;\n        case '1i':\n          this._gl.uniform1i(location, value as number);\n          break;\n        default:\n          throw `Invalid value ${value} for type ${this._type}`;\n      }\n    } else {\n      switch (this._type) {\n        case '2f':\n          this._gl.uniform2f(location, value[0], value[1]);\n          break;\n        case '2i':\n          this._gl.uniform2i(location, value[0], value[1]);\n          break;\n        case '3f':\n          this._gl.uniform3f(location, value[0], value[1], value[2]);\n          break;\n        case '3i':\n          this._gl.uniform3i(location, value[0], value[1], value[2]);\n          break;\n        case '4f':\n          this._gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n          break;\n        case '4i':\n          this._gl.uniform4i(location, value[0], value[1], value[2], value[3]);\n          break;\n        case 'matrix2fv':\n          this._gl.uniformMatrix2fv(location, false, value);\n          break;\n        case 'matrix3fv':\n          this._gl.uniformMatrix3fv(location, false, value);\n          break;\n        case 'matrix4fv':\n          this._gl.uniformMatrix4fv(location, false, value);\n          break;\n        case '2fv':\n          this._gl.uniform2fv(location, value);\n          break;\n        case '3fv':\n          this._gl.uniform3fv(location, value);\n          break;\n        case '4fv':\n          this._gl.uniform4fv(location, value);\n          break;\n        default:\n          throw `Invalid value ${value} for type ${this._type}`;\n      }\n    }\n  }\n\n  getLocation() {\n    if (!this._program) {\n      throw \"Could not get location of uniform. No program attached.\"\n    }\n    return this._gl.getUniformLocation(this._program.webGLProgram, this._name);\n  }\n}\n","export const F = new Float32Array([\n  // left column front\n  0, 0, 0,\n  0, 150, 0,\n  30, 0, 0,\n  0, 150, 0,\n  30, 150, 0,\n  30, 0, 0,\n\n  // top rung front\n  30, 0, 0,\n  30, 30, 0,\n  100, 0, 0,\n  30, 30, 0,\n  100, 30, 0,\n  100, 0, 0,\n\n  // middle rung front\n  30, 60, 0,\n  30, 90, 0,\n  67, 60, 0,\n  30, 90, 0,\n  67, 90, 0,\n  67, 60, 0,\n\n  // left column back\n  0, 0, 30,\n  30, 0, 30,\n  0, 150, 30,\n  0, 150, 30,\n  30, 0, 30,\n  30, 150, 30,\n\n  // top rung back\n  30, 0, 30,\n  100, 0, 30,\n  30, 30, 30,\n  30, 30, 30,\n  100, 0, 30,\n  100, 30, 30,\n\n  // middle rung back\n  30, 60, 30,\n  67, 60, 30,\n  30, 90, 30,\n  30, 90, 30,\n  67, 60, 30,\n  67, 90, 30,\n\n  // top\n  0, 0, 0,\n  100, 0, 0,\n  100, 0, 30,\n  0, 0, 0,\n  100, 0, 30,\n  0, 0, 30,\n\n  // top rung right\n  100, 0, 0,\n  100, 30, 0,\n  100, 30, 30,\n  100, 0, 0,\n  100, 30, 30,\n  100, 0, 30,\n\n  // under top rung\n  30, 30, 0,\n  30, 30, 30,\n  100, 30, 30,\n  30, 30, 0,\n  100, 30, 30,\n  100, 30, 0,\n\n  // between top rung and middle\n  30, 30, 0,\n  30, 60, 30,\n  30, 30, 30,\n  30, 30, 0,\n  30, 60, 0,\n  30, 60, 30,\n\n  // top of middle rung\n  30, 60, 0,\n  67, 60, 30,\n  30, 60, 30,\n  30, 60, 0,\n  67, 60, 0,\n  67, 60, 30,\n\n  // right of middle rung\n  67, 60, 0,\n  67, 90, 30,\n  67, 60, 30,\n  67, 60, 0,\n  67, 90, 0,\n  67, 90, 30,\n\n  // bottom of middle rung.\n  30, 90, 0,\n  30, 90, 30,\n  67, 90, 30,\n  30, 90, 0,\n  67, 90, 30,\n  67, 90, 0,\n\n  // right of bottom\n  30, 90, 0,\n  30, 150, 30,\n  30, 90, 30,\n  30, 90, 0,\n  30, 150, 0,\n  30, 150, 30,\n\n  // bottom\n  0, 150, 0,\n  0, 150, 30,\n  30, 150, 30,\n  0, 150, 0,\n  30, 150, 30,\n  30, 150, 0,\n\n  // left side\n  0, 0, 0,\n  0, 0, 30,\n  0, 150, 30,\n  0, 0, 0,\n  0, 150, 30,\n  0, 150, 0,\n]);\n\nexport const FColor = new Uint8Array([\n  // left column front\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n\n  // top rung front\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n\n  // middle rung front\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n  200, 70, 120,\n\n  // left column back\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n\n  // top rung back\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n\n  // middle rung back\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n  80, 70, 200,\n\n  // top\n  70, 200, 210,\n  70, 200, 210,\n  70, 200, 210,\n  70, 200, 210,\n  70, 200, 210,\n  70, 200, 210,\n\n  // top rung right\n  200, 200, 70,\n  200, 200, 70,\n  200, 200, 70,\n  200, 200, 70,\n  200, 200, 70,\n  200, 200, 70,\n\n  // under top rung\n  210, 100, 70,\n  210, 100, 70,\n  210, 100, 70,\n  210, 100, 70,\n  210, 100, 70,\n  210, 100, 70,\n\n  // between top rung and middle\n  210, 160, 70,\n  210, 160, 70,\n  210, 160, 70,\n  210, 160, 70,\n  210, 160, 70,\n  210, 160, 70,\n\n  // top of middle rung\n  70, 180, 210,\n  70, 180, 210,\n  70, 180, 210,\n  70, 180, 210,\n  70, 180, 210,\n  70, 180, 210,\n\n  // right of middle rung\n  100, 70, 210,\n  100, 70, 210,\n  100, 70, 210,\n  100, 70, 210,\n  100, 70, 210,\n  100, 70, 210,\n\n  // bottom of middle rung.\n  76, 210, 100,\n  76, 210, 100,\n  76, 210, 100,\n  76, 210, 100,\n  76, 210, 100,\n  76, 210, 100,\n\n  // right of bottom\n  140, 210, 80,\n  140, 210, 80,\n  140, 210, 80,\n  140, 210, 80,\n  140, 210, 80,\n  140, 210, 80,\n\n  // bottom\n  90, 130, 110,\n  90, 130, 110,\n  90, 130, 110,\n  90, 130, 110,\n  90, 130, 110,\n  90, 130, 110,\n\n  // left side\n  160, 160, 220,\n  160, 160, 220,\n  160, 160, 220,\n  160, 160, 220,\n  160, 160, 220,\n  160, 160, 220,\n]);\n\nexport const FNormals = new Float32Array([\n  // left column front\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n\n  // top rung front\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n\n  // middle rung front\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n  0, 0, 1,\n\n  // left column back\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n\n  // top rung back\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n\n  // middle rung back\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n  0, 0, -1,\n\n  // top\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n\n  // top rung right\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n\n  // under top rung\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n\n  // between top rung and middle\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n\n  // top of middle rung\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n  0, 1, 0,\n\n  // right of middle rung\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n\n  // bottom of middle rung.\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n\n  // right of bottom\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n  1, 0, 0,\n\n  // bottom\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n  0, -1, 0,\n\n  // left side\n  -1, 0, 0,\n  -1, 0, 0,\n  -1, 0, 0,\n  -1, 0, 0,\n  -1, 0, 0,\n  -1, 0, 0,\n]);\n\nexport const FTexture = new Float32Array([\n  // left column front\n  0, 0,\n  0, 1,\n  1, 0,\n  0, 1,\n  1, 1,\n  1, 0,\n\n  // top rung front\n  0, 0,\n  0, 1,\n  1, 0,\n  0, 1,\n  1, 1,\n  1, 0,\n\n  // middle rung front\n  0, 0,\n  0, 1,\n  1, 0,\n  0, 1,\n  1, 1,\n  1, 0,\n\n  // left column back\n  0, 0,\n  1, 0,\n  0, 1,\n  0, 1,\n  1, 0,\n  1, 1,\n\n  // top rung back\n  0, 0,\n  1, 0,\n  0, 1,\n  0, 1,\n  1, 0,\n  1, 1,\n\n  // middle rung back\n  0, 0,\n  1, 0,\n  0, 1,\n  0, 1,\n  1, 0,\n  1, 1,\n\n  // top\n  0, 0,\n  1, 0,\n  1, 1,\n  0, 0,\n  1, 1,\n  0, 1,\n\n  // top rung right\n  0, 0,\n  1, 0,\n  1, 1,\n  0, 0,\n  1, 1,\n  0, 1,\n\n  // under top rung\n  0, 0,\n  0, 1,\n  1, 1,\n  0, 0,\n  1, 1,\n  1, 0,\n\n  // between top rung and middle\n  0, 0,\n  1, 1,\n  0, 1,\n  0, 0,\n  1, 0,\n  1, 1,\n\n  // top of middle rung\n  0, 0,\n  1, 1,\n  0, 1,\n  0, 0,\n  1, 0,\n  1, 1,\n\n  // right of middle rung\n  0, 0,\n  1, 1,\n  0, 1,\n  0, 0,\n  1, 0,\n  1, 1,\n\n  // bottom of middle rung.\n  0, 0,\n  0, 1,\n  1, 1,\n  0, 0,\n  1, 1,\n  1, 0,\n\n  // right of bottom\n  0, 0,\n  1, 1,\n  0, 1,\n  0, 0,\n  1, 0,\n  1, 1,\n\n  // bottom\n  0, 0,\n  0, 1,\n  1, 1,\n  0, 0,\n  1, 1,\n  1, 0,\n\n  // left side\n  0, 0,\n  0, 1,\n  1, 1,\n  0, 0,\n  1, 1,\n  1, 0,\n]);\n","export function rotationVectorFromAngle(angleInDegrees: number) {\r\n  const angleInRadians = angleInDegrees * Math.PI / 180;\r\n  return [Math.sin(angleInRadians), Math.cos(angleInRadians)];\r\n}\r\n\r\nexport function radiansToDegrees(radians: number): number {\r\n  return radians * (180 / Math.PI);\r\n}\r\n\r\nexport function degreesToRadians(degrees: number): number {\r\n  return degrees * (Math.PI / 180);\r\n}\r\n","import type { Program } from \"../../models/webgl/Program\";\n\ntype PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>\n\nexport type WebGLPointerType = WebGL2RenderingContext[\n  \"BYTE\" |\n  \"FLOAT\" |\n  \"SHORT\" |\n  \"UNSIGNED_BYTE\" |\n  \"UNSIGNED_SHORT\" |\n  \"HALF_FLOAT\" |\n  \"INT\" |\n  \"UNSIGNED_INT\" |\n  \"INT_2_10_10_10_REV\" |\n  \"UNSIGNED_INT_2_10_10_10_REV\"\n];\n\nexport type AttributePointerProperties = {\n  normalize: boolean;\n  offset: number;\n  size: number;\n  stride: number;\n  type: WebGLPointerType;\n};\n\nexport type AttributeParams = {\n  gl: WebGL2RenderingContext;\n  name: string;\n  program?: Program;\n  pointerProperties: PartialBy<AttributePointerProperties, \"normalize\" | \"stride\" | \"offset\">;\n  createVao?: boolean;\n};\n\nexport class Attribute {\n  protected _gl: WebGL2RenderingContext;\n\n  protected _buffer: WebGLBuffer;\n\n  protected _name: string\n\n  protected _program: Program | null = null;\n\n  protected _vao: WebGLVertexArrayObject | null = null;\n\n  protected _pointerProperties: AttributePointerProperties;\n\n  protected _createVao: boolean;\n\n  constructor({ gl, name, program, pointerProperties, createVao }: AttributeParams) {\n    this._gl = gl;\n    this._name = name;\n    if (program) {\n      this._program = program;\n    }\n    this._createVao = createVao || false;\n    const buffer = gl.createBuffer();\n    if (!buffer) {\n      throw \"Could not create buffer\";\n    }\n    this._pointerProperties = {\n      normalize: false,\n      stride: 0,\n      offset: 0,\n      ...pointerProperties\n    };\n    this._buffer = buffer;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get buffer() {\n    return this._buffer;\n  }\n\n  get vao() {\n    if (!this._vao) {\n      throw \"Could not get vao of attribute. Was the data set already?\"\n    }\n    return this._vao;\n  }\n\n  getLocation() {\n    if (!this._program) {\n      throw \"Could not get location of attribute. No program attached.\"\n    }\n    return this._gl.getAttribLocation(this._program.webGLProgram, this._name);\n  }\n\n  // TODO: this should be dynamic i guess\n  setBufferData(data: BufferSource ) {\n\n    if(this._createVao) {\n      // Create a vertex array object (attribute state)\n      this._vao = this._gl.createVertexArray();\n\n      // and make it the one we're currently working with\n      this._gl.bindVertexArray(this._vao);\n    }\n\n    // Turn on the attribute\n    this._gl.enableVertexAttribArray(this.getLocation());\n\n    // Bind it to ARRAY_BUFFER (think of it as ARRAY_BUFFER = positionBuffer)\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, this._buffer);\n\n    // Set Geometry.\n    this._gl.bufferData(\n      this._gl.ARRAY_BUFFER,\n      data,\n      this._gl.STATIC_DRAW\n    );\n\n    const {\n      size,\n      type,\n      normalize,\n      stride,\n      offset\n    } =this._pointerProperties;\n\n    // Tell the attribute how to get data out of positionBuffer (ARRAY_BUFFER)\n    this._gl.vertexAttribPointer(this.getLocation(), size, type, normalize, stride, offset);\n  }\n}\n","import { Attribute } from \"../webgl/Attribute\";\nimport type { Program } from \"../webgl/Program\";\nimport type { Texture } from \"../webgl/Texture\";\n\nexport type MeshParams = {\n  program: Program;\n  gl: WebGL2RenderingContext;\n  coordinates?: Float32Array;\n  texture?: Texture;\n  normals?: Float32Array;\n};\n\nexport class Mesh {\n\n  constructor({\n    coordinates,\n    normals,\n    texture,\n    gl,\n    program\n  }: MeshParams) {\n\n    this._gl = gl;\n    this._program = program;\n\n    this._positionAttribute = new Attribute({\n      gl,\n      name: 'a_position',\n      program,\n      createVao: true,\n      pointerProperties: {\n        size: 3,\n        type: gl.FLOAT,\n      },\n    });\n    if (coordinates) {\n      this._positionAttribute.setBufferData(coordinates);\n    }\n    this._normalsAttribute = new Attribute({\n      gl,\n      name: 'a_normal',\n      program,\n      pointerProperties: {\n        size: 3,\n        type: gl.FLOAT,\n      },\n    })\n    if (normals) {\n      this._normalsAttribute.setBufferData(normals);\n    }\n    if (texture) {\n      this._texture = texture;\n    }\n  }\n\n  private _gl: WebGL2RenderingContext;\n\n  private _program: Program;\n\n  private _positionAttribute?: Attribute;\n\n  private _normalsAttribute?: Attribute;\n\n  private _texture?: Texture;\n\n  public draw() {\n    if (!this._positionAttribute) {\n      console.log('No position attribute');\n      return;\n    } else {\n      this._gl.bindVertexArray(this._positionAttribute.vao);\n      const primitiveType = this._gl.TRIANGLES;\n      const offset = 0;\n       // TODO: This value needs to be calculated\n      const count = 96;\n      this._gl.drawArrays(primitiveType, offset, count);\n      if (this._texture) {\n        this._texture.draw();\n      }\n    }\n  }\n\n};\n","import { Attribute } from \"./Attribute\";\nimport type { Program } from \"./Program\";\n\ntype PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>\n\nexport type TextureWrap = WebGL2RenderingContext[\"CLAMP_TO_EDGE\" | \"MIRRORED_REPEAT\" | \"REPEAT\"]\n\nexport type TextureMinFilter = WebGL2RenderingContext[\n  \"LINEAR\" |\n  \"NEAREST\" |\n  \"NEAREST_MIPMAP_LINEAR\" |\n  \"NEAREST_MIPMAP_NEAREST\" |\n  \"LINEAR_MIPMAP_LINEAR\" |\n  \"LINEAR_MIPMAP_NEAREST\"\n]\n\nexport type TextureMagFilter = WebGL2RenderingContext[\"LINEAR\" | \"NEAREST\"];\n\nexport type TextureParams = {\n  program: Program;\n  gl: WebGL2RenderingContext;\n  src: string;\n  coordinates?: Float32Array;\n  wrapS?: TextureWrap;\n  wrapT?: TextureWrap;\n  minFilter?: TextureMinFilter;\n  magFilter?: TextureMagFilter;\n};\n\nexport class Texture {\n\n  private _gl: WebGL2RenderingContext;\n\n  private _program: Program;\n\n  private _image: HTMLImageElement;\n\n  private _webGlTexture: WebGLTexture;\n\n  private _coordinatesAttribute?: Attribute;\n\n  private _coordinates?: Float32Array;\n\n  constructor({\n    gl,\n    program,\n    src,\n    coordinates,\n    wrapS,\n    wrapT,\n    minFilter = gl.LINEAR_MIPMAP_LINEAR,\n    magFilter = gl.LINEAR\n  }: TextureParams) {\n\n    this._gl = gl;\n\n    this._program = program;\n\n    this._coordinates = coordinates\n\n    this._coordinatesAttribute = new Attribute({\n      gl,\n      name: 'a_texcoord',\n      program,\n      pointerProperties: {\n        size: 2,\n        normalize: true,\n        type: gl.FLOAT,\n      },\n    });\n\n    // Create a texture.\n    this._webGlTexture = gl.createTexture()!;\n    gl.bindTexture(gl.TEXTURE_2D, this._webGlTexture);\n\n    // Fill the texture with a 1x1 blue pixel.\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      1,\n      1,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      new Uint8Array([0, 0, 255, 255])\n    );\n\n    // Asynchronously load an image\n    this._image = new Image();\n    this._image.src = src;\n    this._image.addEventListener('load', () => {\n      gl.bindTexture(gl.TEXTURE_2D, this._webGlTexture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n      if (wrapS) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\n      }\n      if (wrapT) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\n      }\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA,gl.UNSIGNED_BYTE, this._image);\n      gl.generateMipmap(gl.TEXTURE_2D);\n    });\n  };\n\n  draw() {\n    if (this._coordinates && this._coordinatesAttribute) {\n      this._coordinatesAttribute.setBufferData(this._coordinates);\n    }\n  }\n\n}\n","<script lang=\"ts\">\n  import vertexShaderSource from '../engine/shader/vert';\n  import fragmentShaderSource from '../engine/shader/frag';\n  import { onMount } from 'svelte';\n  import { Scene } from '../engine/Scene';\n  import { VertexShader } from '../engine/shader/VertexShader';\n  import { FragmentShader } from '../engine/shader/FragmentShader';\n  import { Program } from '../engine/models/webgl/Program';\n  import { Uniform } from '../engine/models/webgl/Uniform';\n  import { F, FNormals, FTexture } from '../engine/shapes/3d/Chars';\n  import { degreesToRadians } from '../engine/util/Math';\n  import { Vector3, Vector4 } from '../engine/models/math/Vector';\n  import { Matrix4 } from '../engine/models/math/Matrix';\n  import { Mesh } from '../engine/models/mesh/Mesh';\n  import { Texture } from '../engine/models/webgl/Texture';\n\n  let canvas: HTMLCanvasElement;\n  let translationX: number = 0;\n  let translationY: number = 0;\n  let translationZ: number = 0;\n  let rotationX: number = 0;\n  let rotationY: number = 0;\n  let rotationZ: number = 0;\n  let scaleX: number = 1;\n  let scaleY: number = 1;\n  let scaleZ: number = 1;\n  let gl: WebGL2RenderingContext;\n  let meshes: Mesh[] = [];\n\n  let lightWorldPosition: Uniform;\n  let viewWorldPosition: Uniform;\n  let shininess: Uniform;\n  let specularColor: Uniform;\n  let lightColor: Uniform;\n\n  let world: Uniform;\n  let worldInverseTranspose: Uniform;\n  let worldViewUniform: Uniform;\n  let program: Program;\n\n  let mouseRotateActive = false;\n  let mouseRotateStartPosition = [0, 0];\n  let mouseAction = 'rotate';\n  let mouseRotateStartRotate = [0, 0, 0];\n  let mouseRotateStartTranslate = [0, 0, 0];\n  let mouseRotateStartScale = [0, 0, 0];\n\n  const onMouseDown = (event: MouseEvent | TouchEvent) => {\n    const isTouch = event instanceof TouchEvent;\n    mouseRotateActive = true;\n    if (!isTouch) {\n      mouseAction = event.button === 0 ? 'rotate' : 'scale';\n      mouseRotateStartPosition = [event.clientX, event.clientY];\n    } else {\n      mouseAction = 'rotate';\n      mouseRotateStartPosition = [event.touches[0].clientX, event.touches[0].clientY];\n    }\n    mouseRotateStartRotate = [rotationX, rotationY, rotationZ];\n    mouseRotateStartTranslate = [translationX, translationY, translationZ];\n    mouseRotateStartScale = [scaleX, scaleY, scaleZ];\n  };\n\n  const onMouseUp = () => {\n    mouseRotateActive = false;\n    mouseAction = 'rotate';\n  };\n\n  const onMouseMove = (event: MouseEvent | TouchEvent) => {\n    const isTouch = event instanceof TouchEvent;\n\n    if (!mouseRotateActive) return;\n    const eventX = isTouch ? event.touches[0].clientX : event.clientX\n    const eventY = isTouch ? event.touches[0].clientY : event.clientY;\n\n    const deltaX = mouseRotateStartPosition[0] - eventX;\n    const deltaY = mouseRotateStartPosition[1] - eventY;\n\n    // mousewheel\n    if (mouseAction === 'rotate') {\n      // FIXME: The axis seem to be swichted here check rotation matrices\n      rotationX = mouseRotateStartRotate[0] - deltaY;\n      rotationY = mouseRotateStartRotate[1] - deltaX;\n    }\n    // right mouse button\n    if (mouseAction === 'scale') {\n      const factor = canvas.clientHeight / 4;\n      scaleX = mouseRotateStartScale[0] + deltaY / factor;\n      scaleY = mouseRotateStartScale[1] + deltaY / factor;\n      scaleZ = mouseRotateStartScale[2] + deltaY / factor;\n    }\n  };\n\n  onMount(() => {\n    const engine = new Scene(canvas);\n    if (!engine.gl) {\n      throw 'Could not get gl from Engine.';\n    }\n\n    canvas.addEventListener('contextmenu', (event) => event.preventDefault());\n    canvas.addEventListener('mousedown', onMouseDown);\n    canvas.addEventListener('touchstart', onMouseDown);\n    canvas.addEventListener('mouseup', onMouseUp);\n    canvas.addEventListener('touchend', onMouseUp);\n    canvas.addEventListener('mousemove', onMouseMove);\n    canvas.addEventListener('touchmove', onMouseMove);\n\n    gl = engine.gl;\n\n    program = new Program(gl);\n    const vertexShader = new VertexShader({\n      gl,\n      source: vertexShaderSource,\n    });\n    const fragmentShader = new FragmentShader({\n      gl,\n      source: fragmentShaderSource,\n    });\n    program.attachShader(vertexShader);\n    program.attachShader(fragmentShader);\n    engine.linkProgram(program);\n\n    // Tell it to use our program (pair of shaders)\n    gl.useProgram(program.webGLProgram);\n\n    // flip F geometry\n    var fMatrix = Matrix4.translation(-50, -75, -15);\n    fMatrix = fMatrix.rotateX(Math.PI);\n    for (var ii = 0; ii < F.length; ii += 3) {\n      var vector = fMatrix.transformVector(new Vector4([\n        F[ii + 0],\n        F[ii + 1],\n        F[ii + 2],\n        1,\n      ])\n      );\n      F[ii + 0] = vector.values[0];\n      F[ii + 1] = vector.values[1];\n      F[ii + 2] = vector.values[2];\n    }\n\n    const fTexture = new Texture({\n      gl,\n      program,\n      coordinates: FTexture,\n      src: './static/f-texture.png'\n    });\n\n    const fMesh = new Mesh({\n      gl,\n      program,\n      coordinates: F,\n      normals: FNormals,\n      texture: fTexture\n    });\n    meshes.push(fMesh);\n\n    lightColor = new Uniform({\n      gl,\n      type: '3fv',\n      name: 'u_lightColor',\n      program,\n      value: new Vector3([1, 1, 1]).normalize()\n    });\n\n    specularColor = new Uniform({\n      gl,\n      type: '3fv',\n      name: 'u_specularColor',\n      program,\n      value: new Vector3([1, 0.2, 0.2]).normalize()\n    });\n\n    shininess = new Uniform({\n      gl,\n      type: '1f',\n      name: 'u_shininess',\n      program,\n      value: 50,\n    });\n\n    viewWorldPosition = new Uniform({\n      gl,\n      type: '3fv',\n      name: 'u_viewWorldPosition',\n      program,\n      value: new Vector3([0, 0, 400]),\n    });\n\n    lightWorldPosition = new Uniform({\n      gl,\n      type: '3fv',\n      name: 'u_lightWorldPosition',\n      program,\n      value: new Vector3([0, 20, 100]),\n    });\n\n    world = new Uniform({\n      gl,\n      type: 'matrix4fv',\n      name: 'u_world',\n      program,\n      value: Matrix4.identity,\n    });\n\n    worldInverseTranspose = new Uniform({\n      gl,\n      type: 'matrix4fv',\n      name: 'u_worldInverseTranspose',\n      program,\n      value: new Matrix4().transpose().invert(),\n    });\n\n    worldViewUniform = new Uniform({\n      gl,\n      type: 'matrix4fv',\n      name: 'u_worldViewProjection',\n      program,\n      value: Matrix4.identity,\n    });\n\n    draw();\n  });\n\n  function draw(time?: number) {\n    if (!gl) return;\n\n    // Check if the canvas is not the same size.\n    const needResize =\n      canvas.width !== canvas.clientWidth ||\n      canvas.height !== canvas.clientHeight;\n    if (needResize) {\n      // Make the canvas the same size\n      canvas.width = canvas.clientWidth;\n      canvas.height = canvas.clientHeight;\n      gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n    }\n    let canvasWidth = canvas.width;\n    let canvasHeight = canvas.height;\n\n    // Clear the canvas\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    gl.enable(gl.CULL_FACE);\n    gl.enable(gl.DEPTH_TEST);\n\n    const aspect = canvasWidth / canvasHeight;\n    const zNear = 1;\n    const zFar = 10000;\n    const fieldOfViewRadians = degreesToRadians(60);\n\n    // Compute the matrix\n    const projectionMatrix = Matrix4.perspective(\n      fieldOfViewRadians,\n      aspect,\n      zNear,\n      zFar,\n    );\n\n    const cameraPosition = new Vector3([0, 0, 400]);\n\n    // Draw a F at the origin with rotation\n    let worldMatrix = new Matrix4();\n    worldMatrix = worldMatrix\n      .rotateY(degreesToRadians(rotationY))\n      .rotateX(degreesToRadians(rotationX))\n      .rotateZ(degreesToRadians(rotationZ))\n      .translate(translationX, translationY, translationZ);\n\n    const fPosition = new Vector3([\n      worldMatrix.values[12],\n      worldMatrix.values[13],\n      worldMatrix.values[14]\n    ]);\n    const cameraMatrix = Matrix4.lookAt(cameraPosition, fPosition);\n\n    // Make a view matrix from the camera matrix.\n    const viewMatrix = cameraMatrix.invert();\n\n    // move the projection space to view space (the space in front of the camera)\n    let viewProjectionMatrix = Matrix4.multiply(viewMatrix, projectionMatrix);\n\n    const worldViewProjectionMatrix = Matrix4.multiply(\n      worldMatrix,\n      viewProjectionMatrix,\n    );\n\n    // Set the matrix.\n    worldInverseTranspose.value = worldMatrix.values;\n    worldViewUniform.value = worldViewProjectionMatrix.values;\n\n    // Draw the meshes\n    meshes.forEach(mesh => mesh.draw());\n\n    requestAnimationFrame(draw);\n  }\n</script>\n\n<div class=\"engine\">\n  <!-- Size will get set in the draw call -->\n  <canvas bind:this={canvas} />\n  <div class=\"controls\">\n    <div class=\"control\">\n      <span class=\"field\">\n        <span class=\".label\">Positon:</span>\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">x</span>\n        <input type=\"number\" bind:value={translationX} />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">y</span>\n        <input type=\"number\" bind:value={translationY} min={-1000} max={1000} />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">z</span>\n        <input type=\"number\" bind:value={translationZ} min={-1000} max={1000} />\n      </span>\n    </div>\n    <div class=\"control\">\n      <span class=\"field\">\n        <span class=\"label\">Scale:</span>\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">x</span>\n        <input type=\"number\" bind:value={scaleX} min={0.1} max={3} step={0.1} />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">y</span>\n        <input type=\"number\" bind:value={scaleY} min={0.1} max={3} step={0.1} />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">z</span>\n        <input type=\"number\" bind:value={scaleZ} min={0.1} max={3} step={0.1} />\n      </span>\n    </div>\n    <div class=\"control\">\n      <span class=\"field\">\n        <span class=\"label\">Rotation:</span>\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">x</span>\n        <input\n          type=\"number\"\n          bind:value={rotationX}\n          step={15}\n          min={-360}\n          max={360}\n        />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">y</span>\n        <input\n          type=\"number\"\n          bind:value={rotationY}\n          step={15}\n          min={-360}\n          max={360}\n        />\n      </span>\n      <span class=\"field\">\n        <span class=\"label\">z</span>\n        <input\n          type=\"number\"\n          bind:value={rotationZ}\n          step={15}\n          min={-360}\n          max={360}\n        />\n      </span>\n    </div>\n  </div>\n</div>\n\n<style lang=\"less\">\n  .engine {\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n  }\n\n  canvas {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    border: 1px solid const(--accent);\n    background-color: #f7f5ed;\n  }\n\n  .controls {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .control {\n      display: flex;\n      flex: 1;\n\n      .field {\n        flex: 1;\n        display: flex;\n        justify-content: center;\n\n        input[type='number'] {\n          flex: 1;\n          max-width: 50px;\n        }\n\n        &:first-child {\n          justify-content: flex-end;\n        }\n      }\n      .label {\n        margin-right: 0.25em;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import Router from 'svelte-spa-router';\n  import Home from './routes/Home.svelte';\n  import ShaderArt from './routes/shaderart/ShaderArt.svelte';\n  import Link from './lib/Link.svelte';\n  import Engine from './routes/Engine.svelte';\n\n  const routes = {\n    '/': Home,\n    // Exact path\n    '/shaderart': ShaderArt,\n    '/engine': Engine\n  };\n</script>\n\n<div class=\"content\">\n  <header>\n    <nav>\n      <Link href=\"/engine\">Engine</Link>\n      <Link href=\"/home\">Home</Link>\n      <Link href=\"/shaderart\">Shader Art</Link>\n    </nav>\n  </header>\n  <main>\n    <Router {routes} />\n  </main>\n</div>\n\n<style lang=\"less\">\n  div.content {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    header {\n      height: 3em;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n\n    nav {\n      font-size: 1.2em;\n\n      :global(a) {\n        padding: 0.6em;\n      }\n    }\n\n    main {\n      position: relative;\n      height: 100%;\n      flex: 1;\n      overflow: auto;\n    }\n  }\n</style>\n","import './app.css'\nimport App from './App.svelte'\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app\n"],"names":["noop","assign","tar","src","k","run","fn","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","b","is_empty","obj","subscribe","store","callbacks","callback","unsub","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","action_destroyer","action_result","append","target","node","insert","anchor","detach","element","name","text","data","space","empty","listen","event","handler","options","attr","attribute","value","to_number","children","set_input_value","input","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","construct_svelte_component","props","current_component","set_current_component","get_current_component","onMount","afterUpdate","onDestroy","createEventDispatcher","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","tick","add_render_callback","seen_callbacks","flushidx","saved_component","update","$$","flush_render_callbacks","filtered","targets","c","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","get_spread_update","levels","updates","to_null_out","accounted_for","o","n","key","get_spread_object","spread_props","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","detaching","make_dirty","init","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","__publicField","index","PUBLIC_VERSION","subscriber_queue","readable","start","writable","stop","subscribers","set","new_value","run_queue","subscriber","invalidate","derived","stores","initial_value","single","stores_array","auto","started","values","pending","cleanup","sync","result","unsubscribers","parse","str","loose","tmp","ext","keys","pattern","arr","switch_instance_spread_levels","getLocation","hashPosition","location","qsPosition","querystring","loc","_loc","params","link","opts","linkOpts","updateLink","updated","restoreScroll","state","href","scrollstateHistoryHandler","val","routes","$$props","prefix","restoreScrollState","RouteItem","path","match","matches","out","routesList","route","componentParams","dispatch","dispatchNextTick","previousScrollState","popStateChanged","lastLoc","componentObj","unsubscribeLoc","newLoc","$$invalidate","loaded","vertexShaderSource$1","fragmentShaderSource$1","density","speedFactor","input0","input1","id","$speedFactor","$density","div2","div0","label0","label1","canvas_1","div1","canvas","gl","program","vertexShader","vertexShaderSource","fragmentShader","fragmentShaderSource","bufferData","uPositionLoc","uTimeLoc","uDensityLoc","buffer","aPositionLoc","draw","time","$$value","Scene","BaseShader","source","VertexShader","shader","FragmentShader","Program","uniform","Vector","v1","v2","Vector1","Vector2","Vector3","Vector4","sum","vector","magnitude","resultValues","VectorConstructor","Matrix","dimension","transposedValues","_","row","col","_Matrix4","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","a11","a12","a13","a14","a15","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","tx","ty","tz","angleInRadians","sx","sy","sz","fieldOfViewInRadians","aspect","near","far","f","rangeInv","left","right","bottom","top","width","height","depth","cameraPosition","targetVector","upVector","zAxis","xAxis","yAxis","x","y","z","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","d","m","dst","j","Matrix4","Uniform","F","FNormals","FTexture","degreesToRadians","degrees","Attribute","pointerProperties","createVao","size","normalize","stride","offset","Mesh","coordinates","normals","texture","primitiveType","Texture","wrapS","wrapT","minFilter","magFilter","div4","div3","span1","span3","span2","span5","span4","span7","span6","input2","span9","span11","span10","input3","span13","span12","input4","span15","span14","input5","span17","span19","span18","input6","span21","span20","input7","span23","span22","input8","translationX","translationY","translationZ","rotationX","rotationY","rotationZ","scaleX","scaleY","scaleZ","meshes","worldInverseTranspose","worldViewUniform","mouseRotateActive","mouseRotateStartPosition","mouseAction","mouseRotateStartRotate","mouseRotateStartScale","onMouseDown","isTouch","onMouseUp","onMouseMove","eventX","eventY","deltaX","deltaY","factor","engine","fMatrix","ii","fTexture","fMesh","canvasWidth","canvasHeight","zNear","zFar","fieldOfViewRadians","projectionMatrix","worldMatrix","fPosition","viewMatrix","viewProjectionMatrix","worldViewProjectionMatrix","mesh","div","header","nav","main","Home","ShaderArt","Engine","App"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11]}